<!--
/*
' Copyright 2022~2025 USBONG
'
' Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You ' may obtain a copy of the License at
'
' http://www.apache.org/licenses/LICENSE-2.0
'
' Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, ' WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing ' permissions and limitations under the License.
'
' @company: USBONG
' @author: SYSON, MICHAEL B.
' @date created: 20221214
' @date updated: 20251125; from 20251124
' @website: www.usbong.ph
'
' References: GitHub itch.io Game Off 2021, 2022, 2023, 2024
'
'*/
-->

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  </head>

  <title>
    Usbong Game Off 2025
  </title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <style type="text/css">
		html, body
        {
            font-family: Arial;
			font-size: 11pt;

			width: 100%;
			height: 100%;

			background-color: black; /*white; transparent*/
			border: none;

			padding: 0;
			margin: 0;

			/* //added by Mike, 20221002
			//reference: https://www.w3schools.com/howto/howto_css_disable_text_selection.asp;
			//last accessed: 20221002
			*/

			-webkit-user-select: none; /* Safari */
			-ms-user-select: none; /* IE 10 and IE 11 */
			user-select: none; /* Standard syntax */

			/* added by Mike, 20221012 */
			transform: scale(1.0);

			/* added by Mike, 20221119 */
			touch-action: none;
		}

		canvas.myCanvas {
			position: absolute;

			padding: 0;
			margin: auto;
			display: block;

			width: 640px;
			height: 360px;

			visibility: hidden;

			border: 0px;

			z-index: -1;
		}

		canvas.myCanvasTwo {
			position: absolute;

			padding: 0;
			margin: auto;
			display: block;

			width: 640px;
			height: 360px;

			visibility: hidden;

			border: 0px;

			z-index: 3;
		}
		
		canvas.myEffectCanvas {		
			position: absolute;
							
			padding: 0;
			margin: auto;							
			display: block;
	
			visibility: hidden;

			z-index: 99;							
		}						

		canvas.myCanvasSnowEffect {
			position: absolute;

			padding: 0;
			margin: auto;
			display: block;


			width: 640px;
			height: 360px;

			visibility: hidden;

			border: 1px dotted gray;

			z-index: 10;
		}
		
		div.myDivSnowEffect
		 {
			position: absolute;

			background-color: white; /*pink;*/
			
			padding: 0;
			margin: auto;
			display: block;


			width: 5px; /*10px;*/
			height: 5px; /*10px;*/


			visibility: visible;
/*

			border: 1px dotted gray;
*/
			z-index: 20;
		}

		div.myDivTransitionEffect
		{
			position: absolute;

			background-color: black; /*pink;*/
			
			padding: 0;
			margin: auto;
			display: block;


			width: 360px;
			height: 360px;


			visibility: visible; /*hidden;*/
			z-index: 99;
			
			transform: scale(0, 0);
		}
		

		.ImageTileFrame1 {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			visibility: hidden;
			
			z-index: 4; /*2;*/
		}

		.ImageTileFrameFireballProjectileHold {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			visibility: hidden;
			
			z-index: 2; /*2;*/
		}
		
		.ImageTileFrameDd1 { 
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			visibility: hidden;
			
			z-index: 5; /*2;*/
		}

		.ImageTileBgFrame {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			visibility: hidden;
			
			z-index: 2;
		}

		
		.ImageHeroFrame1 {
			position: absolute;

			clip: rect(0px,64px,64px,0px);
			
			visibility: hidden;
						
			z-index: 3;
		}
		
		.ImageAnimalFrame1 {
			position: absolute;

			clip: rect(0px,64px,64px,0px);
			
			visibility: hidden;
						
			z-index: 3;
		}

		.ImageHeroFrame1Boss {
			position: absolute;

			clip: rect(0px,128px,128px,0px);
			
			visibility: hidden;
						
			z-index: 3;
		}

		.ImageTankFrame1 {
			position: absolute;

			clip: rect(0px,64px,64px,0px);
			visibility: hidden;
			
			z-index: 3;
		}
		

    .ImageMonsterBoss {
			position: absolute;

      clip: rect(0px,128px,128px,0px);

      width:512px;
      height: auto;

			visibility: hidden;
			
			z-index: 4; /*2;*/
		}

    .ImageMonster0 {
      position: absolute;

      clip: rect(0px,64px,64px,0px);

      visibility: hidden;
    }
	
	 .ImageMainSoldier {
			position: absolute;
/*
			width: 768px;
			height: 256px;
			
			object-fit: contain;

			clip: rect(0px,64px,64px,0px);
*/
			visibility: hidden;
			
			z-index: 2;
		}

	 .ImageBossBattleBgPart2, .ImageBossBattleBgPart3 {
			position: absolute;
			visibility: hidden;
			
			z-index: 99;
		}

	 .ImageBossBattleBgBeachPart2 {
			position: absolute;
			visibility: hidden;
			
			z-index: 4;
		}
		
		.ImageTransparentLayer {
			position: absolute;
			visibility: visible;
			
			z-index: 6;
		}


		.ImageMouseInput {
			position: absolute;

			clip: rect(0px,64px,64px,0px);
/*
			clip: rect(0px,32px,32px,0px);
*/
			visibility: hidden; /*visible;*/
		}


		.ImageExplosion, .ImageInitFireball {
			position: absolute;

			/*	//edited by Mike, 20231120
				clip: rect(0px,256px,256px,0px);
			*/

			clip: rect(0px,128px,128px,0px);

			visibility: hidden;

			z-index: 10; /*4;*/
		}

		.ImageExplosionEffectResizedToSmall {
			position: absolute;

			clip: rect(0px,128px,128px,0px);
			
			visibility: hidden;

			z-index: 10; /*4;*/
		}
		
		.ImageGrassCutEffectSmall, .ImagePearlSmall, .ImageKeySmall {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			
			visibility: hidden;

			z-index: 3; /*2;*/
		}		

		.ImageProfileSmall {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			
			visibility: hidden;

			z-index: 3;
		}		

		.ImageBombSmall {
			position: absolute;

			clip: rect(0px,32px,32px,0px);
			
			visibility: hidden;

			z-index: 3;
		}		
		
		
		.ImageExplosionToCity {
			position: absolute;

			clip: rect(0px,128px,128px,0px);
/*
			width: 64px; 
			height: auto;
*/
			object-fit: contain;
			
			visibility: hidden;
/*			
			scale: 0.5;
*/
			z-index: 10; /*4;*/
		}

		.ImageDust {
			position: absolute;

			clip: rect(0px,32px,32px,0px);

			visibility: hidden;

			z-index: 10; /*4;*/
		}

		.ImageSnow, .ImageParticle {
			position: absolute;

			clip: rect(0px,32px,32px,0px);

			visibility: hidden;

			z-index: 10; /*4;*/
		}
		
		.ImageHeroAttack {
			position: absolute;

			clip: rect(0px,32px,32px,0px);

			visibility: hidden;

			z-index: 10; /*4;*/
		}			

		.ImageWalkOnSnowEffect {
			position: absolute;

			clip: rect(0px,32px,32px,0px);

			visibility: hidden;

			z-index: 3;
		}
		
		.ImageHowToPlayGuide {
			position: absolute;

			text-align: center;
			line-height: 32px;

			visibility: hidden;

			width: 640px;
			height: 360px;

			/* //added by Mike, 20221104 */
			z-index: 10;
		}

		.ImageTitle {
			position: absolute;

			text-align: center;
			line-height: 32px;

			visibility: hidden;

			/* //edited by Mike, 20230121
			//notes: @640px, excess shaking via MS EDGE Browser
			*/
			width: 480px; /*640px;*/

			object-fit: contain;

			z-index: 10;
		}

		.ImageBossBattleBg {
			position: absolute;

			text-align: center;
			line-height: 32px;

			visibility: hidden;

			width: 640px; /*360*/
			height: auto;

			object-fit: contain;
			
			z-index: 1;
		}

		
		.ButtonSet, .TextInputSet {
			position: relative; /*absolute;*/
			font-size: 20px;
		}

		.LabelSet {
			position: relative; /*absolute;*/
			font-size: 24px;

			font-weight: bolder; /*bold;*/
		}

		.SelectAnimDirection {
			font-size: 22px;
		}

		table.TableSetPanel
		{
			position: absolute;
			border: 2px dotted #ab9c7d;
			margin-top: 0px; /*10px*/

			visibility: hidden;
		}


		.Image32x32Tile {
			position: absolute;
/*
			width: 256px;
			height: 256px;

			object-fit: contain;

			clip: rect(0px,64px,64px,0px);
*/
/*	//edited by Mike, 20231116
			width: 512px;
*/
			width: 768px;
			height: 256px;

			object-fit: contain;

			clip: rect(0px,64px,64px,0px);

			background-color: #f7f7f7; /*transparent;*/
/*
			border: none;
*/
			color: #222222;

			/* //removed by Mike, 20221111
			opacity: 0.5;*/

			font-weight: bold;
			/*font-size: 146%;*/ /*20px;*/
/*
			text-align: center;
			line-height: 32px;
*/

			border: 0px dotted gray;

			visibility: hidden;

			margin: 0px; /*1px;*/
			padding: 0px;

			z-index: 2; /*3;*/
		}
		
		.Image64x64Tile {
			position: absolute;
/*
			width: 512px;
			height: 512px;

			object-fit: contain;
*/
			clip: rect(0px,64px,64px,0px);

			visibility: hidden;

			margin: 0px; /*1px;*/
			padding: 0px;

			z-index: 2; /*3;*/
		}
		
		.FontImage32x32Tile {
			position: absolute;
			clip: rect(0px,32px,32px,0px);

			visibility: hidden;

			margin: 0px;
			padding: 0px;

			z-index: 2;
		}		
		
		.ImageRiverTile {
			position: absolute;
/*
			width: 512px;
			height: 512px;

			object-fit: contain;
*/
			clip: rect(0px,130px,320px,0px);

			visibility: hidden;

			margin: 0px; /*1px;*/
			padding: 0px;

			z-index: 2; /*3;*/
		}		


    		/* noted by Mike, 20221105 */
    		.Image32x32TileTarget {
    			position: absolute;

    /* //added by Mike, 20221113; edited by Mike, 20230111*/
    /*
    			width: 128px;
    			height: 128px;
    */
    			width: 256px;
    			height: 256px;

    			object-fit: contain;


    			/* //added by Mike, 20221112; edited by Mike, 20230111 */
    /*
    			clip: rect(0px,32px,32px,0px);
    */
    			clip: rect(0px,64px,64px,0px);

    /* //removed by Mike, 20221112
    			width: 32px;
    			height: 32px;
    */

    /* //edited by Mike, 20221112 */
    /*
    			background-color: #ffffff;
    */
    background-color: transparent;
    border: none;
    			color: #222222;

    			/* //added by Mike, 20221111
    			   //TO-DO: -update: this
    			*/
    			opacity: 0.5;

    			font-weight: bold;
    			font-size: 146%; /*18px;*/

    			text-align: center;
    			line-height: 32px;

    			/*padding-top: 0.1875%;*/ /*6px;*/

    /* //note: with clip rect border is put on entire sprite image */
    /* //removed by Mike, 20221112
    			border: 3px solid #ff0000;
    			border-radius: 3px;
    */
    			margin: 0px; /*1px;*/
    			padding: 0px;
    			z-index: 4;
    		}

    		.Image32x32TileTargetBorder {
    			position: absolute;
    /*
    edited by Mike, 20230111
    			width: 27px;
    			height: 27px;
    */
    			width: 58px;
    			height: 58px;

    			background-color: transparent;
    			color: #222222;

    			font-weight: bold;
    			font-size: 146%; /*18px;*/

    			text-align: center;
    			line-height: 32px;

    			border: 3px dashed #ff0000;
    			border-radius: 3px;

    			visibility: hidden;

    			margin: 0px;
    			padding: 0px;
    			z-index: 4;
    		}

    		.Image32x32TileSpaceBorder {
    			position: absolute;

    /*
    edited by Mike, 20230111
    			width: 27px;
    			height: 27px;
    */
    			width: 58px;
    			height: 58px;

    			background-color: transparent; /*#ffffff;*/

    			color: #222222;

    			font-weight: bold;
    			font-size: 146%; /*18px;*/

    			text-align: center;
    			line-height: 32px;

    			border: 3px dashed #00ff00; /*#ffffff*/
    			border-radius: 3px;

    			visibility: hidden;

    			margin: 0px;
    			padding: 0px;
    			z-index: 4;
    		}


    		.Image32x32TileSpaceTarget {
    			position: absolute;

    /*
    edited by Mike, 20230111
    			width: 27px;
    			height: 27px;
    */
    			width: 58px;
    			height: 58px;

    			background-color: #000000; /*#ffffff;*/
    			color: #222222;

    			text-align: center;
    			line-height: 32px;

    			border: 3px solid #ffffff; /*#ff0000;*/
    			border-radius: 3px;

    			margin: 0px;
    			padding: 0px;
    			z-index: 5;
    		}

    		/* added by Mike, 20221105 */
    		.Image32x32TileSpace {
    			position: absolute;

    /* //added by Mike, 20221113; edited by Mike, 20230111*/
    /*
    			width: 128px;
    			height: 128px;
    */
    			width: 256px;
    			height: 256px;
    			object-fit: contain;

    			/* //added by Mike, 20221112; edited by Mike, 20230111 */
    /*
    			clip: rect(0px,32px,32px,0px);
    */
    			clip: rect(0px,64px,64px,0px);


    /* //removed by Mike, 20221112
    			width: 32px;
    			height: 32px;
    */

    /* //edited by Mike, 20221112 */
    /*
    			background-color: #222222;
    */
    background-color: transparent;
    border: none;
    			color: #222222;

    			text-align: center;
    			line-height: 32px;

    			/*padding-top: 0.1875%;*/ /*6px;*/

    /* //note: with clip rect border is put on entire sprite image */
    /* //removed by Mike, 20221112
    			border: 3px solid #ff0000;
    			border-radius: 3px;
    */
    			margin: 0px; /*1px;*/
    			padding: 0px;

    			z-index: 3;
    		}


			/*added by Mike, 20231111 */
			div.DivTextStatus
			{
				position: absolute;
				background-color: transparent;

				color: #eeeeee;

				width: 360px;

				font-size: 24px; /*28; 16px;*/
				font-weight: bold;

				padding: 20px;
				padding-top: 20px;

				visibility: hidden;
				
				float: left;

				/* added by Mike, 20230128;
					put above tile images */
				z-index: 90; /*4;*/
			}

			div.DivTextStory
			{
				position: absolute;
				background-color: transparent;

				color: #eeeeee;

				width: 420px;

				font-size: 24px; /*28; 16px;*/
				font-weight: bold;

				padding: 20px;
				padding-top: 20px;

				visibility: hidden;
				
				float: left;

				/* added by Mike, 20230128;
					put above tile images */
				z-index: 90; /*4;*/
			}

			div.DivTextStatusBackground
			{
				position: absolute;

				background-color: #00000099;
				border: 3px solid #ffffff;				
				border-radius: 4px;

				font-size: 30px; /*16px;*/
				font-weight: bold;

				padding: 10px;
				
				width: 120px; 
				height: 120px; 

				visibility: hidden;

				/* added by Mike, 20230128;
					put above tile images */
				z-index: 80; /*4;*/
			}

			
			div.DivStepCountStatusShadow
			{
				position: absolute;
/*
				background-color: #000000aa;
*/
				/*color: #ffffff;*/ /* white */

				color: #6d4e22; /* brown */

				/*opacity: 50%;*/

				font-size: 32px;/*42px;*/
				font-weight: bold;

/* //edited by Mike, 20230130
				padding: 10px;
*/
				/* //changed from margin */
				/* //edited by Mike, 20230130
				margin: 10px;
				*/
				padding: 0px;


				visibility: hidden;

				/* put above image tiles;
					below step count button
				*/
				z-index: 90; /*4;*/
			}



			div.DivTextEnter
			{
				position: absolute;
				/*background-color: #000000aa;*/
				color: #000000; /*#ffffff;*/

				/*opacity: 50%;*/

				font-size: 16px;
				font-weight: bold;

				/* //noted by Mike, 20230130 */
				padding: 10px;

				visibility: visible;
			}

			div.DivTextClickStart
			{
				position: absolute;
				/*
				background-color: #4d4d4d;
*/
				
				color: #ffffff; /*#ffffff;*/

				/*opacity: 50%;*/

				font-size: 16px;
				font-weight: bold;

				/* //noted by Mike, 20230130 */
				padding: 10px;
				padding-right: 40px;
				padding-left: 40px;

    			border: 3px solid #ffffff;
    			border-radius: 3px;

				visibility: hidden;
				
				z-index: 99;				
			}

			div.DivTextClickContinue
			{
				position: absolute;

				background-color: #4d4d4d;

				color: #fff484; /*#fff484; #ffffff;*/

				opacity: 80%;

				font-size: 20px;
				font-weight: bold;

				/* //noted by Mike, 20230130 */
				padding: 10px;
				padding-right: 40px;
				padding-left: 40px;
				
    			border: 4px solid #ffffff; /*#4d4d4d;*/
    			border-radius: 3px;


				visibility: hidden;
				
				z-index: 99;				
			}

			div.DivTextScore
			{
				position: absolute;
/*
				background-color: #000000aa;
*/
				color: #6d4e22; /* brown */

				/*color: #ffffff;*/ /* white */

				/*opacity: 50%;*/

				font-size: 32px;/*42px;*/
				font-weight: bold;

/* //edited by Mike, 20230130
				padding: 10px;
*/
				/* //changed from margin */
				/* //edited by Mike, 20230130
				margin: 10px;
				*/
				padding: 0px;

				visibility: hidden;

				/* put above image tiles;
					below step count button
				*/
				z-index: 90; /*4;*/
			}

			div.DivTextTime
			{
				position: absolute;
/*
				background-color: #000000aa;
*/
				color: #ffffff; /* brown; #6d4e22 */

				/*opacity: 50%;*/

				font-size: 32px;/*42px;*/
				font-weight: bold;

/* //edited by Mike, 20230130
				padding: 10px;
*/
				/* //changed from margin */
				/* //edited by Mike, 20230130
				margin: 10px;
				*/
				padding: 0px;

				visibility: hidden;

				/* put above image tiles;
					below step count button
				*/
				z-index: 90; /*4;*/
			}


      audio.myAudio
      {
        width: 416px;
        height: 312px;

        /* added by Mike, 20230115 */
        visibility: hidden;
      }


  </style>

  <script>

var iRowCount=0;
const iRowCountMax=6;//10;
var iColumnCount=0;
const iColumnCountMax=6;//10;
//column, row
var arrayHasVisitedRoom = [[],[],[],[],[],[]];

var bIsGameOver=false;
const iInputDelayAtGameOverCountMax=100;
var iInputDelayAtGameOverCount=0;

var bIsLevelUp=false;
const iInputDelayAtLeveledUpCountMax=100;
var iInputDelayAtLeveledUpCount=0;

const iInputDelayAtStageTransitionCountMax=100;
var iInputDelayAtStageTransitionCount=0;

var bHasHeroGottenSniperShot=false;

var bHasBeatenStage1Boss=false;

var bIsBossBattle=false;

var bIsHeroInRiver=false;
var bHasHeroReachedBottomOfRoomRiver=false;
var bHasHeroReachedTopOfRoomRiver=false;
var bHasPlayedSolvedTune=false;

var bHasShotSniper=false;

var bIsHeroGoingUpOrDown=false;

var bIsMissionDone=false;
var bIsMissionStarted=false;
var bHasViewedMissionIntro=false;
//added by Mike, 20251122
var iCurrMissionIntroPage=0;
var iCurrMissionIntroPageMax=5;//5;


var bIsShowingStage1End=false;
var bIsShowingStage2End=false;

var bIsShowingStage1Start=false;
var bIsShowingStage2Start=false;
var bIsShowingStage3Start=false;



var bIsHeroInTank=false;
var bIsHeroAttacked=false;

var bIsBossMonsterHit=false;
var bIsMiniBossMonsterHit=false;
//var iBossLife=3;

var bIsActionKeyPressed=false;
var bIsActionKeyFireballPressed=false;

var iInputDelayCountMax=100;//1000;//3;
var iInputDelayCount=iInputDelayCountMax;

var bHasViewedHowToPlayGuide=false;
//var bIsStillUsingItchScreen=false;

//added by Mike, 20231111
//reference: https://github.com/usbong/tugon/blob/main/mainLinux.cpp;
//last accessed: 20221125
var bIsExecutingShake=false;
var iDestroyHumanShakeDelayCount=0;
var iDestroyHumanShakeDelayMax=5;

const iShakeOffsetWidthMax=2;
const iShakeOffsetHeightMax=2;

var iShakeOffsetWidth=iShakeOffsetWidthMax;
var iShakeOffsetHeight=iShakeOffsetHeightMax;

const iMonsterShakeOffsetWidthMax=2;
const iMonsterShakeOffsetHeightMax=2;

var iMonsterShakeOffsetWidth=iMonsterShakeOffsetWidthMax;
var iMonsterShakeOffsetHeight=iMonsterShakeOffsetHeightMax;

const iHeroInvincibileCountMax=200;//100;//50;
var iHeroInvincibileCount=iHeroInvincibileCountMax;

//increase this per level-up
var iCurrHeroLifeMaxDefault=10;//15;//20;
var iCurrHeroLifeMax=iCurrHeroLifeMaxDefault;//15;//20;
var iCurrHeroLife=iCurrHeroLifeMax;
var iCurrHeroLifeAnimationDelayCount=0;
var iCurrHeroLifeAnimationDelayCountMax=5;

var iCurrHeroLifeToBeDeducted=0;
var iCurrHeroLifeToBeDeductedAnimation=0;
var iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeMax;

var iCurrHeroLifeAnimationDelayCount=0;
var iCurrHeroLifeAnimationDelayCountMax=5;
var iCurrHeroProjectileLifeAnimationDelayCount=0;
var iCurrHeroProjectileLifeAnimationDelayCountMax=6;

var iCurrHeroLifeToBeDeductedAnimationDelayCount=0;
var iCurrHeroLifeToBeDeductedAnimationDelayCountMax=5;

//added by Mike, 20251124
var iCurrHeroLevel=0;


//boss
var iCurrBossLifeMaxDefault=99;
var iCurrBossLifeMax=iCurrBossLifeMaxDefault;
var iCurrBossLife=iCurrBossLifeMax;
var iCurrBossLifeAnimationDelayCount=0;
var iCurrBossLifeAnimationDelayCountMax=5;

var iCurrBossLifeToBeDeducted=0;
var iCurrBossLifeToBeDeductedAnimation=0;
var iCurrBossLifeToBeDeductedAnimationMain=iCurrBossLifeMax;

var iCurrBossLifeAnimationDelayCount=0;
var iCurrBossLifeAnimationDelayCountMax=5;
var iCurrBossProjectileLifeAnimationDelayCount=0;
var iCurrBossProjectileLifeAnimationDelayCountMax=6;

var iCurrBossLifeToBeDeductedAnimationDelayCount=0;
var iCurrBossLifeToBeDeductedAnimationDelayCountMax=5;




var iCurrHeroManaMaxDefault=10;//15;//20;
var iCurrHeroManaMax=iCurrHeroManaMaxDefault;
var iCurrHeroMana=iCurrHeroManaMax;

var iCurrHeroManaToBeDeducted=0;
var iCurrHeroManaToBeDeductedAnimation=0;
var iCurrHeroManaToBeDeductedAnimationMain=0;

//enable recharge right away; when battle starts
const iCurrHeroManaAnimationDelayCountMax=5;
var iCurrHeroManaAnimationDelayCount=iCurrHeroManaAnimationDelayCountMax;
const iCurrHeroProjectileManaAnimationDelayCountMax=6;//5;//125;//5;
var iCurrHeroProjectileManaAnimationDelayCount=iCurrHeroProjectileManaAnimationDelayCountMax;

var iCurrHeroManaToBeDeductedAnimationDelayCount=0;
var iCurrHeroManaToBeDeductedAnimationDelayCountMax=5;//5;//125;//5;

const iCurrHeroManaRechargeDelayCountMax=20;
var iCurrHeroManaRechargeDelayCount=iCurrHeroManaRechargeDelayCountMax;


//added by Mike, 20251108
var bIsHeroWalking=false;
var bHasHeroChangedFacingLeftOrRight=false;

var iCurrBossMonsterLifeMax=20;
var iCurrBossMonsterLife=iCurrBossMonsterLifeMax;
var iCurrBossMonsterLifeAnimationDelayCount=0;
var iCurrBossMonsterLifeAnimationDelayCountMax=5;

var iCurrHeroDeathCount=0;
var iCurrPearlCount=0;
var iCurrPearlCountMax=6;
var iCurrMonsterDeathCount=0;

const DEFAULT_DEATH_COUNT_VAL=1;
const BOSS_DEATH_COUNT_VAL=10;

const iMonsterDeathCountToLevel1Min=8;
const iMonsterDeathCountToLevel2Min=24;


/*
const sAudioEffectActionCannonFire ="assets/audio/usbongGameOff2023AudioEffectsCannon.mp3";
const sAudioBGM="assets/audio/usbongGameOff2023BGM.mp3";
*/

const sAudioEffectActionCannonFire ="assets/audio/usbongGameOff2023AudioEffectsCannon.mp3";

const sAudioEffectActionSwordSlice ="assets/audio/usbongGameOff2025SwordSlice.mp3";

//OK; short
//const sAudioEffectActionSwordSlice ="assets/audio/usbongGameOff2025Hit.mp3";

//echoes;
const sAudioEffectActionSwordOut ="assets/audio/usbongGameOff2025SwordOut.mp3";


const sAudioEffectGrassCut ="assets/audio/usbongGameOff2023TapLoudEdited.mp3";

const sAudioBGM="assets/audio/usbongGameOff2024CaveBGMV22.mp3";

const sAudioBGMPart2="assets/audio/usbongGameOff2024CaveBadBGMV10.mp3";

const sAudioBGMPart3="assets/audio/usbongGameOff2024CaveFantasyBGM.mp3";

const sAudioEffectSolved ="assets/audio/UsbongGameOff2024TuneSolved.mp3";

const sAudioEffectShortLightningBlast ="assets/audio/usbongGameOff2025ShortLightningBlast.mp3";

const sAudioEffectDogWolfHowl ="assets/audio/usbongGameOff2025DogWolfHowl.mp3";

const sAudioEffectBossScreech ="assets/audio/usbongGameOff2024Screech.mp3";

const sAudioEffectWater ="assets/audio/usbongGameOff2024WaterOKV2.mp3";

var myAudio;
var myAudioPart2;
var myAudioPart3;
var myAudioBossScreech;
var myAudioWater;

/*
var iAnimationCount=-1;//0; start at -1
var iAnimationCountMax=5;
var iAnimationDelayCount=10; //0
var iAnimationDelayCountMax=10;
*/

var iTextTriangleAnimationCount=0;
const iTextTriangleAnimationCountMax=5;

var iRiverAnimationCount=-1;//0; start at -1
var iRiverAnimationCountMax=5;
var iRiverAnimationDelayCount=10; //bat; //0
var iRiverAnimationDelayCountMax=6;
var iRiverImagePosX=0;
var iRiverImagePosY=0;
var iRiverImageFrameWidth=0;
var iRiverImageFrameHeight=0;

//added by Mike, 20231127
var iBatMonsterAnimationCount=-1;//0; start at -1
var iBatMonsterAnimationCountMax=2;
var iBatMonsterAnimationDelayCount=10; //bat; //0
var iBatMonsterAnimationDelayCountMax=6;
var iBatMonsterAttackAnimationCount=0;
const iBatMonsterAttackAnimationCountMax=2;

//added by Mike, 20251104
var iSkelMonsterAnimationCount=-1;//0; start at -1
const iSkelMonsterAnimationCountMax=5;
var iSkelMonsterAnimationDelayCount=10; //bat; //0
const iSkelMonsterAnimationDelayCountMax=5;//6;

var iSkelMonsterAttackAnimationCount=0;//-1;//0; start at -1
const iSkelMonsterAttackAnimationCountMax=4;

//added by Mike, 20251123
var iDemonMonsterAnimationCount=-1;//0; start at -1
const iDemonMonsterAnimationCountMax=4;//5;
var iDemonMonsterAnimationDelayCount=10; //bat; //0
const iDemonMonsterAnimationDelayCountMax=5;//6;

var iDemonMonsterAttackAnimationCount=0;//-1;//0; start at -1
const iDemonMonsterAttackAnimationCountMax=4;


var iBossMonsterAnimationCount=-1;//0; start at -1
var iBossMonsterAnimationCountMax=5;
var iBossMonsterAnimationDelayCount=10; //0
var iBossMonsterAnimationDelayCountMax=10;

var iBossMonsterHitAnimationCount=-1;//0; start at -1
var iBossMonsterHitAnimationCountMax=5;

var iBossMonsterMovementDelayCount=-1;//0; start at -1
const iBossMonsterMovementDelayCountMax=5;

var iMiniBossMonsterMovementDelayCount=-1;//0; start at -1
const iMiniBossMonsterMovementDelayCountMax=500;

//added by Mike, 20241115
var iMiniMapAnimationCount=-1;//0; start at -1
var iMiniMapAnimationCountMax=5;
var iMiniMapAnimationDelayCount=0; //0
var iMiniMapAnimationDelayCountMax=5;

//added by Mike, 20231119
var iExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iExplosionEffectAnimationCountMax=5;
var iExplosionEffectAnimationDelayCount=0;
var iExplosionEffectAnimationDelayCountMax=2;//4;//1;

var iFireballExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iFireballExplosionEffectAnimationCountMax=5;
var iFireballExplosionEffectAnimationDelayCount=0;
var iFireballExplosionEffectAnimationDelayCountMax=2;//4;//1;

var iGrassCutEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iGrassCutEffectAnimationCountMax=5;
var iGrassCutEffectAnimationDelayCount=0;
var iGrassCutEffectAnimationDelayCountMax=4;//1;

var iPearlAnimationCount=-1; //0; //due to immediately +1 in execution;
var iPearlAnimationCountMax=5;
var iPearlAnimationDelayCount=0;
var iPearlAnimationDelayCountMax=2;
var iPearlInvincibileCount=0;
const iPearlInvincibileCountMax=10;

var iKeyAnimationCount=-1; //0; //due to immediately +1 in execution;
var iKeyAnimationCountMax=5;
var iKeyAnimationDelayCount=0;
var iKeyAnimationDelayCountMax=2;
var iKeyInvincibileCount=0;
const iKeyInvincibileCountMax=10;

var iAmuletInvincibileCount=0;
const iAmuletInvincibileCountMax=10;

var bHasObtainedPearlAtRoom42=false;
var bHasObtainedPearlAtRoom41=false;
var bHasObtainedPearlAtRoom33=false;
var bHasObtainedPearlAtRoom43=false;
var bHasObtainedPearlAtRoom22=false;
//var bHasObtainedPearlAtRoom11=false;
var bHasObtainedKeyAtRoom1=false;
var bHasUsedKeyAtRoom11=false;
var bHasObtainedAmuletAtRoom32=false; //Pendant; Agimat
var bHasObtainedPearlAtRoom12=false;

var dElapsedTimeInSeconds=0;

var iPearlStatusAnimationCount=-1; //0; //due to immediately +1 in execution;
var iPearlStatusAnimationCountMax=5;
var iPearlStatusAnimationDelayCount=0;
var iPearlStatusAnimationDelayCountMax=2;

var iSniperShotStatusAnimationCount=-1; //0; //due to immediately +1 in execution;
var iSniperShotStatusAnimationCountMax=5;
var iSniperShotStatusAnimationDelayCount=0;
var iSniperShotStatusAnimationDelayCountMax=30;//40;


var iAmuletStatusAnimationCount=-1; //0; //due to immediately +1 in execution;
var iAmuletStatusAnimationCountMax=5;
var iAmuletStatusAnimationDelayCount=0;
var iAmuletStatusAnimationDelayCountMax=2;

var iHeroFireballProjectileAnimationCount=-1; //0; //due to immediately +1 in execution;
var iHeroFireballProjectileAnimationCountMax=5;
var iHeroFireballProjectileAnimationDelayCount=0;
var iHeroFireballProjectileAnimationDelayCountMax=2;

var iHeroFireballProjectileHoldAnimationCount=-1; //0; //due to immediately +1 in execution;
var iHeroFireballProjectileHoldAnimationCountMax=5;
var iHeroFireballProjectileHoldAnimationDelayCount=0;
var iHeroFireballProjectileHoldAnimationDelayCountMax=1;//2;

var iKeyStatusAnimationCount=-1; //0; //due to immediately +1 in execution;
var iKeyStatusAnimationCountMax=5;
var iKeyStatusAnimationDelayCount=0;
var iKeyStatusAnimationDelayCountMax=2;

//added by Mike, 20231127
var iMonsterExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iMonsterExplosionEffectAnimationCountMax=5;
var iMonsterExplosionEffectAnimationDelayCount=0;
//edited by Mike, 20231128
var iMonsterExplosionEffectAnimationDelayCountMax=2;//4;//1;

var iMonsterDeathAnimationCount=-1; //0; //due to immediately +1 in execution;
const iMonsterDeathAnimationCountMax=10;//4;
var iMonsterDeathAnimationDelayCount=0;
const iMonsterDeathAnimationDelayCountMax=0;//4;


//added by Mike, 20241105
var iDustEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iDustEffectAnimationCountMax=5;
var iDustEffectAnimationDelayCount=0;
var iDustEffectAnimationDelayCountMax=4;//1;

//added by Mike, 20251115
var iSnowEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
const iSnowEffectAnimationCountMax=8; //4
var iSnowEffectAnimationDelayCount=0;
const iSnowEffectAnimationDelayCountMax=10;//1;

var iCurrSnowEffectCount=0;
const iCurrSnowEffectCountMax=16;

var iCurrParticleEffectCount=0;
const iCurrParticleEffectCountMax=1;//10;

var iCurrParticleEffectAnimationCycleCount=0;
const iCurrParticleEffectAnimationCycleCountMax=1000;

var iInitialParticleEffectPosX=0;
var iInitialParticleEffectPosY=0;
var iCurrParticleEffectOpacity=1;


const iSpiralStrokeEffectAnimationCountMax=10;
var iSpiralStrokeEffectAnimationCount=0;

var iSpiralStrokeEffectAnimationDelayCount=0;
const iSpiralStrokeEffectAnimationDelayCountMax=4;
var iSpiralStrokeEffectPosX=0;
var iSpiralStrokeEffectPosY=0;

const iSpiralStrokeEffectCanvasContextRadius=30;



var iInitFireballEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iInitFireballEffectAnimationCountMax=5;
var iInitFireballEffectAnimationDelayCount=0;
var iInitFireballEffectAnimationDelayCountMax=2;//4;//1;

//added by Mike, 20241113
var iHeroAttackEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
var iHeroAttackEffectAnimationCountMax=5;
var iHeroAttackEffectAnimationDelayCount=0;
var iHeroAttackEffectAnimationDelayCountMax=2;//2;//1;

//added by Mike, 20251113
var iWalkOnSnowEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
const iWalkOnSnowEffectAnimationCountMax=1;//3;
var iWalkOnSnowEffectAnimationDelayCount=0;
var iWalkOnSnowEffectAnimationDelayCountMax=2;//2;//1;

//var arrayWalkOnSnowEffect=[[],[],[],[]];
var arrayWalkOnSnowEffect=[[]];

var arrayWalkOnSnowEffectCount=0;
const arrayWalkOnSnowEffectCountMax=1;//4;


var iMonsterBossAttackDelayCount=0;
var iMonsterBossAttackDelayCountMax=120;

//edited by Mike, 20251104
var iImageExplosionEffectAnimationWidth=64;//32;//64;
var iImageExplosionEffectAnimationHeight=64;//32;//64;

var iImageFireballExplosionEffectAnimationWidth=32;//64;
var iImageFireballExplosionEffectAnimationHeight=32;//64;

var iImageGrassCutEffectAnimationWidth=32;//64;
var iImageGrassCutEffectAnimationHeight=32;//64;

var iImageDustEffectAnimationWidth=32;
var iImageDustEffectAnimationHeight=32;

var iImageHeroAttackEffectAnimationWidth=32;
var iImageHeroAttackEffectAnimationHeight=32;

const iImageSnowEffectAnimationWidth=32;
const iImageSnowEffectAnimationHeight=32;

const iImageParticleEffectAnimationWidth=32;
const iImageParticleEffectAnimationHeight=32;

var iImageWalkOnSnowEffectAnimationWidth=32;
var iImageWalkOnSnowEffectAnimationHeight=32;

var iTransitionRotate=0;
var iTransitionScale=0;//1;
var iTransitionDelayCount=0;
var iTransitionDelayCountMax=20;

var iMouseAnimationCount=-1; //0; //due to immediately +1 in execution;
var iMouseAnimationCountMax=5;
var iMouseAnimationDelayCount=0;
var iMouseAnimationDelayCountMax=2;//1;

//added by Mike, 20241105
var iMouseClickStartTime=0;
var iMouseClickMaxElapsedTime=250; //1/4 second
var bIsHeroDash=false;
var bHasHeroShotFireball=false;
var bHasHeroShotSniper=false;


var iHeroAnimationCount=0;//-1; //0; //due to immediately +1 in execution;
var iHeroAnimationCountMax=5;
var iHeroAnimationDelayCount=0;
const iHeroAnimationDelayCountMax=8;//10;//5;//2;//1; //TODO: -add: more dust effect if target walking distance is far

var iHeroAttackAnimationCount=0;//-1; //0; //due to immediately +1 in execution;
var iHeroAttackAnimationCountMax=3;
var iHeroAttackAnimationDelayCount=0;
var iHeroAttackAnimationDelayCountMax=5;//2;//1; //TODO: -add: more dust effect if target walking distance 

//added by Mike, 20251106
var iHeroAttackComboCount=0;

/*
var iScore=10000;//0;
var iTargetScore=10000;//0;
var bIsIncreasingScore=false;//true;

//added by Mike, 20231125
var iTextScoreDivWidthOffset=5;
var iTextScoreDivWidth;
var iTextScoreShadowDivWidthOffset=1;
*/

//added by Mike, 20241114
//font size at 32px; 00:00:00.length is 8
var iTextTimeDivWidthOffset=16*8; //5;
var iTextTimeDivWidth;
var iTextTimeShadowDivWidthOffset=1;
var iStartTimeInMilliseconds=0;

//added by Mike, 20231127
var iCurrSnowFlakeCount=0;
var iCurrSnowFlakeCountMax=20;
var iCurrSnowFlakeCountPosX=0;
var iCurrSnowFlakeCountPosY=0;

//note: acceleration
//min 2; not 1
//edited by Mike, 20251102
var mainImageTileProjectileStepYMaxDefault=3;//3;//5;//4;//3;
var mainImageTileProjectileStepXMaxDefault=3;//5;//4;//3;

var mainImageTileProjectileVelocityYDefault=mainImageTileProjectileStepYMaxDefault-1;
var mainImageTileProjectileVelocityXDefault=mainImageTileProjectileStepXMaxDefault-1;
/*
var mainImageTileProjectileStepYMinDefault=mainImageTileProjectileVelocityYDefault;
var mainImageTileProjectileStepXMinDefault=mainImageTileProjectileVelocityXDefault;

var mainImageTileProjectileStepYDefault=mainImageTileProjectileStepYMinDefault;
var mainImageTileProjectileStepXDefault=mainImageTileProjectileStepXMinDefault;
*/
var mainImageTileProjectileStepYMax=mainImageTileProjectileStepYMaxDefault;
var mainImageTileProjectileStepXMax=mainImageTileProjectileStepXMaxDefault;

var mainImageTileProjectileVelocityY=mainImageTileProjectileVelocityYDefault;
var mainImageTileProjectileVelocityX=mainImageTileProjectileVelocityXDefault;

var mainImageTileProjectileStepYMin=mainImageTileProjectileVelocityY;
var mainImageTileProjectileStepXMin=mainImageTileProjectileVelocityX;

var mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;//20;
var mainImageTileProjectileStepX=mainImageTileProjectileStepYMin;//20;

var mainImageTileProjectileStepDestinationY=0;
var mainImageTileProjectileStepDestinationX=0;

//## --
//note: acceleration
//min 2; not 1
//can be sped-up;
const mainImageTileFireballProjectileStepYMax=10;//40;//10;//6;//4;//20;//20;
const mainImageTileFireballProjectileStepXMax=10;//40;//10;//6;//4;//20;//20;

var mainImageTileFireballProjectileVelocityY=mainImageTileFireballProjectileStepYMax;//2;//4;//20;//4;//1;
var mainImageTileFireballProjectileVelocityX=mainImageTileFireballProjectileStepXMax;//2;//4;//20;//4;//1;

var mainImageTileFireballProjectileStepYMin=2;//4;//12; //mainImageTileFireballProjectileVelocityY
var mainImageTileFireballProjectileStepXMin=2;//4;//12; //mainImageTileFireballProjectileVelocityX

var mainImageTileFireballProjectileStepY=mainImageTileFireballProjectileStepYMax;//Min;//20;
var mainImageTileFireballProjectileStepX=mainImageTileFireballProjectileStepYMax;//Min; //20;

var mainImageTileFireballProjectileStepDestinationY=0;
var mainImageTileFireballProjectileStepDestinationX=0;

var bossMonsterImageTilePosX=500;
var bossMonsterImageTilePosY=10;

var iImageFrameWidth=32;// 64; //0;
var iImageFrameHeight=32;// 64;

var iImageFrameWidthLarge=64;
var iImageFrameHeightLarge=64;

var iImageFrameWidthLargeBoss=128;
var iImageFrameHeightLargeBoss=128;

var iImageFrameWidthDefault=32;
var iImageFrameHeightDefault=32;

//added by Mike, 20231121
var iMouseInputImageWidth=64;
var iMouseInputImageHeight=64;

//edited by Mike, 20251112
//TODO: -update: this based on monster; 
const iMonsterAttackDamageDefault=1;
const iMonsterAttackDamageBoss=2;
const iMonsterAttackDamageSkel=iMonsterAttackDamageDefault;
const iMonsterAttackDamageSkelBoss=2;
const iMonsterAttackDamageWraith=iMonsterAttackDamageDefault;
const iMonsterAttackDamageBat=iMonsterAttackDamageDefault;

const iSniperShotAttackDamage=10;
const iFireballAttackDamage=1;


var iCurrTextCharacterCount=0;
var iCurrTextCharacterCountMax=0;
var sCurrText="";
var sText="";
var iCurrTextCharacterCountEffectDelayCount=0;
const iCurrTextCharacterCountEffectDelayCountMax=5;
var iTextStatusOffsetY=0;

//added by Mike, 20231128
var iTitlePressStartEffectDelayCount=0;
var iTitlePressStartEffectDelayCountMax=5;

var iHowToPlayGuideImageFrame2DelayCount=0;
var iHowToPlayGuideImageFrame2DelayCountMax=8;

var iTitleImageFrame2DelayCount=0;
const iTitleImageFrame2DelayCountMax=40;


//added by Mike, 20231119; from 20221121
var iDelayAnimationCountEnter=0;
const iDelayAnimationCountEnterMax=10;

//added by Mike, 20231121
var bHasViewedTitle=false;
var bHasPressedStart=false;

var iMonsterBossTileWidth=128;
var iMonsterBossTileHeight=128;

var iMainImageTileStepAngle=0;

var newMainImageTileProjectilePosX=0;
var newMainImageTileProjectilePosY=0;
var bHasFired=false;

var bHasHeroHitMonster=false;

var iMousePointPosX=0;
var iMousePointPosY=0;

const iKEY_W = 0;
const iKEY_S = 1;
const iKEY_A = 2;
const iKEY_D = 3;

const iTotalKeyCount = 4; //8; //12;
const iDirectionTotalKeyCount = 4; //8

//added by Mike, 20231125
//https://www.w3schools.com/js/js_arrays.asp; last accessed: 20220823
const arrayKeyPressed = [];
for (iCount=0; iCount<iTotalKeyCount; iCount++) {
	arrayKeyPressed[iCount]=false;
}

//added by Mike, 20251109
var arrayActors=[];
var iArrayActorsCount=0;
var iZIndexDefault=4;
var actorLastAttackedByHero;

/*
var iFacingDirection=0;

const iFACING_DOWN=0;
const iFACING_UP=1;
const iFACING_LEFT=2;
const iFACING_RIGHT=3;
*/

//edited by Mike, 20221129
//1000/60=16.66; 60 frames per second
//1000/30=33.33; 30 frames
const fFramesPerSecondDefault=16.66;
//const fFramesPerSecondDefault=33.33;
var fFramesPerSecond=fFramesPerSecondDefault;
var iCurrentIntervalId=-1;

var mainImageTilePosX=0;
var mainImageTilePosY=0;
var mainImageTileStepX=2;//0; //2;
var mainImageTileStepY=2;//0; //2;

var mainImageTileProjectilePosX=0;
var mainImageTileProjectilePosY=0;

var mainImageTileFireballProjectilePosX=0;
var mainImageTileFireballProjectilePosY=0;

var mainImageTileSniperShotPosX=0;
var mainImageTileSniperShotPosY=0;

	
var bHasReachedDestinationY=false;
var bHasReachedDestinationX=false;

var bHasFireballReachedDestinationY=false;
var bHasFireballReachedDestinationX=false;
	
var iPrevMouseXPos=-1;
var iPrevMouseYPos=-1;

//added by Mike, 20251107
var bIsHeroFacingLeftOrRight=true;//false;	
var bIsHeroFacingLeft=false;//true;
var bIsHeroFacingLeftPrev=false;

//added by Mike, 20251102
var bIsHeroFacingUpOrDown=false;
var bIsHeroFacingUp=false;

	const HP_STAT_ID=0;
	const STAMINA_STAT_ID=1;
	const SPEED_STAT_ID=2;

	const WALKING_STATE=0;
	const ATTACKING_STATE=1;
	const HIT_STATE=2;
	const DYING_STATE=3;
	const DEATH_STATE=4;
	const IDLE_STATE=5;

	//added by Mike, 20241111
	var batMonsterImageTilePosX=0;
	var batMonsterImageTilePosY=0;
	var batMonsterTileStepX=2;
	var batMonsterTileStepY=2;
	var batMonsterTileStepDelay=0;	
	var batMonsterTileStepDelayMax=5;	
	var batMonsterTileAttackDelay=0;	
	const batMonsterTileAttackDelayMax=200;//15;	
	var isBatMonsterTileActive=false;
	var iBatMonsterHP=1;//3;
	var currBatMonsterTileState=WALKING_STATE;

	//added by Mike, 20251104
	var skelMonsterImageTilePosX=0;
	var skelMonsterImageTilePosY=0;
	var skelMonsterTileStepX=2;
	var skelMonsterTileStepY=2;
	var skelMonsterTileStepDelay=0;	
	var skelMonsterTileStepDelayMax=15;//10;//0;//1;	
	var skelMonsterTileAttackDelay=0;	
	const skelMonsterTileAttackDelayMax=200;//15;	
	var isSkelMonsterTileActive=false;
	var iSkelMonsterHP=99;//3;
	var iSkelMonsterHP=iSkelMonsterHP;
	var currSkelMonsterTileState=WALKING_STATE;

	//added by Mike, 20251123
	var demonMonsterImageTilePosX=0;
	var demonMonsterImageTilePosY=0;
	var demonMonsterTileStepX=2;
	var demonMonsterTileStepY=2;
	var demonMonsterTileStepDelay=0;	
	var demonMonsterTileStepDelayMax=15;//10;//0;//1;	
	var demonMonsterTileAttackDelay=0;	
	const demonMonsterTileAttackDelayMax=200;//15;	
	var isDemonMonsterTileActive=false;
	var iDemonMonsterHP=99;//3;
	var iDemonMonsterHP=iSkelMonsterHP;
	var currDemonMonsterTileState=WALKING_STATE;


	var miniBossMonsterImageTilePosX=0;
	var miniBossMonsterImageTilePosY=0;
	var miniBossMonsterTileStepX=2;
	var miniBossMonsterTileStepY=2;
	var miniBossMonsterTileStepDelay=0;	
	var miniBossMonsterTileStepDelayMax=5;	
	var isMiniBossMonsterTileActive=false;	
	
	var bossMonsterImageTilePosX=0;
	var bossMonsterImageTilePosY=0;
	var bossMonsterTileStepX=2;
	var bossMonsterTileStepY=2;
	var bossMonsterTileStepDelay=0;	
	var bossMonsterTileStepDelayMax=5;	
	var isBossMonsterTileActive=false;	

/*	
	var snakeMonsterImageTilePosX=0;
	var snakeMonsterImageTilePosY=0;
	var snakeMonsterTileStepX=2;
	var snakeMonsterTileStepY=2;
	var snakeMonsterTileStepDelay=0;	
	var snakeMonsterTileStepDelayMax=5;	
	var isSnakeMonsterTileActive=false;
*/
	//added by Mike, 20251108
	var arrayWraithMonsterCountId = [[],[],[],[]];
	const iWraithMonsterCountMax=4;//2;

	var arrayRunningWraithMonsterCountId = [[],[],[],[]];
	const iRunningWraithMonsterCountMax=4;

	var arrayBombMonsterCountId = [[],[]];
	const iBombMonsterCountMax=2;


	var arraySnakeMonsterCountId = [[],[]];
	var iSnakeMonsterCountMax = 2;
	
	var arrayGrassMonsterCountId = [[],[],[],[]];
	var iGrassMonsterCountMax = 4;
/*
	var arraySlimeMonsterCountId = [[],[],[],[],[],[]];
	var iSlimeMonsterCountMax = 6;
*/
	var arraySlimeMonsterCountId = [[],[],[]];
	var iSlimeMonsterCountMax = 3;

//	var arrayMiniBossMonsterCountId = [[],[],[],[],[],[]]; //[],[],[],[],[],[]
//	var iMiniBossMonsterCountMax = 6;///12;//6;

	var arrayMiniBossMonsterCountId = [[],[],[],[],[],[],[],[],[],[],[],[]]; //[],[],[],[],[],[]
	const iMiniBossMonsterCountMax = 12;//6;

	
	const MONSTER_OBJECT=0;
	const MONSTER_IS_ACTIVE=1;	
	const MONSTER_POSX=2;
	const MONSTER_POSY=3;
	const MONSTER_STEPX=4;
	const MONSTER_STEPY=5;

	const MONSTER_ANIMATION_DELAY_COUNT=6;
	const MONSTER_ANIMATION_DELAY_COUNT_MAX=7;
	const MONSTER_ANIMATION_COUNT=8;
	const MONSTER_ANIMATION_COUNT_MAX=9;
	const MONSTER_STEP_DELAY=10;
	const MONSTER_STEP_DELAY_MAX=11;

	const MONSTER_CURRENT_STATE=12;
	const MONSTER_CURRENT_HP=13;
	const MONSTER_IS_IN_RIVER=14;

	const MONSTER_ATTACK_DELAY=15;
	const MONSTER_ATTACK_DELAY_MAX=16;
	const MONSTER_ATTACK_ANIMATION_COUNT=17;
	const MONSTER_ATTACK_ANIMATION_COUNT_MAX=18;

	const MONSTER_TYPE=19;

	const MONSTER_TYPE_VAL_SKEL=1;
	const MONSTER_TYPE_VAL_WRAITH=2;
	const MONSTER_TYPE_VAL_RUNNING_WRAITH=3;
	const MONSTER_TYPE_VAL_BOMB=4;

	const WRAITH_MONSTER_HP_MAX=1;//2;//3;
	const RUNNING_WRAITH_MONSTER_HP_MAX=1;
	const BOMB_MONSTER_HP_MAX=1;
	
	var iCurrMapLocation=51;//75;//51;//63; //53;//12;//0;		
	var hasInitMapLocation=false;	
		
	var iStageMaxWidth=640;
	var iStageMaxHeight=360;

	var iVerticalOffset=0;

	//note: for INNER SCREEN
	//edited by Mike, 20231126; itch.io; screen.width appears to cause incorrect output;
	//due to itch.io window top-left at 0;
	var iHorizontalOffset=0;
	var iVerticalOffsetInnerScreen=0;
	
	//edited by Mike, 20251102
	//var iInnerHorizontalOffset=(640-iStageMaxHeight)/2;		
	var iInnerHorizontalOffset=0;//(iStageMaxWidth-iStageMaxHeight)/4;

	var iInnerVerticalOffset=iImageFrameHeight/4;//2;


	function executeStageTransition(iInputCurrMapLocation) {
		//OK;
		mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;

		//added by Mike, 20251125
		mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeightLarge/2;

		resetProjectile();	

		//iInputCurrMapLocation=61;
		iCurrMapLocation=iInputCurrMapLocation;

/*		
		if (iInputCurrMapLocation==61) {
			bIsShowingStage1End=true;
			//bIsShowingStage2Start=true;
		}
*/
		
		hasInitMapLocation=false;

		verifyIfHeroLeveledUp();
		
		//bIsShowingStage1End=true;
		iInputDelayAtStageTransitionCount=0;
		
		setAllActorsToHidden();
	}

	function setAllActorsToHidden() {
		var dustEffectImage = document.getElementById("dustEffectImageId");
		dustEffectImage.style.visibility="hidden";

		var explosionEffectImage = document.getElementById("explosionEffectImageId");
		explosionEffectImage.style.visibility="hidden";

		var explosionEffectMonsterImage = document.getElementById("explosionEffectToMonsterImageId");
		explosionEffectMonsterImage.style.visibility="hidden";
/*
		iExplosionEffectAnimationDelayCount=iExplosionEffectAnimationDelayCountMax;
		iExplosionEffectAnimationCount=-1; //0;
		
		iMonsterExplosionEffectAnimationDelayCount=iMonsterExplosionEffectAnimationDelayCountMax;
		iMonsterExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
*/		
		
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			arrayActors[iCount].style.visibility="hidden";
		}
					
		for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
			for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
				var snowEffectImage = document.getElementById("snowEffectImageId"+iCount);
				snowEffectImage.style.visibility="hidden";
			}
		}		
	}

	//added by Mike, 20251103
	//reminder: font512x512Rescaled.png; 32x32px; width x height;  
	function drawChar(iInputX, iInputY, cInput, fontImage) { 
/*
		let cFontChar=cInput;
		let iFontCharInAscii=cFontChar.charCodeAt(0);
*/		
		let iFontCharInAscii=cInput; //already in ASCII
		
		let iNumber=iFontCharInAscii-32;
		let iRow=Math.floor(iNumber/12); //cast to int
		let iColumn=(iNumber-iRow*12);

/*				
		var fontImage = document.getElementById("fontImageId");
*/		
		fontImage.style.visibility="visible";

		const iFrameWidth=32;
		const iFrameHeight=32;
/*	
		alert("iRow: "+iRow);
		alert("iColumn: "+iColumn);
*/
		const iFrameXOffset=0;

		fontImage.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidth*iColumn + "px -" + iImageFrameHeight*iRow + "px";
		
		fontImage.style.left=iInputX+"px"; 
		fontImage.style.top=iInputY+"px"; 
	}
  
	function drawString(iInputX, iInputY, sInput) {
	  const iFrameWidth=32;
	  let iStringInputLength=sInput.length;
/*
	  var fontImage0 = document.getElementById("fontImageId0");
	  var fontImage1 = document.getElementById("fontImageId1");
	  var fontImage2 = document.getElementById("fontImageId2");
	  var fontImage3 = document.getElementById("fontImageId3");
	  var fontImage4 = document.getElementById("fontImageId4");
	  var fontImage5 = document.getElementById("fontImageId5");
*/
	  var fontImageArray = [];
	  const iFontImageCountMax=6;
	  
	  for (iCount=0; iCount<iFontImageCountMax; iCount++) {
		fontImageArray[iCount]=document.getElementById("fontImageId"+iCount);
	  }

	  for (var i=0; i<iStringInputLength; i++) {
	  
		//alert("A".charCodeAt(0));
	  
		let cFontChar=sInput.charCodeAt(i);	

		//alert(cFontChar);

		drawChar(iInputX+iFrameWidth*i, iInputY, cFontChar, fontImageArray[i]);
	  }
	}

	function resetProjectile() {
		var mainImageTile = document.getElementById("mainImageTileImageId");

		var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		//removed by Mike, 20251102
		var iFrameY=0;

		mainImageTileProjectilePosX = parseInt(mainImageTile.style.left);
		mainImageTileProjectilePosY =parseInt(mainImageTile.style.top);

		newMainImageTileProjectilePosX=parseInt(mainImageTileProjectilePosX);
		newMainImageTileProjectilePosY=parseInt(mainImageTileProjectilePosY);

		mainImageTileProjectile.style.left = mainImageTileProjectilePosX+"px";
		mainImageTileProjectile.style.top = mainImageTileProjectilePosY+"px";

		mainImageTileProjectile.style.visibility="hidden";
		bHasFired=false;		
		bIsHeroDash=false;
		//bHasHeroShotFireball=false;
		
		//added by Mike, 20251108
		if (bIsHeroWalking) {
			bIsHeroWalking=false;
			bHasHeroChangedFacingLeftOrRight=false;
		}

		//bHasHeroHitMonster=false;

/*
		bIsHeroFacingLeft=false;
		bIsHeroFacingUpOrDown=false;
		bIsHeroFacingUp=false;
*/

		iMainImageTileStepAngle=0;

		mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;//20;
		mainImageTileProjectileStepX=mainImageTileProjectileStepXMin;//20;

		bHasReachedDestinationY=false;
		bHasReachedDestinationX=false;
	
		//TODO: -add: idle animation	
		iHeroAnimationCount=0; 
		
		//added by Mike, 20251106
		iHeroAttackAnimationCount=0;//-1; 		
		//iHeroAttackComboCount=0;
	
			if (bIsHeroFacingLeftOrRight) {
				if (bIsHeroFacingLeft) {
					iFrameY=iImageFrameHeightLarge*1;
					
					if (bIsHeroFacingUpOrDown) {
						if (!bIsHeroFacingUp) {
							iFrameY=iImageFrameHeightLarge*2;
						}
						else {
							iFrameY=iImageFrameHeightLarge*4;
						}				
					}
				}
				else {
					iFrameY=iImageFrameHeightLarge*0;

					if (bIsHeroFacingUpOrDown) {
						if (!bIsHeroFacingUp) {
							iFrameY=iImageFrameHeightLarge*3;
						}
						else {
							iFrameY=iImageFrameHeightLarge*5;
						}
					}
				}
			}
			else {
				if (bIsHeroFacingUpOrDown) {
					if (!bIsHeroFacingUp) {
						iFrameY=iImageFrameHeightLarge*6;
					}
					else {
						iFrameY=iImageFrameHeightLarge*7;
					}
				}
			}
			
			
			//removed by Mike, 20251104
			//mainImageTileHeroBody.style.visibility="visible";
		
			if (iHeroInvincibileCount<iHeroInvincibileCountMax/8) {
				//mainImageTilePosX+=mainImageTileStepX*4;
				//iFrameXOffset=iImageFrameWidthLarge*8;

				iFrameXOffset=iImageFrameWidthLarge*9;

/*				
				if (bIsHeroFacingLeftOrRight) {
					if (bIsHeroFacingLeft) {
						mainImageTilePosX+=mainImageTileStepX*4;
						
						if (bIsHeroFacingUpOrDown) {
							if (!bIsHeroFacingUp) {
								mainImageTilePosY+=(-mainImageTileStepY*4);
							}
							else {
								mainImageTilePosY+=(mainImageTileStepY*4);
							}				
						}
					}
					else {
						mainImageTilePosX+=(-mainImageTileStepX*4);

						if (bIsHeroFacingUpOrDown) {
							if (!bIsHeroFacingUp) {
								mainImageTilePosY+=(-mainImageTileStepY*4);
							}
							else {
								mainImageTilePosY+=(mainImageTileStepY*4);
							}
						}
					}
				}
				else {
					if (bIsHeroFacingUpOrDown) {
						if (!bIsHeroFacingUp) {
							mainImageTilePosY+=(-mainImageTileStepY*4);
						}
						else {
							mainImageTilePosY+=(mainImageTileStepY*4);
						}
					}
				}	
*/				
				
				mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset + "px -" + iFrameY + "px";
			}
			else {
				mainImageTileHeroBody.style.objectPosition = "-" + iImageFrameWidthLarge*iHeroAnimationCount - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
			}

/*
			//edited by Mike, 20251106
			mainImageTileHeroBody.style.objectPosition = "-" + iImageFrameWidthLarge*iHeroAnimationCount - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
*/
	}
	
	function resetFireballProjectile() {
		var mainImageTile = document.getElementById("mainImageTileImageId");
		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");

		mainImageTileFireballProjectilePosX = 0+"px";//mainImageTile.style.left;
		mainImageTileFireballProjectilePosY = 0+"px";//mainImageTile.style.top;

		newMainImageTileFireballProjectilePosX=0; //mainImageTileProjectilePosX;
		newMainImageTileFireballProjectilePosY=0; //mainImageTileProjectilePosY;

		mainImageTileFireballProjectile.style.left = mainImageTileFireballProjectilePosX;
		mainImageTileFireballProjectile.style.top = mainImageTileFireballProjectilePosY;
		
		mainImageTileFireballProjectile.style.visibility="hidden";

		mainImageTileFireballProjectileHold.style.visibility="hidden";
				
		bHasFired=false;
		//bIsActionKeyPressed=false;

		bHasHeroShotFireball=false;

		iMainImageTileStepAngle=0;

		mainImageTileFireballProjectileStepY=mainImageTileFireballProjectileStepYMax; //Min;//20;
		mainImageTileFireballProjectileStepX=mainImageTileFireballProjectileStepXMax; //Min;//20;
	}	

	function resetSniperShot() {
		mainImageTileSniperShotPosX=0;
		mainImageTileSniperShotPosY=0;

		bHasFired=false;
		bHasHeroShotSniper=false;

/*
		if (iCurrHeroMana==iCurrHeroManaMax) {
			bHasHeroShotSniper=false;
		}
*/		
	}	

	function drawGridBuggy(myCanvasContext, iXPos, iYPos) {
/*	
		iMiniMapRoomWidth=5;
		iMiniMapRoomHeight=5;		
		iMiniMapSpacing=2;
		
		iMiniMapRowCountMax=5;
		iMiniMapColumnCountMax=3;		
*/

		//myCanvasContext.fillStyle = "#0da200"; //"#ff0000";
		
		//alert(iInnerHorizontalOffset);
		
		//alert(iStageMaxHeight);
		//alert(iStageMaxWidth);		
		//alert(iInnerHorizontalOffset);
		
		//0+iHorizontalOffset+iStageMaxWidth/2
		
		myCanvasContext.strokeStyle = "#0da200";
		
		myCanvasContext.beginPath();
		myCanvasContext.rect(0+iXPos, 0+iYPos, 0+iStageMaxHeight-iInnerHorizontalOffset*1.5, iStageMaxHeight);
		myCanvasContext.stroke();
		
/*
		//horizontal
    	for (var iRowCount=0; iRowCount<iMiniMapRowCountMax; iRowCount++) {
    		for (var iColumnCount=0; iColumnCount<iMiniMapColumnCountMax; iColumnCount++) {
				myCanvasContext.fillStyle = "#ffffff"; //"#ff0000";
				
				myCanvasContext.fillRect(0+iXPos+iColumnCount*iMiniMapRoomWidth+iMiniMapSpacing*iColumnCount, 0+iYPos+iRowCount*iMiniMapRoomHeight+iMiniMapSpacing*iRowCount, iMiniMapRoomWidth, iMiniMapRoomHeight);
			}
		}		
*/		
		//alert(iCurrMapLocation)
		
		//myCanvasContext.fillStyle = "#ff0000"; //"#ffffff";		
	}
	

	//added by Mike, 20241115
	//reference: 
	//1) Game Off 2023: Battle Tactics
	//2) https://www.w3schools.com/graphics/canvas_lines.asp; last accessed: 20241115
	function drawMiniMap(myCanvasContext, iXPos, iYPos) {
		iMiniMapRoomWidth=5;
		iMiniMapRoomHeight=5;		
		iMiniMapSpacing=2;
		
		iMiniMapRowCountMax=iRowCountMax;//5;
		iMiniMapColumnCountMax=iColumnCountMax;//5;//3;		
		
/*		
		myCanvasContext.fillStyle = "#ffffff"; //"#ff0000";
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iMiniMapRoomHeight, iMiniMapRoomHeight);
*/		

		//horizontal
    	for (var iRowCount=0; iRowCount<iMiniMapRowCountMax; iRowCount++) {
    		for (var iColumnCount=0; iColumnCount<iMiniMapColumnCountMax; iColumnCount++) {
				
				if (arrayHasVisitedRoom[iColumnCount][iRowCount]==1) {
					myCanvasContext.fillStyle = "#ffffff"; //"#ff0000";
				}
				else {
					myCanvasContext.fillStyle = "#3e2900"; //"#ff0000";
				}
				
				myCanvasContext.fillRect(0+iXPos+iColumnCount*iMiniMapRoomWidth+iMiniMapSpacing*iColumnCount, 0+iYPos+iRowCount*iMiniMapRoomHeight+iMiniMapSpacing*iRowCount, iMiniMapRoomWidth, iMiniMapRoomHeight);
			}
		}		
		
		//alert(iCurrMapLocation)
		
		//myCanvasContext.fillStyle = "#ff0000"; //"#ffffff";
		
		//example: 53
		iRowCount=parseInt(iCurrMapLocation/10);
		iColumnCount=iCurrMapLocation-iRowCount*10;
/*		
		alert("iRowCount: "+iRowCount);
		alert("iColumnCount: "+iColumnCount);
*/		
/*
		iRowCount-=1;
		iColumnCount-=1;
*/
		
		if (iMiniMapAnimationDelayCount==iMiniMapAnimationDelayCountMax) {
			iMiniMapAnimationCount=(iMiniMapAnimationCount+1)%5; //last hidden

			iMiniMapAnimationDelayCount=0;
		}
		else {
			iMiniMapAnimationDelayCount++;
		}

		//iMiniMapAnimationCount=(iMiniMapAnimationCount+1)%5;
		
		if (iMiniMapAnimationCount==0) {
			//myCanvasContext.fillStyle = "#ff0000"; //"#ffffff";
/*			
			myCanvasContext.strokeStyle = "#ff0000";
			
			myCanvasContext.beginPath();
			
			myCanvasContext.rect(0+iXPos+iColumnCount*iMiniMapRoomWidth+iMiniMapSpacing*iColumnCount, 0+iYPos+iRowCount*iMiniMapRoomHeight+iMiniMapSpacing*iRowCount, iMiniMapRoomWidth, iMiniMapRoomHeight);

			myCanvasContext.stroke();
*/			
			myCanvasContext.fillStyle = "#ff7f27"; //"#000000"; //"#00c7ff"; //"#ff0000";
			myCanvasContext.fillRect(0+iXPos+iColumnCount*iMiniMapRoomWidth+iMiniMapSpacing*iColumnCount, 0+iYPos+iRowCount*iMiniMapRoomHeight+iMiniMapSpacing*iRowCount, iMiniMapRoomWidth, iMiniMapRoomHeight);			

		}
		else {			
			myCanvasContext.fillStyle = "#ffffff";
			myCanvasContext.fillRect(0+iXPos+iColumnCount*iMiniMapRoomWidth+iMiniMapSpacing*iColumnCount, 0+iYPos+iRowCount*iMiniMapRoomHeight+iMiniMapSpacing*iRowCount, iMiniMapRoomWidth, iMiniMapRoomHeight);			
		}		
	}

	//z-index; text background covers it
	function drawTextTriangle(myCanvasTwoContext, iXPos, iYPos) {
		//reference Google AI Overview;
		myCanvasTwoContext.beginPath(); // Start a new path
/*
		myCanvasTwoContext.moveTo(100, 100); // Move to the first point
		myCanvasTwoContext.lineTo(300, 100); // Draw a line to the second point
		myCanvasTwoContext.lineTo(200, 300); // Draw a line to the third point
		myCanvasTwoContext.closePath(); // Close the path, connecting the third point back to the first
*/
		iSide=2;

		myCanvasTwoContext.moveTo(iXPos, iYPos); // Move to the first point
		myCanvasTwoContext.lineTo(iXPos+iSide, iYPos); // Draw a line to the second point
		myCanvasTwoContext.lineTo(iXPos+1, iYPos+iSide); // Draw a line to the third point
		myCanvasTwoContext.closePath(); // Close the path, connecting the third point back to the first

		// Optional: Style the triangle
		myCanvasTwoContext.fillStyle = 'red'; // Set fill color
		myCanvasTwoContext.fill(); // Fill the triangle

		myCanvasTwoContext.strokeStyle = 'white';//red'; // Set stroke color
		myCanvasTwoContext.lineWidth = 2; // Set line width
		myCanvasTwoContext.stroke(); // Draw the outline

	}

	function drawHeroLifeBar(myCanvasContext, iXPos, iYPos, bIsFrameOnly) {
		var iHeroLifeBarWidth=4;
		var iHeroLifeBarHeight=4;		
		var iHeroLifeBarSpacing=0;//1;
			
		//var iCurrHeroLife=10;
/*		
		myCanvasContext.clearRect(0, 0, myCanvasContext.width, myCanvasContext.height);

		//edited by Mike, 20251121
		myCanvasContext.fillStyle = "#000000";	
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLifeMax*2, iHeroLifeBarHeight);
*/
		myCanvasContext.fillStyle = "#2d2622"; //"#736157"; //#ffffff; //"#ff0000";	
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLifeMax, iHeroLifeBarHeight);
		
		if (bIsFrameOnly) {
			return;
		}

		//added by Mike, 20251112
		//---------------------------------		
		if (iCurrHeroLifeToBeDeductedAnimationDelayCount==iCurrHeroLifeToBeDeductedAnimationDelayCountMax) {
			if (iCurrHeroLifeToBeDeductedAnimation>0) {
				
				//alert(iCurrHeroLifeToBeDeductedAnimation);
				
				iCurrHeroLifeToBeDeductedAnimation--;
			}
			
			iCurrHeroLifeToBeDeductedAnimationDelayCount=0;
		}
		else {
			iCurrHeroLifeToBeDeductedAnimationDelayCount++;
		}
		
		//added by Mike, 20251111
		myCanvasContext.strokeStyle = 'black'; 
		myCanvasContext.lineWidth = 0.2; 
		myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLifeMax, iHeroLifeBarHeight); 
		
		//textLifeBarDiv.clientWidth
/*
		//blinking red 2 bar;
		var iXPosOffset=0;
		if (iCurrHeroLife<=3) {
			iXPosOffset=2*iHeroLifeBarWidth;
		}
*/		

		//added by Mike, 20251121
		if (iCurrHeroLifeToBeDeductedAnimation<0) {
			iCurrHeroLifeToBeDeductedAnimation=0;
		}

	    if (iCurrHeroLifeToBeDeductedAnimationMain<0) {
			iCurrHeroLifeToBeDeductedAnimationMain=0;
		}

		//myCanvasContext.fillStyle = 'yellow';
		myCanvasContext.fillStyle = "#ee0000"

		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*(iCurrHeroLifeToBeDeductedAnimationMain+iCurrHeroLifeToBeDeductedAnimation), iHeroLifeBarHeight);
		
		//myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*(iCurrHeroLifeMax), iHeroLifeBarHeight);

		//---------------------------------


		if (iCurrHeroLifeToBeDeducted>0) {
			//iCurrHeroLife-=iCurrHeroLifeToBeDeducted;
			iCurrHeroLifeToBeDeducted=0;
		}		


		if (iCurrHeroLife>=10) { //5) {
			//myCanvasContext.fillStyle = "#00c7ff"; //sky blue
			myCanvasContext.fillStyle = "#aa0000"; //dark red		
		}
		else if (iCurrHeroLife>=3) {//2) {
			//myCanvasContext.fillStyle = "#ff6b00"; //orange
			myCanvasContext.fillStyle = "#aa0000"; //dark red		
		}
		else {
/*		
			//due to min damage is 2;
			if (iCurrHeroLife==2) {
				iCurrHeroLife=1;
			}
*/
		
/*		
			//myCanvasContext.fillStyle = "#ff0000"; //red
			iCurrHeroLifeAnimationDelayCount=(iCurrHeroLifeAnimationDelayCount+1)%iCurrHeroLifeAnimationDelayCountMax;

			if (iCurrHeroLifeAnimationDelayCount==0) {
				myCanvasContext.fillStyle = "#000000"; //black
			}			
			else {
				myCanvasContext.fillStyle = "#ff0000"; //red		
			}
*/
			//Game Off 2021; TUGON
			if (iCurrHeroLifeAnimationDelayCount<10) {//5) {
				//myCanvasContext.fillStyle = "#ff0000"; //red	
				myCanvasContext.fillStyle = "#cc0000"; //red	
			}
			else {
				if (iCurrHeroLifeAnimationDelayCount>20) {//10) {
					iCurrHeroLifeAnimationDelayCount=0;
				}
				
				//edited by Mike, 20251112
				if (iCurrHeroLifeToBeDeductedAnimation==0) {
					myCanvasContext.fillStyle = "#2d2622"; //"#000000"; //black
				}
			}			
			iCurrHeroLifeAnimationDelayCount++;			
		}
		
		//myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLife, iHeroLifeBarHeight);
		

		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLife, iHeroLifeBarHeight);
	}	
	
	function drawBossLifeBar(myCanvasContext, iXPos, iYPos, bIsFrameOnly) {
		var iBossLifeBarWidth=2;//4;
		var iBossLifeBarHeight=4;		
		var iBossLifeBarSpacing=0;//1;
		
		if (iCurrBossLife<=0) {
			return;
		}
		
		myCanvasContext.fillStyle = "#2d2622";	
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iBossLifeBarWidth*iCurrBossLifeMax, iBossLifeBarHeight);
				
		if (bIsFrameOnly) {
			return;
		}
		
		
		//---------------------------------		
		if (iCurrBossLifeToBeDeductedAnimationDelayCount==iCurrBossLifeToBeDeductedAnimationDelayCountMax) {
			if (iCurrBossLifeToBeDeductedAnimation>0) {
				
				//alert(iCurrHeroLifeToBeDeductedAnimation);
				
				iCurrBossLifeToBeDeductedAnimation--;
			}
			
			iCurrBossLifeToBeDeductedAnimationDelayCount=0;
		}
		else {
			iCurrBossLifeToBeDeductedAnimationDelayCount++;
		}
		
		//added by Mike, 20251111
		myCanvasContext.strokeStyle = 'black'; 
		myCanvasContext.lineWidth = 0.2; 
		myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iBossLifeBarWidth*iCurrBossLifeMax, iBossLifeBarHeight); 
		
		//textLifeBarDiv.clientWidth
/*
		//blinking red 2 bar;
		var iXPosOffset=0;
		if (iCurrHeroLife<=3) {
			iXPosOffset=2*iHeroLifeBarWidth;
		}
*/		

		//added by Mike, 20251121
		if (iCurrBossLifeToBeDeductedAnimation<0) {
			iCurrBossLifeToBeDeductedAnimation=0;
		}

	    if (iCurrBossLifeToBeDeductedAnimationMain<0) {
			iCurrBossLifeToBeDeductedAnimationMain=0;
		}

		//myCanvasContext.fillStyle = 'yellow';
		myCanvasContext.fillStyle = "#ee0000"

		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iBossLifeBarWidth*(iCurrBossLifeToBeDeductedAnimationMain+iCurrBossLifeToBeDeductedAnimation), iBossLifeBarHeight);
		
		//myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*(iCurrHeroLifeMax), iHeroLifeBarHeight);

		//---------------------------------

		if (iCurrBossLifeToBeDeducted>0) {
			//iCurrHeroLife-=iCurrHeroLifeToBeDeducted;
			iCurrBossLifeToBeDeducted=0;
		}		


		if (iCurrBossLife>=10) { //5) {
			//myCanvasContext.fillStyle = "#00c7ff"; //sky blue
			myCanvasContext.fillStyle = "#aa0000"; //dark red		
		}
		else if (iCurrBossLife>=3) {//2) {
			//myCanvasContext.fillStyle = "#ff6b00"; //orange
			myCanvasContext.fillStyle = "#aa0000"; //dark red		
		}
		else {
			//Game Off 2021; TUGON
			if (iCurrBossLifeAnimationDelayCount<10) {//5) {
				//myCanvasContext.fillStyle = "#ff0000"; //red	
				myCanvasContext.fillStyle = "#cc0000"; //red	
			}
			else {
				if (iCurrBossLifeAnimationDelayCount>20) {//10) {
					iCurrBossLifeAnimationDelayCount=0;
				}
				
				//edited by Mike, 20251112
				if (iCurrBossLifeToBeDeductedAnimation==0) {
					myCanvasContext.fillStyle = "#2d2622"; //"#000000"; //black
				}
			}			
			iCurrBossLifeAnimationDelayCount++;			
		}
		
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iBossLifeBarWidth*iCurrBossLife, iBossLifeBarHeight);
	}	
	
	//edited by Mike, 20251112
	function reduceHeroLifeBar(iAmount) {
/*	
		iCurrHeroLife-=iAmount;
		
		if (iCurrHeroLife<0) {
			iCurrHeroLife=0;
			return;
		}
*/			
			
		//iCurrHeroMana-=3;
		iCurrHeroLifeToBeDeducted+=iAmount*3;
		
		if (iCurrHeroLifeToBeDeducted>iCurrHeroLifeMax) {
			iCurrHeroLifeToBeDeducted=iCurrHeroLifeMax;
		}
		
		if (iCurrHeroLife-iCurrHeroLifeToBeDeducted<=0) {
			iCurrHeroLife=0;
			iCurrHeroLifeToBeDeducted=0;
			//iCurrHeroManaToBeDeductedAnimation=0;
			iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeMax;
			return false;
		}


		if (iCurrHeroLifeToBeDeducted>0) {
			iCurrHeroLife-=iCurrHeroLifeToBeDeducted;
			//iCurrHeroLifeToBeDeducted=0;
		}
		
		//added by Mike, 20251124
		iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLife+iCurrHeroLifeToBeDeducted;
	
		iCurrHeroProjectileLifeAnimationDelayCount=0;
		iCurrHeroLifeToBeDeductedAnimation+=iCurrHeroLifeToBeDeducted;
		
		//iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeMax-iCurrHeroLifeToBeDeductedAnimation;
		
		iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeToBeDeductedAnimationMain-iCurrHeroLifeToBeDeductedAnimation;
		
/*		
		alert("iCurrHeroLifeToBeDeductedAnimation: "+iCurrHeroLifeToBeDeductedAnimation);
		alert("iCurrHeroLifeToBeDeductedAnimationMain: "+iCurrHeroLifeToBeDeductedAnimationMain);
*/		
		
		return true;
	}

	//edited by Mike, 20251123
	//TODO: -update: this
	function reduceBossLifeBar(iAmount) {
/*	
		iCurrHeroLife-=iAmount;
		
		if (iCurrHeroLife<0) {
			iCurrHeroLife=0;
			return;
		}
*/			
			
		//iCurrHeroMana-=3;
		iCurrBossLifeToBeDeducted+=iAmount*3;
		
		if (iCurrBossLifeToBeDeducted>iCurrBossLifeMax) {
			iCurrBossLifeToBeDeducted=iCurrBossLifeMax;
		}
		
		if (iCurrBossLife-iCurrBossLifeToBeDeducted<=0) {
			iCurrBossLife=0;
			iCurrBossLifeToBeDeducted=0;
			//iCurrHeroManaToBeDeductedAnimation=0;
			iCurrBossLifeToBeDeductedAnimationMain=iCurrBossLifeMax;
			
			return false;
		}


		if (iCurrBossLifeToBeDeducted>0) {
			iCurrBossLife-=iCurrBossLifeToBeDeducted;
			//iCurrHeroLifeToBeDeducted=0;
		}
		
		//added by Mike, 20251124
		iCurrBossLifeToBeDeductedAnimationMain=iCurrBossLife+iCurrBossLifeToBeDeducted;
	
		iCurrBossProjectileLifeAnimationDelayCount=0;
		iCurrBossLifeToBeDeductedAnimation+=iCurrBossLifeToBeDeducted;
		
		//iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeMax-iCurrHeroLifeToBeDeductedAnimation;
		
		iCurrBossLifeToBeDeductedAnimationMain=iCurrBossLifeToBeDeductedAnimationMain-iCurrBossLifeToBeDeductedAnimation;
		
/*		
		alert("iCurrHeroLifeToBeDeductedAnimation: "+iCurrHeroLifeToBeDeductedAnimation);
		alert("iCurrHeroLifeToBeDeductedAnimationMain: "+iCurrHeroLifeToBeDeductedAnimationMain);
*/		
		
		return true;
	}


	//edited by Mike, 20251112
	function reduceHeroMana(iAmount) {
		//iCurrHeroMana-=3;
		iCurrHeroManaToBeDeducted+=iAmount;
		
		if (iCurrHeroManaToBeDeducted>iCurrHeroManaMax) {
			iCurrHeroManaToBeDeducted=iCurrHeroManaMax;
		}
		
		if (iCurrHeroMana-iCurrHeroManaToBeDeducted<=0) {
			iCurrHeroManaToBeDeducted=0;
			iCurrHeroMana=0;
			
			iCurrHeroManaRechargeDelayCount=0;

			return false;
		}
		
		//added by Mike, 20251112
		if (iCurrHeroManaToBeDeducted>0) {
			iCurrHeroMana-=iCurrHeroManaToBeDeducted;
			//iCurrHeroManaToBeDeducted=0;
		}

/*		
		iCurrHeroProjectileManaAnimationDelayCount=0;

		//if (iCurrHeroManaToBeDeductedAnimation==0) {
			iCurrHeroManaToBeDeductedAnimation+=iCurrHeroManaToBeDeducted;
		//}
		
		iCurrHeroManaToBeDeductedAnimationMain=iCurrHeroManaMax-iCurrHeroManaToBeDeductedAnimation;
*/
		
		return true;
	}

	function drawHeroManaBar(myCanvasContext, iXPos, iYPos, bIsFrameOnly) {

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		var iHeroManaBarWidth=4;
		var iHeroManaBarHeight=4;		

		var iHeroManaBarSpacing=0;//1;
		var iHeroManaBarPaddingX=2;
		var iHeroManaBarPaddingY=2;

/*
		myCanvasContext.clearRect(0, 0, myCanvasContext.width, myCanvasContext.height);

		//edited by Mike, 20251121
		myCanvasContext.fillStyle = "#000000";	
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax*2, iHeroManaBarHeight);
*/
		myCanvasContext.fillStyle = "#2d2622"; //"#736157"; //#ffffff; //"#ff0000";	
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax, iHeroManaBarHeight);
		
		if (bIsFrameOnly) {
			return;
		}

			if (iCurrHeroProjectileManaAnimationDelayCount==iCurrHeroProjectileManaAnimationDelayCountMax) {
				if (iCurrHeroMana<iCurrHeroManaMax) {
					//iCurrHeroMana++;
				
					if (iCurrHeroManaRechargeDelayCount<iCurrHeroManaRechargeDelayCountMax) {
						iCurrHeroManaRechargeDelayCount++;
					}
					else {
						iCurrHeroMana++;
					}
				}			
				
				iCurrHeroProjectileManaAnimationDelayCount=0;
			}
			else {
				iCurrHeroProjectileManaAnimationDelayCount++;
			}
		//}

			if (iCurrHeroManaToBeDeductedAnimationDelayCount==iCurrHeroManaToBeDeductedAnimationDelayCountMax) {
				if (iCurrHeroManaToBeDeductedAnimation>0) {
					//alert(iCurrHeroManaToBeDeductedAnimation);
					iCurrHeroManaToBeDeductedAnimation--;
				}
				
				iCurrHeroManaToBeDeductedAnimationDelayCount=0;
			}
			else {
				iCurrHeroManaToBeDeductedAnimationDelayCount++;
			}

		//added by Mike, 20251111
		//TODO: -update: this
		if (iCurrHeroManaToBeDeducted>0) {
			//iCurrHeroMana-=iCurrHeroManaToBeDeducted;
			iCurrHeroManaToBeDeducted=0;
		}

/*
		//added by Mike, 20251111
		if (iCurrHeroMana<=0) {
		
			myCanvasContext.strokeStyle = 'red'; //white
			myCanvasContext.lineWidth = 0.2; 
			myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax, iHeroManaBarHeight); 
		}
		else {
			myCanvasContext.strokeStyle = 'black'; 
			myCanvasContext.lineWidth = 0.2; 
			myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax, iHeroManaBarHeight); 
		}
*/
		
/*
		myCanvasContext.fillStyle = 'yellow';

		//myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*(iCurrHeroMana+ iCurrHeroManaToBeDeductedAnimation), iHeroManaBarHeight);
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*(iCurrHeroManaToBeDeductedAnimationMain+iCurrHeroManaToBeDeductedAnimation), iHeroManaBarHeight);
*/
			
/*
		myCanvasContext.fillStyle = "#ffffff"; //white		
		myCanvasContext.fillRect(0+iXPos+textManaBarDiv.innerHTML.length*6-iHeroManaBarPaddingX, 0+iYPos-iHeroManaBarPaddingY, iHeroManaBarWidth*iCurrHeroManaMax+iHeroManaBarPaddingX, iHeroManaBarHeight+iHeroManaBarPaddingY);
*/		

		//myCanvasContext.fillStyle = "#000000"; //black		
		//myCanvasContext.fillStyle = "#ff6b00"; //orange
		//myCanvasContext.fillStyle = "#00dd00";


		//added by Mike, 20251111
		if (iCurrHeroMana<=0) {
			//myCanvasContext.strokeStyle = 'red'; //white

			if (iCurrHeroManaAnimationDelayCount<10) {//5) {
				myCanvasContext.strokeStyle = "#000000"//"#cc0000";
			}
			else {
				myCanvasContext.strokeStyle = "#ffffff"; //"#ff0000"; //white
			}

			myCanvasContext.lineWidth = 0.2;//5;//2; 
			myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax, iHeroManaBarHeight); 
		}
		else {
			myCanvasContext.strokeStyle = 'black'; 
			myCanvasContext.lineWidth = 0.2; 
			myCanvasContext.strokeRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroManaMax, iHeroManaBarHeight); 
		}


		//Game Off 2021; TUGON
		if (iCurrHeroManaAnimationDelayCount<10) {//5) {
			//myCanvasContext.fillStyle = "#00dd00";
			//myCanvasContext.fillStyle = "#00aa00";
			
			myCanvasContext.fillStyle = "#048A1F";
		}
		else {
			if (iCurrHeroManaAnimationDelayCount>20) {//10) {
				iCurrHeroManaAnimationDelayCount=0;
			}
			//myCanvasContext.fillStyle = "#00cc00";
			//myCanvasContext.fillStyle = "#009900";
			myCanvasContext.fillStyle = "#04781B";
		}	
		iCurrHeroManaAnimationDelayCount++;

		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroManaBarWidth*iCurrHeroMana, iHeroManaBarHeight);
		
		//OK; goes up
		//myCanvasContext.fillRect(0+iXPos+textManaBarDiv.innerHTML.length*4, 0+iYPos, iHeroManaBarWidth, -iHeroManaBarHeight/iCurrHeroManaMax*(iCurrHeroMana));
	}		

	function drawSniperShotStatus(myCanvasContext, iXPos, iYPos) {	

		var sniperShotStatusImageTile = document.getElementById("sniperShotStatusImageTileId");

		if (!bHasHeroGottenSniperShot) {
			return;
		}
		
		//if ((bIsGameOver) || (bIsLevelUp) || (bIsShowingStage1End) || (bIsShowingStage2End) || (bIsShowingStage3End) || (bIsShowingStage1Start) || (bIsShowingStage2Start) || (bIsShowingStage3Start)) {
		if ((bIsShowingStage1End) || (bIsShowingStage2End) || (bIsShowingStage3End) || (bIsShowingStage1Start) || (bIsShowingStage2Start) || (bIsShowingStage3Start)) {
		
			sniperShotStatusImageTile.style.visibility="hidden";
		
			return;
		}
		
		

		//var textSniperShotStatusDiv = document.getElementById("textSniperShotlStatusDivId");
/*				
		var iFrameY=iImageFrameHeightDefault*1;		
		sniperShotStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*1 + "px -" + iFrameY + "px";
*/

		sniperShotStatusImageTile.style.visibility="visible";				
		sniperShotStatusImageTile.style.left=0+iXPos+"px";
		sniperShotStatusImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";
	

	
/*		
		textPearlStatusDiv.style.visibility="visible";
		textPearlStatusDiv.style.left=0+iXPos+iImageFrameWidthDefault+"px";
		//note: pearl position centered within image file vertically
		textPearlStatusDiv.style.top=0+iYPos+iImageFrameHeightDefault*0.9+"px";
			
		//edited by Mike, 20251124
		//textPearlStatusDiv.innerHTML = "x"+iCurrPearlCount;
		//textPearlStatusDiv.innerHTML = "x"+iCurrHeroDeathCount;
		textPearlStatusDiv.innerHTML = "";
*/
		
/*	
		var iHeroLifeBarWidth=4;
		var iHeroLifeBarHeight=4;		
		var iHeroLifeBarSpacing=0;//1;
			
		//var iCurrHeroLife=10;

		//myCanvasContext.fillStyle = "#00c7ff"; //00d9ff; //"#ff0000";

		if (iCurrHeroLife>=5) {
			myCanvasContext.fillStyle = "#00c7ff";		
		}
		else if (iCurrHeroLife>=2) {
			myCanvasContext.fillStyle = "#ff6b00"; //orange
		}
		else {
			myCanvasContext.fillStyle = "#ff0000"; //red
		}
		
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLife, iHeroLifeBarHeight);
*/		
	}	


	function drawPearlStatus(myCanvasContext, iXPos, iYPos) {	
		var pearlStatusImageTile = document.getElementById("pearlStatusImageTileId");
		var textPearlStatusDiv = document.getElementById("textPearlStatusDivId");
				
		pearlStatusImageTile.style.visibility="visible";				
		pearlStatusImageTile.style.left=0+iXPos+"px";
		pearlStatusImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";
		
		textPearlStatusDiv.style.visibility="visible";
		textPearlStatusDiv.style.left=0+iXPos+iImageFrameWidthDefault+"px";
		//note: pearl position centered within image file vertically
		textPearlStatusDiv.style.top=0+iYPos+iImageFrameHeightDefault*0.9+"px";
			
		//edited by Mike, 20251124
		//textPearlStatusDiv.innerHTML = "x"+iCurrPearlCount;
		//textPearlStatusDiv.innerHTML = "x"+iCurrHeroDeathCount;
		textPearlStatusDiv.innerHTML = "";

		
/*	
		var iHeroLifeBarWidth=4;
		var iHeroLifeBarHeight=4;		
		var iHeroLifeBarSpacing=0;//1;
			
		//var iCurrHeroLife=10;

		//myCanvasContext.fillStyle = "#00c7ff"; //00d9ff; //"#ff0000";

		if (iCurrHeroLife>=5) {
			myCanvasContext.fillStyle = "#00c7ff";		
		}
		else if (iCurrHeroLife>=2) {
			myCanvasContext.fillStyle = "#ff6b00"; //orange
		}
		else {
			myCanvasContext.fillStyle = "#ff0000"; //red
		}
		
		myCanvasContext.fillRect(0+iXPos, 0+iYPos, iHeroLifeBarWidth*iCurrHeroLife, iHeroLifeBarHeight);
*/		
	}	
	
	function drawMonsterDeathStatus(myCanvasContext, iXPos, iYPos) {		
		var deathCountImageTile = document.getElementById("deathCountImageId");	
		var textMonsterDeathStatusDiv = document.getElementById("textMonsterDeathStatusDivId");

		deathCountImageTile.style.visibility="visible";
		deathCountImageTile.style.left=0+iXPos+iImageFrameWidthDefault+"px";
		deathCountImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";

		textMonsterDeathStatusDiv.style.visibility="visible";
		textMonsterDeathStatusDiv.style.left=parseInt(deathCountImageTile.style.left)+iImageFrameWidthDefault+"px"
		textMonsterDeathStatusDiv.style.top=0+iYPos+iImageFrameHeightDefault*0.9+"px";
				
		if (iCurrMonsterDeathCount>999) {
			iCurrMonsterDeathCount=999; //BAD ENDING...? how to reach 999? the faster?!
		}		
				
		textMonsterDeathStatusDiv.innerHTML = "x"+iCurrMonsterDeathCount;		
	}	
	
	
	function drawHeroDeathStatus(myCanvasContext, iXPos, iYPos) {		
		var deathCountImageTile = document.getElementById("deathCountImageId");	
		var textHeroDeathStatusDiv = document.getElementById("textHeroDeathStatusDivId");

		deathCountImageTile.style.visibility="visible";
		deathCountImageTile.style.left=0+iXPos+iImageFrameWidthDefault+"px";
		deathCountImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";

		textHeroDeathStatusDiv.style.visibility="visible";
		textHeroDeathStatusDiv.style.left=parseInt(deathCountImageTile.style.left)+iImageFrameWidthDefault+"px"
		textHeroDeathStatusDiv.style.top=0+iYPos+iImageFrameHeightDefault*0.9+"px";

		if (iCurrHeroDeathCount>999) {
			iCurrHeroDeathCount=999; //BAD ENDING...? how to reach 999? the faster?!
		}		
				
		textHeroDeathStatusDiv.innerHTML = "x"+iCurrHeroDeathCount;		
	}
	
	function drawKeyStatus(myCanvasContext, iXPos, iYPos) {	
		var keyStatusImageTile = document.getElementById("keyStatusImageTileId");
		//var textPearlStatusDiv = document.getElementById("textPearlStatusDivId");
				
		keyStatusImageTile.style.visibility="visible";				
		keyStatusImageTile.style.left=0+iXPos+"px";
		keyStatusImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";

/*		
		textPearlStatusDiv.style.visibility="visible";
		textPearlStatusDiv.style.left=0+iXPos+iImageFrameWidthDefault+"px";
		//note: pearl position centered within image file vertically
		textPearlStatusDiv.style.top=0+iYPos+iImageFrameHeightDefault*0.9+"px";
				
		textPearlStatusDiv.innerHTML = "x"+iCurrPearlCount;
*/		
	}		

	function drawAmuletStatus(myCanvasContext, iXPos, iYPos) {	
		var amuletStatusImageTile = document.getElementById("amuletStatusImageTileId");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;	

/*		
		if (iAmuletStatusAnimationDelayCount>=iAmuletStatusAnimationDelayCountMax) {			
			iAmuletStatusAnimationCount=(iAmuletStatusAnimationCount+1)%2;

			iAmuletStatusAnimationDelayCount=0;
		}
		else {
			iAmuletStatusAnimationDelayCount++;
		}
		
		amuletStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2-iImageFrameWidthDefault*(iAmuletStatusAnimationCount) + "px -" + iFrameY + "px";
*/
		//Game Off 2021; TUGON
		if (iAmuletStatusAnimationDelayCount<5) {//5) {
			//riverImageRight.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
			iAmuletStatusAnimationCount=0;
		}
		else {
			if (iAmuletStatusAnimationDelayCount>10) {//10) {
				iAmuletStatusAnimationDelayCount=0;
			}
			//riverImageRight.style.objectPosition = "-" + iRiverImageFrameWidth + "px -" + iFrameY + "px";
			iAmuletStatusAnimationCount=1;
		}			
		iAmuletStatusAnimationDelayCount++;	

		amuletStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2-iImageFrameWidthDefault*(iAmuletStatusAnimationCount) + "px -" + iFrameY + "px";		

						
		amuletStatusImageTile.style.visibility="visible";				
		amuletStatusImageTile.style.left=0+iXPos+"px";
		amuletStatusImageTile.style.top=0+iYPos+iImageFrameHeightDefault*1+"px";
	}			

	function initTest() {
		iCurrHeroLife=iCurrHeroLifeMax;
		
		bHasPressedStart=false;
  		bHasViewedHowToPlayGuide=false;
		bHasViewedTitle=false;
		bIsMissionDone=false;
		
		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();
		//-----------			
	}

	function init() {	
		bIsGameOver=false;		
		dElapsedTimeInSeconds=0;

		bIsLevelUp=false;		
		bHasHeroGottenSniperShot=false;
		
		bHasBeatenStage1Boss=false;
			
		iInputDelayAtGameOverCount=0;
		
		iHeroInvincibileCount=iHeroInvincibileCountMax;
		bIsHeroAttacked=false;
		bIsExecutingShake=false;
		iDestroyHumanShakeDelayCount=0;
		
		bHasPressedStart=false;
  		bHasViewedHowToPlayGuide=false;
		bHasViewedTitle=false;
		bIsMissionDone=false;
		bIsMissionStarted=false;	
		bHasViewedMissionIntro=false;

		bIsShowingStage1End=false;
		bIsShowingStage2End=false;
		bIsShowingStage3End=false;

		bIsShowingStage1Start=false;
		bIsShowingStage2Start=false;
		bIsShowingStage3Start=false;


		bIsHeroInTank=false;
		bIsHeroDash=false;
		bHasHeroShotFireball=false;
		
		bHasPlayedSolvedTune=false;
		bHasShotSniper=false;
		
		iBatMonsterAnimationCount=-1;//0; start at -1
		iBatMonsterAnimationCountMax=2;//5;
		iBatMonsterAnimationDelayCount=10; //bat; //0
		iBatMonsterAnimationDelayCountMax=6;
		
		//added by Mike, 20251104
		iSkelMonsterAnimationCount=-1;//0; start at -1
		//iSkelMonsterAnimationCountMax=5;
		iSkelMonsterAnimationDelayCount=10;
		//iSkelMonsterAnimationDelayCountMax=6;		

		iGrassCutEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
		iGrassCutEffectAnimationCountMax=5;
		iGrassCutEffectAnimationDelayCount=0;
		iGrassCutEffectAnimationDelayCountMax=4;//1;

		iPearlAnimationCount=-1; //0; //due to immediately +1 in execution;
		iPearlAnimationCountMax=5;
		iPearlAnimationDelayCount=0;
		iPearlAnimationDelayCountMax=2;
		iPearlInvincibileCount=0;
		//iPearlInvincibileCountMax=10;
		bHasObtainedPearlAtRoom42=false;
		bHasObtainedPearlAtRoom41=false;
		bHasObtainedPearlAtRoom33=false;
		bHasObtainedPearlAtRoom43=false;
		bHasObtainedPearlAtRoom22=false;
		//bHasObtainedPearlAtRoom11=false;
		bHasObtainedKeyAtRoom1=false;
		bHasUsedKeyAtRoom11=false;
		bHasObtainedAmuletAtRoom32=false;
		bHasObtainedPearlAtRoom12=false;

		iBossMonsterAnimationCount=-1;//0; start at -1
		iBossMonsterAnimationCountMax=5;
		iBossMonsterAnimationDelayCount=10; //0
		iBossMonsterAnimationDelayCountMax=10;
		iBossMonsterHitAnimationCount=-1;//0; start at -1
		iBossMonsterHitAnimationCountMax=5;
		iBossMonsterMovementDelayCount=-1;//0; start at -1
		//iBossMonsterMovementDelayCountMax=20;

		iMiniMapAnimationCount=-1;//0; start at -1
		iMiniMapAnimationCountMax=5;
		iMiniMapAnimationDelayCount=0; //0
		iMiniMapAnimationDelayCountMax=5;

		iExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
		iExplosionEffectAnimationCountMax=5;
		iExplosionEffectAnimationDelayCount=0;
		iExplosionEffectAnimationDelayCountMax=4;//1;

		iMonsterExplosionEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
		iMonsterExplosionEffectAnimationCountMax=5;
		iMonsterExplosionEffectAnimationDelayCount=0;
		iMonsterExplosionEffectAnimationDelayCountMax=2;//4;//1;

		iDustEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
		iDustEffectAnimationCountMax=5;
		iDustEffectAnimationDelayCount=0;
		iDustEffectAnimationDelayCountMax=4;//1;

		iHeroAttackEffectAnimationCount=-1; //0; //due to immediately +1 in execution;
		iHeroAttackEffectAnimationCountMax=5;
		iHeroAttackEffectAnimationDelayCount=0;
		iHeroAttackEffectAnimationDelayCountMax=2;//4;//1;

		//edited by Mike, 20251102
		//iHeroAnimationCount=-1; //0; //due to immediately +1 in execution;
		iHeroAnimationCount=0;//3; 
		
		iHeroAnimationCountMax=5;
		iHeroAnimationDelayCount=0;
		//iHeroAnimationDelayCountMax=8;//5;//2;//1; //TODO: -add: more dust effect if target walking distance is far

		var mouseInputImage = document.getElementById("mouseInputImageId");
		var titleImage = document.getElementById("titleImageId");
		var titleImageFrame2 = document.getElementById("titleImageFrame2Id");

		var howToPlayGuideImage = document.getElementById("howToPlayGuideImageId");
		var howToPlayGuideImageFrame2 = document.getElementById("howToPlayGuideImageFrame2Id");
		//var bossBattleBgImage = document.getElementById("bossBattleBgImageId");			
		var bossBattleBgImageBeach = document.getElementById("bossBattleBgImageBeachId");			
		var bossBattleBgImageBeachPart2 = document.getElementById("bossBattleBgImageBeachPart2Id");			
		
		var bossBattleBgImagePart2 = document.getElementById("bossBattleBgImagePart2Id");		
		var bossBattleBgImagePart3 = document.getElementById("bossBattleBgImagePart3Id");		

		var textStoryDiv = document.getElementById("textStoryDivId");

		var textStatusDiv = document.getElementById("textStatusDivId");
		var textStatusBackgroundDiv = document.getElementById("textStatusBackgroundDivId");
		var myCanvasTwo = document.getElementById("myCanvasTwoId");

		//var grassBgImage = document.getElementById("grassBgImageId");			
		
		var mainImageTile = document.getElementById("mainImageTileImageId");
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");
		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");

		var doorImageRight = document.getElementById("doorImageRightId");		
		var doorImageLeft = document.getElementById("doorImageLeftId");
		var doorImageTop = document.getElementById("doorImageTopId");
		var doorImageBottom = document.getElementById("doorImageBottomId");

		var doorLockedImageRight = document.getElementById("doorLockedImageRightId");				
		var riverImageRight = document.getElementById("riverImageRightId");		

		var batMonsterImageTile = document.getElementById("batMonsterImageId");

		//added by Mike, 20251104
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");		

		//added by Mike, 20251123
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");		

		var bossMonsterImageTile = document.getElementById("bossMonsterImageId");

		var explosionEffectImage = document.getElementById("explosionEffectImageId");
		var fireballExplosionEffectImage = document.getElementById("fireballExplosionEffectImageId");
		
		var grassCutEffectImage = document.getElementById("grassCutEffectImageId");
		var pearlImageTile = document.getElementById("pearlImageTileId");
		var pearlStatusImageTile = document.getElementById("pearlStatusImageTileId");

		var sniperShotStatusImageTile = document.getElementById("sniperShotStatusImageTileId");


		var textMonsterDeathStatusDiv = document.getElementById("textMonsterDeathStatusDivId");
		var textHeroDeathStatusDiv = document.getElementById("textHeroDeathStatusDivId");

		var keyImageTile = document.getElementById("keyImageTileId");
		var keyStatusImageTile = document.getElementById("keyStatusImageTileId");

		var amuletImageTile = document.getElementById("amuletImageTileId");
		var amuletStatusImageTile = document.getElementById("amuletStatusImageTileId"); 

		var heroLifeBarStatusImageTile = document.getElementById("heroLifeBarStatusImageTileId"); 

		var myFavicon = document.getElementById("faviconImageId");
		var deathCountImageTile = document.getElementById("deathCountImageId");

		var wolfImageTile = document.getElementById("wolfImageTileId");


		var textTimeDiv = document.getElementById("textTimeDivId");
		var textPearlStatusDiv = document.getElementById("textPearlStatusDivId");
		var textLifeBarDiv = document.getElementById("textLifeBarDivId");
		var textManaBarDiv = document.getElementById("textManaBarDivId");
		var textMonsterDeathDiv = document.getElementById("textMonsterDeathDivId");

		var titleImage = document.getElementById("titleImageId");
		var textEnterDiv = document.getElementById("textEnterDivId");
		
		var textNewGameDiv = document.getElementById("textNewGameDivId");
		var textContinueGameDiv = document.getElementById("textContinueGameDivId");

		var textLevelUpLifeDiv = document.getElementById("textLevelUpLifeDivId");
		var textLevelUpStaminaDiv = document.getElementById("textLevelUpStaminaDivId");
		var textLevelUpSpeedDiv = document.getElementById("textLevelUpSpeedDivId");

		//--------------------
		mouseInputImage.style.visibility="hidden";
		titleImage.style.visibility="visible";
		titleImageFrame2.style.visibility="hidden";
		
		howToPlayGuideImage.style.visibility="hidden";
		howToPlayGuideImageFrame2.style.visibility="hidden";		
		////bossBattleBgImage.style.visibility="hidden";
		bossBattleBgImageBeach.style.visibility="hidden";
		bossBattleBgImageBeachPart2.style.visibility="hidden";

		bossBattleBgImagePart2.style.visibility="hidden";
		bossBattleBgImagePart3.style.visibility="hidden";

		textStoryDiv.style.visibility="hidden";

		textStatusDiv.style.visibility="hidden";
		textStatusBackgroundDiv.style.visibility="hidden";
		myCanvasTwo.style.visibility="hidden";
		
		//grassBgImage.style.visibility="hidden";
		
		mainImageTile.visibility="hidden";
		mainImageTileTankBody.visibility="hidden";
		mainImageTileHeroBody.visibility="hidden";
		mainImageTileProjectile.visibility="hidden";		
		mainImageTileFireballProjectile.visibility="hidden";		
		mainImageTileFireballProjectileHold.visibility="hidden";		
		
		doorImageRight.style.visibility="hidden";
		doorImageLeft.style.visibility="hidden";
		doorImageTop.style.visibility="hidden";
		doorImageBottom.style.visibility="hidden";

		doorLockedImageRight.style.visibility="hidden";
		riverImageRight.style.visibility="hidden";

		batMonsterImageTile.style.visibility="hidden";
		bossMonsterImageTile.style.visibility="hidden";

		//added by Mike, 20251104
		skelMonsterImageTile.style.visibility="hidden";

		//added by Mike, 20251123
		demonMonsterImageTile.style.visibility="hidden";


		explosionEffectImage.style.visibility="hidden";
		grassCutEffectImage.style.visibility="hidden";
		pearlImageTile.style.visibility="hidden";
		pearlStatusImageTile.style.visibility="hidden";

		sniperShotStatusImageTile.style.visibility="hidden";


		keyImageTile.style.visibility="hidden";
		keyStatusImageTile.style.visibility="hidden";
		
		amuletImageTile.style.visibility="hidden";
		amuletStatusImageTile.style.visibility="hidden";		
		
		myFavicon.style.visibility="hidden";
		deathCountImageTile.style.visibility="hidden";

		wolfImageTile.style.visibility="hidden";

		textTimeDiv.style.visibility="hidden";
		textPearlStatusDiv.style.visibility="hidden";
		textLifeBarDiv.style.visibility="hidden";
		textManaBarDiv.style.visibility="hidden";
		
		textMonsterDeathStatusDiv.style.visibility="hidden";

		titleImage.style.visibility="hidden";
		textEnterDiv.style.visibility="visible";
		
		textNewGameDiv.style.visibility="hidden";
		textContinueGameDiv.style.visibility="hidden";

		textLevelUpLifeDiv.style.visibility="hidden";
		textLevelUpStaminaDiv.style.visibility="hidden";
		textLevelUpSpeedDiv.style.visibility="hidden";
				
		//--------------------
		myCanvasTwo.style.top = (iVerticalOffsetInnerScreen+0)+"px";
		myCanvasTwo.style.left = iHorizontalOffset+"px";

		mainImageTilePosX=iStageMaxWidth/2-iImageFrameWidth/2;
		mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeight;

		mainImageTile.style.left = (iHorizontalOffset+mainImageTilePosX)+"px";
		mainImageTile.style.top = (iVerticalOffsetInnerScreen+mainImageTilePosY)+"px";
		
		mainImageTileTankBody.style.left = mainImageTile.style.left;
		mainImageTileTankBody.style.top = mainImageTile.style.top;

		mainImageTileHeroBody.style.left = mainImageTile.style.left;
		mainImageTileHeroBody.style.top = mainImageTile.style.top;
		
		textTimeDiv.innerHTML = "00:00:00";
		textPearlStatusDiv.innerHTML = "x0";
		//textLifeBarDiv.innerHTML = "LIFE";
/*		
		textMonsterDeathStatusDiv.innerHTML = "x0";
*/
		
		textNewGameDiv.innerHTML = "NEW GAME";
		textNewGameDiv.style.left = iHorizontalOffset+iStageMaxWidth/2-textNewGameDiv.clientWidth/2+"px";
		//textNewGameDiv.style.top= iVerticalOffsetInnerScreen+iStageMaxHeight/2-textNewGameDiv.clientHeight+"px";						
		textNewGameDiv.style.top= iVerticalOffsetInnerScreen+textNewGameDiv.clientHeight*2+"px";						
		textContinueGameDiv.innerHTML = "CONTINUE";
		textContinueGameDiv.style.left = iHorizontalOffset+iStageMaxWidth/2-textContinueGameDiv.clientWidth/2+"px";
		textContinueGameDiv.style.top= iVerticalOffsetInnerScreen+textContinueGameDiv.clientHeight*4+"px";		

		//added by Mike, 20251121
		textLevelUpLifeDiv.innerHTML = "INCREASE MAX HP";
		textLevelUpLifeDiv.style.left = iHorizontalOffset+iStageMaxWidth/2-textLevelUpLifeDiv.clientWidth/2+"px";				
		textLevelUpLifeDiv.style.top= iVerticalOffsetInnerScreen+textLevelUpLifeDiv.clientHeight*2+"px";						
		
		textLevelUpStaminaDiv.innerHTML = "INCREASE MAX STAMINA";
		textLevelUpStaminaDiv.style.left = iHorizontalOffset+iStageMaxWidth/2-textLevelUpStaminaDiv.clientWidth/2+"px";
		textLevelUpStaminaDiv.style.top= iVerticalOffsetInnerScreen+textLevelUpStaminaDiv.clientHeight*4+"px";		

		textLevelUpSpeedDiv.innerHTML = "INCREASE MAX SPEED";
		textLevelUpSpeedDiv.style.left = iHorizontalOffset+iStageMaxWidth/2-textLevelUpSpeedDiv.clientWidth/2+"px";
		textLevelUpSpeedDiv.style.top= iVerticalOffsetInnerScreen+textLevelUpSpeedDiv.clientHeight*6+"px";		


		////var myCanvasTwo = document.getElementById("myCanvasTwoId");
		////myCanvasTwo.style.visibility="hidden";
			
		var iCurrMapLocation=53;	
		
		var hasInitMapLocation=false;
		
		for (iRowCount=0; iRowCount<iRowCountMax; iRowCount++) {				
			for (iColumnCount=0; iColumnCount<iColumnCountMax; iColumnCount++) {
				arrayHasVisitedRoom[iColumnCount][iRowCount]=0;
			}
		}			
		

		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();

		//alert("DITO");	
		//-----------		

		myAudioPart2 = document.getElementById("myAudioPart2Id");		
		myAudioPart2.setAttribute("src", sAudioBGMPart2);

		var fMyAudioPart2Volume=1.0;//0.4;
		myAudioPart2.volume=fMyAudioPart2Volume;
		myAudioPart2.loop=true;		
		//myAudioPart2.play();

		//-----------		

		myAudioPart3 = document.getElementById("myAudioPart3Id");		
		myAudioPart3.setAttribute("src", sAudioBGMPart3);

		var fMyAudioPart3Volume=0.5;//0.4;
		myAudioPart3.volume=fMyAudioPart3Volume;
		myAudioPart3.loop=true;		
		//myAudioPart3.play();

		//-----------		
			
		myAudioBossScreech = document.getElementById("myAudioBossScreechId");		
		myAudioBossScreech.setAttribute("src", sAudioEffectBossScreech);

		var fMyAudioBossScreechVolume=1.0;//0.4;
		myAudioBossScreech.volume=fMyAudioBossScreechVolume;
		myAudioBossScreech.loop=false;		
		//myAudioBossScreech.play();		
		//-----------		

		myAudioWater = document.getElementById("myAudioWaterId");		
		myAudioWater.setAttribute("src", sAudioEffectWater);

		var fMyAudioWaterVolume=1.0;//0.4;
		myAudioWater.volume=fMyAudioWaterVolume;
		myAudioWater.loop=false;		
		//myAudioBossScreech.play();		
		//-----------		
		
		//note: set this here;
		keyImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*0 + "px -" + iImageFrameHeight*3 + "px";

		keyStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*0 + "px -" + iImageFrameHeight*3 + "px";
		
		amuletImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iImageFrameHeight*3 + "px";

		amuletStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iImageFrameHeight*3 + "px";		
		
		//heroLifeBarStatusImageTile.style.visibility="visible";
		heroLifeBarStatusImageTile.style.left=0+iImageFrameWidthDefault*.1+"px"; 
		heroLifeBarStatusImageTile.style.top=0+iImageFrameWidthDefault*.1+"px";
				
/*
		var snakeMonsterImageTile = document.getElementById("snakeMonsterImageId");		
		snakeMonsterImageTile.style.visibility="hidden";
*/

		//added by Mike, 20251108
		for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
			arrayWraithMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("wraithMonsterImageId"+iCount);
			
			arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arrayWraithMonsterCountId[iCount][MONSTER_POSX]=0;
			arrayWraithMonsterCountId[iCount][MONSTER_POSY]=0;
			arrayWraithMonsterCountId[iCount][MONSTER_STEPX]=2;
			arrayWraithMonsterCountId[iCount][MONSTER_STEPY]=2;			
			
			arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
			arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

			arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

			arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
			arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
			arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
			
			arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
			arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

			arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=0;//-1;
			arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
			
			arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
		}

		//added by Mike, 20251123
		for (iCount=0; iCount<iRunningWraithMonsterCountMax; iCount++) {
			arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("runningWraithMonsterImageId"+iCount);
			
			arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arrayRunningWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arrayRunningWraithMonsterCountId[iCount][MONSTER_POSX]=0;
			arrayRunningWraithMonsterCountId[iCount][MONSTER_POSY]=0;
			arrayRunningWraithMonsterCountId[iCount][MONSTER_STEPX]=3; //running
			arrayRunningWraithMonsterCountId[iCount][MONSTER_STEPY]=3; //running			
			
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=4;//5;

			arrayRunningWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;

			arrayRunningWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arrayRunningWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
			arrayRunningWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
			arrayRunningWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
			
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

			arrayRunningWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=0;//-1;
			arrayRunningWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
			
			arrayRunningWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
		}
		
		//added by Mike, 20251123
		for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
			arrayBombMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("bombMonsterImageId"+iCount);
			
			arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arrayBombMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arrayBombMonsterCountId[iCount][MONSTER_POSX]=0;
			arrayBombMonsterCountId[iCount][MONSTER_POSY]=0;
			arrayBombMonsterCountId[iCount][MONSTER_STEPX]=0; //bomb
			arrayBombMonsterCountId[iCount][MONSTER_STEPY]=0; //bomb
			
			arrayBombMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
			arrayBombMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=8;//4;//5;

			arrayBombMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arrayBombMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=3;

			arrayBombMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arrayBombMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=60*(iCount+1);//15*(iCount+1);
			arrayBombMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
			arrayBombMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
			
			arrayBombMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
			arrayBombMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

			arrayBombMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=0;//-1;
			arrayBombMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
			
			arrayBombMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
		}		

		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			arraySnakeMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);
			
			arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arraySnakeMonsterCountId[iCount][MONSTER_POSX]=0;
			arraySnakeMonsterCountId[iCount][MONSTER_POSY]=0;
			arraySnakeMonsterCountId[iCount][MONSTER_STEPX]=2;
			arraySnakeMonsterCountId[iCount][MONSTER_STEPY]=2;			
			
			arraySnakeMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
			arraySnakeMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=6;		

			arraySnakeMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arraySnakeMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=5;		

			arraySnakeMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arraySnakeMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=5;		
			
			arraySnakeMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;		
		}
	
		for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
			arrayGrassMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("grassMonsterImageId"+iCount);
			
			arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arrayGrassMonsterCountId[iCount][MONSTER_POSX]=0;
			arrayGrassMonsterCountId[iCount][MONSTER_POSY]=0;
			arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=2;
			arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=2;			
			
			arrayGrassMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
			arrayGrassMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=6;		

			arrayGrassMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arrayGrassMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=5;		

			arrayGrassMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arrayGrassMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=5;		
			
			arrayGrassMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;	
		}
		
		for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
			arraySlimeMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("slimeMonsterImageId"+iCount);
			
			arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arraySlimeMonsterCountId[iCount][MONSTER_POSX]=0;
			arraySlimeMonsterCountId[iCount][MONSTER_POSY]=0;
			arraySlimeMonsterCountId[iCount][MONSTER_STEPX]=2;
			arraySlimeMonsterCountId[iCount][MONSTER_STEPY]=2;			
			
			arraySlimeMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10; //should be greater than MONSTER_ANIMATION_DELAY_COUNT_MAX
			arraySlimeMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=8;		

			arraySlimeMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arraySlimeMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=5;		

			arraySlimeMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arraySlimeMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=5;		
			
			arraySlimeMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;	
		}
		
		for (iCount=0; iCount<iMiniBossMonsterCountMax; iCount++) {
			arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("miniBossMonsterImageId"+iCount);
			
			arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";			
			arrayMiniBossMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;

			arrayMiniBossMonsterCountId[iCount][MONSTER_POSX]=0;
			arrayMiniBossMonsterCountId[iCount][MONSTER_POSY]=0;
			arrayMiniBossMonsterCountId[iCount][MONSTER_STEPX]=2;
			arrayMiniBossMonsterCountId[iCount][MONSTER_STEPY]=2;			
			
			arrayMiniBossMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=0;//10; //should be greater than MONSTER_ANIMATION_DELAY_COUNT_MAX
			arrayMiniBossMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5; //8

			arrayMiniBossMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
			arrayMiniBossMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=5;		

			arrayMiniBossMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
			arrayMiniBossMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=5;		
			
			arrayMiniBossMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;	
		}		
		
		for (iCurrParticleEffectCount=0; iCurrParticleEffectCount<iCurrParticleEffectCountMax; iCurrParticleEffectCount++) {
			var particleEffectImage = document.getElementById("particleEffectImageId"+iCurrParticleEffectCount);
			particleEffectImage.style.visibility="hidden";
		}
		
/*		
		for (iRowCount=0; iRowCount<iRowCountMax; iRowCount++) {
			for (iColumnCount=0; iColumnCount<iColumnCountMax; iColumnCount++) {
				arrayHasVisitedRoom[iRowCount][iColumnCount]=0;
			}
		}
*/		
		
		//added by Mike, 20231121
////		var mouseInputImage = document.getElementById("mouseInputImageId");

		var iTitleImageWidth = (titleImage.clientWidth);
		var iTitleImageHeight = (titleImage.clientHeight);
/*
		titleImage.style.top = (iVerticalOffsetInnerScreen+0+iStageMaxHeight/3 -iTitleImageHeight/2)+"px";
		titleImage.style.left = 0+iHorizontalOffset+iStageMaxWidth/2 -iTitleImageWidth/2 +"px";
*/
/*
		titleImage.style.top = (iVerticalOffsetInnerScreen)+"px";
		titleImage.style.left = 0+iHorizontalOffset +"px";
*/		
		
		titleImage.style.top = (iVerticalOffsetInnerScreen+0+iStageMaxHeight/2 -iTitleImageHeight/2)+"px";

		titleImage.style.left = 0+iHorizontalOffset+iStageMaxWidth/2 -iTitleImageWidth/2 +"px";

		
		//---------------		

		iTextTimeDivWidth = (textTimeDiv.clientWidth)+iTextTimeDivWidthOffset;
		//iTextTimeDivWidth = "00:00".length*32; //32px font
		
		textTimeDiv.style.left = iHorizontalOffset+iStageMaxWidth-iTextTimeDivWidth*0.60+"px";
		textTimeDiv.style.top= (0)+"px";
			
		iStartTimeInMilliseconds=Date.now();
	
		if (bIsHeroInTank) {
			iImageFrameWidth=iImageFrameWidthLarge;
		}
		else {
			iImageFrameWidth=iImageFrameWidthDefault;
		}
		
		mainImageTilePosX=iStageMaxWidth/2-iImageFrameWidth/2;
		mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeight;

		mainImageTile.style.left = (iHorizontalOffset+mainImageTilePosX)+"px";
		mainImageTile.style.top = (iVerticalOffsetInnerScreen+mainImageTilePosY)+"px";
		
		//added by Mike, 20231124
		mainImageTileTankBody.style.left = mainImageTile.style.left;
		mainImageTileTankBody.style.top = mainImageTile.style.top;

		//added by Mike, 20231124
		mainImageTileHeroBody.style.left = mainImageTile.style.left;
		mainImageTileHeroBody.style.top = mainImageTile.style.top;

		//cat body
		//mainImageTileTankBody.style.objectPosition = "-" + 128 + "px -" + 192 + "px";
		//mainImageTileTankBody.style.objectPosition = "-" + 0 + "px -" + 0 + "px";
		//mainImageTileTankBody.style.objectPosition = "-" + 0 + "px -" + 192 + "px";

		mainImageTileTankBody.style.objectPosition = "-" + 0 + "px -" + iImageFrameHeightLarge*3 + "px";
		
		//mainImageTileHeroBody.style.objectPosition = "-" + 0 + "px -" + iImageFrameHeight*3 + "px";
		mainImageTileHeroBody.style.objectPosition = "-" + 0 + "px -" + iImageFrameHeightLarge*3 + "px";

		//mainImageTile.style.objectPosition = "-" + iImageFrameWidth*3 + "px -" + iImageFrameHeight*3 + "px";
		
		if (bIsHeroInTank) {
			mainImageTile.style.objectPosition = "-" + iImageFrameWidthLarge*3 + "px -" + iImageFrameHeightLarge*3 + "px";
		}
		else {
			mainImageTile.style.objectPosition = "-" + iImageFrameWidthLarge*3 + "px -" + iImageFrameHeightLarge*3 + "px";
		}
		

		mainImageTileProjectile.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
		mainImageTileProjectilePosX = mainImageTile.style.left;
		mainImageTileProjectilePosY = mainImageTile.style.top;

		//mainImageTileFireballProjectile.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
		mainImageTileFireballProjectile.style.objectPosition = "-" + 0 + "px -" + 32*2 + "px";
		mainImageTileFireballProjectilePosX = 0+"px"; //mainImageTile.style.left;
		mainImageTileFireballProjectilePosY = 0+"px"; //mainImageTile.style.top;

		mainImageTileFireballProjectileHold.style.objectPosition = "-" + 0 + "px -" + iImageFrameHeight*3 + "px";
		
		iBossMonsterImageTileStepAngle=-70; //facing left door of Boss Room
		//flip vertically;
		iBossMonsterImageTileStepAngle=(iBossMonsterImageTileStepAngle+180)%360;		
		bossMonsterImageTile.style.transform = "rotate("+iBossMonsterImageTileStepAngle+"deg)";	
		bossMonsterImageTile.style.transformOrigin = "12.5% 12.5%"; 
				
		var iTextEnterDivWidth = (textEnterDiv.clientWidth);
		var iTextEnterDivHeight = (textEnterDiv.clientHeight);

		textEnterDiv.style.left = 0+iHorizontalOffset+iStageMaxWidth/2 -iTextEnterDivWidth/2 +"px";

		textEnterDiv.style.top = 0+iStageMaxHeight-iTextEnterDivHeight*2+"px";

		//alert ("textEnterDiv.style.left: "+textEnterDiv.style.left);
		//alert ("textEnterDiv.style.top: "+textEnterDiv.style.top);

		textEnterDiv.style.visibility="visible";

		iTransitionScale=1;
		
		textEnterDiv.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";	

/*		//removed by Mike, 20251119		
		mouseInputImage.style.left = (iHorizontalOffset+iStageMaxWidth/2-iTextEnterDivWidth/2+iMouseInputImageWidth/2)+"px";
		
		mouseInputImage.style.top = (iVerticalOffsetInnerScreen+iStageMaxHeight+iTextEnterDivHeight/2)+"px";
		mouseInputImage.style.objectPosition = "-" + 0 + "px -" + 192 + "px";
*/


/*
		mainImageMonsterPosX=iHorizontalOffset+iStageMaxWidth/2-iMonsterTileWidth;
		mainImageMonsterPosY=iVerticalOffsetInnerScreen+0-iMonsterTileHeight;
*/

		bHasReachedDestinationY=false;
		bHasReachedDestinationX=false;		
		
		iCurrHeroLife=iCurrHeroLifeMax;
		iCurrBossMonsterLife=iCurrBossMonsterLifeMax;
		
		iCurrHeroDeathCount=0;
		iCurrPearlCount=0; //debug; change this;
		iCurrMonsterDeathCount=0;//998;//0;
				
		//resetProjectile()				
		
		//added by Mike, 20251120
		setDustEffectPosition(mainImageTilePosX, mainImageTilePosY);
		setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,0);
	}

  function setExplosionEffectPosition(iInputX, iInputY) {
    var explosionEffectImage = document.getElementById("explosionEffectImageId");

    if (explosionEffectImage.style.visibility=="visible") {
      return;
    }

    explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";

	explosionEffectImage.style.transform = "scale(0.5,0.5)";	

    explosionEffectImage.style.visibility="visible";
	
	iExplosionEffectAnimationDelayCount=iExplosionEffectAnimationDelayCountMax;

	iExplosionEffectAnimationCount=-1; //0;

    explosionEffectImage.style.left = iInputX-128-iImageExplosionEffectAnimationWidth/2;
    explosionEffectImage.style.top = iInputY-128-iImageExplosionEffectAnimationHeight/2;
  }
  
  function setExplosionEffectPositionLarge(iInputX, iInputY) {
    var explosionEffectImage = document.getElementById("explosionEffectImageId");

    if (explosionEffectImage.style.visibility=="visible") {
      return;
    }

    explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";

	//explosionEffectImage.style.transform = "scale(0.5,0.5)";	
	
	//set back to default scale
	explosionEffectImage.style.transform = "scale(1,1)";

    explosionEffectImage.style.visibility="visible";
	
	iExplosionEffectAnimationDelayCount=iExplosionEffectAnimationDelayCountMax;

	iExplosionEffectAnimationCount=-1; //0;

    explosionEffectImage.style.left = iInputX-iImageExplosionEffectAnimationWidth/2;//-128-iImageExplosionEffectAnimationWidth/2;
    explosionEffectImage.style.top = iInputY-iImageExplosionEffectAnimationHeight/2;//-128-iImageExplosionEffectAnimationHeight/2;
  }  

  function setFireballExplosionEffectPosition(iInputX, iInputY) {
    var fireballExplosionEffectImage = document.getElementById("fireballExplosionEffectImageId"); 
	
    if (fireballExplosionEffectImage.style.visibility=="visible") {
      return;
    }

    //explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";
    fireballExplosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
	
	fireballExplosionEffectImage.style.transform = "scale(0.5,0.5)";	

    fireballExplosionEffectImage.style.visibility="visible";
	
	iFireballExplosionEffectAnimationDelayCount=iFireballExplosionEffectAnimationDelayCountMax;

	iFireballExplosionEffectAnimationCount=-1; //0;

    fireballExplosionEffectImage.style.left = iInputX-128-iImageFireballExplosionEffectAnimationWidth/2;
    fireballExplosionEffectImage.style.top = iInputY-128-iImageFireballExplosionEffectAnimationHeight/2;
	
  }
  
  function setFireballExplosionEffectPositionLarge(iInputX, iInputY) {
    var fireballExplosionEffectImage = document.getElementById("fireballExplosionEffectImageId"); 
	
    if (fireballExplosionEffectImage.style.visibility=="visible") {
      return;
    }

    //explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";
    fireballExplosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
	
	//fireballExplosionEffectImage.style.transform = "scale(0.5,0.5)";	
	
	//set back to default scale
	fireballExplosionEffectImage.style.transform = "scale(1,1)";	

    fireballExplosionEffectImage.style.visibility="visible";
	
	iFireballExplosionEffectAnimationDelayCount=iFireballExplosionEffectAnimationDelayCountMax;

	iFireballExplosionEffectAnimationCount=-1; //0;

    fireballExplosionEffectImage.style.left = iInputX-iImageFireballExplosionEffectAnimationWidth/2;//-128-iImageFireballExplosionEffectAnimationWidth/2;
    fireballExplosionEffectImage.style.top = iInputY-iImageFireballExplosionEffectAnimationHeight/2;//-128-iImageFireballExplosionEffectAnimationHeight/2;
	
  }

  function setGrassCutEffectPosition(iInputX, iInputY) {
    var grassCutEffectImage = document.getElementById("grassCutEffectImageId");

    if (grassCutEffectImage.style.visibility=="visible") {
      return;
    }

	//var iFrameY=0;
	var iFrameY=iImageFrameHeight*2;

    grassCutEffectImage.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";

    grassCutEffectImage.style.visibility="visible";
	
	iGrassCutEffectAnimationDelayCount=iGrassCutEffectAnimationDelayCountMax;
	iGrassCutEffectAnimationCount=-1; //0;

/*
    grassCutEffectImage.style.left = iInputX-iImageFrameWidthDefault-iImageGrassCutEffectAnimationWidth/2+"px";
    grassCutEffectImage.style.top = iInputY-iImageFrameHeightDefault-iImageGrassCutEffectAnimationHeight/2+"px";
*/	

    grassCutEffectImage.style.left = iInputX;
    grassCutEffectImage.style.top = iInputY;
	
  }
  
  //currently not used
  function setPearlPosition(iInputX, iInputY) {
    var pearlImageTile = document.getElementById("pearlImageTileId");

    if (pearlImageTile.style.visibility=="visible") {
      return;
    }

	var iFrameY=0;//iImageFrameHeight*2;

    pearlImageTile.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";

    pearlImageTile.style.visibility="visible";
	
	iPearlAnimationDelayCount=iPearlAnimationDelayCountMax;
	iPearlAnimationCount=-1; //0;

    pearlImageTile.style.left = iInputX;
    pearlImageTile.style.top = iInputY;	
  }  
  
  //added by Mike, 20231129
  function setCityExplosionEffectPosition(iInputX, iInputY) {
    var explosionEffectImage = document.getElementById("explosionEffectToCityImageId");

    if (explosionEffectImage.style.visibility=="visible") {
      return;
    }
	
	//edited by Mike, 20231127
    //explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";
    explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 128 + "px";

    explosionEffectImage.style.visibility="visible";

    iMonsterExplosionEffectAnimationDelayCount=iMonsterExplosionEffectAnimationDelayCountMax;

    iMonsterExplosionEffectAnimationCount=-1; //0;

    explosionEffectImage.style.left = iInputX-iImageExplosionEffectAnimationWidth/2;

    explosionEffectImage.style.top = iInputY-iImageExplosionEffectAnimationHeight/2;
  }

	//added by Mike, 20251116
	function setSpiralStrokeEffectPosition(iInputX, iInputY) {
		iSpiralStrokeEffectAnimationDelayCount=0;
		iSpiralStrokeEffectAnimationCount=0;
		
		iSpiralStrokeEffectPosX=iInputX;
		iSpiralStrokeEffectPosY=iInputY;
		
		bHasShotSniper=true;
	}

	//added by Mike, 20251117
	function setMonsterDeathAnimationPosition(iInputX, iInputY, iMonsterType) {
		//MONSTER_TYPE_VAL_SKEL
		
		switch (iMonsterType) {
			case MONSTER_TYPE_VAL_BOMB: 
				for (iCurrParticleEffectCount=0; iCurrParticleEffectCount<iCurrParticleEffectCountMax; iCurrParticleEffectCount++) {
					var particleEffectImage = document.getElementById("particleEffectImageId"+iCurrParticleEffectCount);
					particleEffectImage.style.left=iInputX+iImageFrameWidth/2+"px";
					particleEffectImage.style.top=iInputY+iImageFrameHeight/2+"px";
				
					particleEffectImage.style.visibility="visible";

				}
				
				iInitialParticleEffectPosX=iInputX;
				iInitialParticleEffectPosY=iInputY;
				
				iCurrParticleEffectOpacity=1;
				iCurrParticleEffectAnimationCycleCount=0;
				iTransitionScale=1;
				break;
		}
	}

	//added by Mike, 20251123
	function setBombMonsterPosition(iInputX, iInputY, iRunningWraithCount) {
		//for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
			arrayBombMonsterCountId[iRunningWraithCount][MONSTER_OBJECT]=document.getElementById("bombMonsterImageId"+iRunningWraithCount);

			if (arrayBombMonsterCountId[iRunningWraithCount][MONSTER_IS_ACTIVE]) {
				//alert(arrayBombMonsterCountId[iCount][MONSTER_IS_ACTIVE]);
				return;
			}
			else {
				arrayBombMonsterCountId[iRunningWraithCount][MONSTER_POSX]=iInputX;
				arrayBombMonsterCountId[iRunningWraithCount][MONSTER_POSY]=iInputY;
				arrayBombMonsterCountId[iRunningWraithCount][MONSTER_IS_ACTIVE]=true;
				arrayBombMonsterCountId[iRunningWraithCount][MONSTER_OBJECT].style.visibility="visible";
			}
	}


	//added by Mike, 20240511
	function setDustEffectPosition(iInputX, iInputY) {
		var dustEffectImage = document.getElementById("dustEffectImageId");

		if (dustEffectImage.style.visibility=="visible") {
		  return;
		}

		dustEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";

		dustEffectImage.style.visibility="visible";

		iDustEffectAnimationDelayCount=iDustEffectAnimationDelayCountMax;

		iDustEffectAnimationCount=-1; //0;
/*
alert("iInputX: "+iInputX);
alert("iInputY: "+iInputY);
*/

/*
		dustEffectImage.style.left = iInputX;//+iImageDustEffectAnimationWidth/2;
		dustEffectImage.style.top = iInputY+iImageDustEffectAnimationHeight/4; //near feet
*/	
	
		if (bIsHeroFacingLeftOrRight) {
			//if facing right;
			if (!bIsHeroFacingLeft) {
				dustEffectImage.style.left = iInputX+iImageFrameWidthLarge/2+"px";
				dustEffectImage.style.top = iInputY+iImageDustEffectAnimationHeight/4+"px";
			}
			else {
				dustEffectImage.style.left = iInputX+"px";
				dustEffectImage.style.top = iInputY+iImageDustEffectAnimationHeight/4+"px";
			}
		}
		
		else if (bIsHeroFacingUpOrDown) {
			if (!bIsHeroFacingUp) {
				//OK
				dustEffectImage.style.left = iInputX+"px";
				dustEffectImage.style.top = iInputY+iImageDustEffectAnimationHeight/4+"px";
			}
			else {
				dustEffectImage.style.left = iInputX+"px";
				dustEffectImage.style.top = iInputY-iImageFrameHeightLarge/8+"px";
			}
		}
	}
	
	//added by Mike, 20251115
	function setSnowEffectPosition(iInputX, iInputY, iCount) {
		var snowEffectImage = document.getElementById("snowEffectImageId"+iCount);

		if (snowEffectImage.style.visibility=="visible") {
		  return;
		}

		snowEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";

		snowEffectImage.style.visibility="visible";

		iSnowEffectAnimationDelayCount=iSnowEffectAnimationDelayCountMax;

		iSnowEffectAnimationCount=-1; //0;
/*
alert("iInputX: "+iInputX);
alert("iInputY: "+iInputY);
*/
		snowEffectImage.style.left = iInputX+"px";
		snowEffectImage.style.top = iInputY+"px";
	}	
	
	function setInitFireballEffectPosition(iInputX, iInputY) {
		var initFireballEffectImage = document.getElementById("initFireballEffectImageId");

		if (initFireballEffectImage.style.visibility=="visible") {
		  return;
		}
		
		var iFrameY=128*3;

		initFireballEffectImage.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";

		initFireballEffectImage.style.visibility="visible";

		iInitFireballEffectAnimationDelayCount=iInitFireballEffectAnimationDelayCountMax;

		iInitFireballEffectAnimationCount=-1; //0;
/*
alert("iInputX: "+iInputX);
alert("iInputY: "+iInputY);
*/
		initFireballEffectImage.style.left = iInputX-iImageFrameWidthLarge/2-iImageFrameWidthDefault/2;
		initFireballEffectImage.style.top = iInputY-iImageFrameHeightLarge/2-iImageFrameHeightDefault/2;
	}
	
  
	//added by Mike, 20240513
	function setHeroAttackEffectPosition(iInputX, iInputY) {
		var heroAttackEffectImage = document.getElementById("heroAttackEffectImageId");

		if (heroAttackEffectImage.style.visibility=="visible") {
		  return;
		}

		heroAttackEffectImage.style.objectPosition = "-" + 0 + "px -" + 0 + "px";
		heroAttackEffectImage.style.visibility="visible";

		iHeroAttackEffectAnimationDelayCount=iHeroAttackEffectAnimationDelayCountMax;
		iHeroAttackEffectAnimationCount=-1; //0;

		heroAttackEffectImage.style.left = iInputX;
		heroAttackEffectImage.style.top = iInputY;		
	} 
	
	function setWalkOnSnowEffectPosition(iInputX, iInputY, arrayWalkOnSnowEffectCount) {	
			arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+arrayWalkOnSnowEffectCount);

			if (arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility=="visible") {
			  return;
			}

			arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iImageFrameHeightDefault + "px";
			
			arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="visible";
			
			//alert("HALLO!"+arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility);

			arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT_MAX]=10;//5;
			arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT]=arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT_MAX];
			arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]=-1;

			if (bIsHeroFacingLeftOrRight) {
				//if facing right;
				if (!bIsHeroFacingLeft) {
					if (bIsHeroFacingUpOrDown) {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
					}
					else {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.left = iInputX;

						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.top = iInputY+iImageFrameHeightLarge-iImageFrameWidthDefault/2-iImageFrameWidthDefault/4;
					}
				}
				//facing left
				else {
					if (bIsHeroFacingUpOrDown) {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
					}
					else {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.left = iInputX+iImageFrameWidthLarge/2-iImageFrameWidthDefault/2;

						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.top = iInputY+iImageFrameHeightLarge-iImageFrameWidthDefault/2-iImageFrameWidthDefault/4;
					}
				}
			}
			
			else if (bIsHeroFacingUpOrDown) {
/*			
				if (!bIsHeroFacingUp) {
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.left = iInputX+iImageFrameWidthDefault/2;//-(iImageFrameWidthDefault)*(arrayWalkOnSnowEffectCount);

					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.top = iInputY+iImageFrameHeightLarge-iImageFrameWidthDefault/2-iImageFrameWidthDefault;
				}
				//facing up
				else {
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.left = iInputX+iImageFrameWidthDefault/2;

					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.top = iInputY+iImageFrameHeightLarge-iImageFrameHeightDefault/2-iImageFrameHeightDefault/4;
				}
*/
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.left=iInputX;
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.top=iInputY;
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
			}			
		//}
	} 	
  
  	//added by Mike, 20231128
	function executeEnterClickAnimation() {	
		var textEnterDiv = document.getElementById("textEnterDivId");

			
		if (iTitlePressStartEffectDelayCount<iTitlePressStartEffectDelayCountMax) {
			iTitlePressStartEffectDelayCount++;
			return;	
		}
		else {
			iTitlePressStartEffectDelayCount=0;
		}
		
		//textEnterDiv.innerHTML = "START";
		//textEnterDiv.innerHTML = "<font color='red'>START</font>";

		//alert(iTransitionScale);
		
		if (iTransitionScale<1) {
			iTransitionScale+=0.1
		}
		else if (iTransitionScale>0) {
			iTransitionScale-=0.1
		}

		textEnterDiv.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";	
	}
	
	//added by Mike, 20231121
	function executeMouseClickAnimation() {
		var mouseInputImage = document.getElementById("mouseInputImageId");
		mouseInputImage.style.visibility="visible";

		if (iMouseAnimationDelayCount==iMouseAnimationDelayCountMax) {
			iMouseAnimationCount=(iMouseAnimationCount+1)%3; //last hidden

			iMouseAnimationDelayCount=0;
		}
		else {
			iMouseAnimationDelayCount++;
		}

		if (iMouseAnimationCount==0) { 
			mouseInputImage.style.objectPosition = "-" + 0 + "px -" + 192 + "px";
		}
		else if (iMouseAnimationCount==1) { 
			mouseInputImage.style.objectPosition = "-" + (iImageFrameWidth*2) + "px -" + 192 + "px";
		}
		else {
			mouseInputImage.style.objectPosition = "-" + (iImageFrameWidth*2)*2 + "px -" + 192 + "px";
		}
	}

	function drawSavedWolf() {
		var wolfImageTile = document.getElementById("wolfImageTileId");
/*		
		//if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
		if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
			wolfImageTile.style.visibility="visible";
		}
		else {
			wolfImageTile.style.visibility="hidden";
		}
*/		

/*
		if (iHeroAnimationDelayCount==iHeroAnimationDelayCountMax) {
			iHeroAnimationCount=(iHeroAnimationCount+1)%4; //last hidden

			iHeroAnimationDelayCount=0;
			
			//-----------------------------
			
			//alert(iHeroAnimationCount);
			
			//there are four walk-in snow images with also four frames; 
			//setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,iHeroAnimationCount); 
			//edited by Mike, 20251120
			setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,0);			
			//setWalkOnSnowEffectPosition(parseInt(mainImageTileHeroBody.style.left),parseInt(mainImageTileHeroBody.style.top),0); 
			
			//-----------------------------
		
		}
		else {
			iHeroAnimationDelayCount++;
		}
*/

		var iFrameY=0;
		var iFrameXOffset=0;

		wolfImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*1 + "px -" + iFrameY + "px";
		
		wolfImageTile.style.left=0+iStageMaxWidth/2-iImageFrameWidthLarge/2;
		wolfImageTile.style.top=0+iStageMaxHeight*0.75;		
	}	

	//added by Mike, 20241103
	function drawInjuredWolf() {
		var wolfImageTile = document.getElementById("wolfImageTileId");
		
		if ((bHasBeatenStage1Boss)||(iCurrMapLocation!=55)) {
			wolfImageTile.style.visibility="hidden";
		}
		else {
			wolfImageTile.style.visibility="visible";
		}
		
		var iFrameY=0;
		var iFrameXOffset=0;

		wolfImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*0 + "px -" + iFrameY + "px";
		
		wolfImageTile.style.left=0+iStageMaxWidth/2-iImageFrameWidthLarge/2;
		wolfImageTile.style.top=0+iStageMaxHeight*0.1;		
	}	
	
	//added by Mike, 20241103
	function executeHeroWalkingAnimation() {
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		bIsHeroWalking=true;

		if (iHeroAnimationDelayCount==iHeroAnimationDelayCountMax) {
			iHeroAnimationCount=(iHeroAnimationCount+1)%4; //last hidden

			iHeroAnimationDelayCount=0;
			
			//-----------------------------
			
			//alert(iHeroAnimationCount);
			
			//there are four walk-in snow images with also four frames; 
			//setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,iHeroAnimationCount); 
			//edited by Mike, 20251120
			setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,0);			
			//setWalkOnSnowEffectPosition(parseInt(mainImageTileHeroBody.style.left),parseInt(mainImageTileHeroBody.style.top),0); 
			
			//-----------------------------
		
		}
		else {
			iHeroAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;

				
		//added by Mike, 20251102
/*
		iImageFrameWidth=64;
		iImageFrameHeight=64;
*/		
/*
		if (bIsHeroInRiver){
			if (bIsHeroFacingLeft) {
				iFrameY=iImageFrameHeight*0;
			}
			else {
				iFrameY=iImageFrameHeight*1;
			}
			
			iFrameXOffset=iImageFrameWidth;
		}
		else {
*/


			//if (mainImageTileHeroBody.style.visibility!="hidden") {
			//if (!hasInitMapLocation) {
				if (bIsHeroFacingLeftOrRight) {
					if (bIsHeroFacingLeft) {
						iFrameY=iImageFrameHeightLarge*1;

						if (bIsHeroFacingUpOrDown) {
							if (!bIsHeroFacingUp) {
								iFrameY=iImageFrameHeightLarge*2;
							}
							else {
								iFrameY=iImageFrameHeightLarge*4;
							}				
						}
					}
					else {
						iFrameY=iImageFrameHeightLarge*0;

						if (bIsHeroFacingUpOrDown) {
							if (!bIsHeroFacingUp) {
								iFrameY=iImageFrameHeightLarge*3;
							}
							else {
								iFrameY=iImageFrameHeightLarge*5;
							}
						}
					}
				}
				else {
					if (bIsHeroFacingUpOrDown) {
						if (!bIsHeroFacingUp) {
							iFrameY=iImageFrameHeightLarge*6;
						}
						else {
							iFrameY=iImageFrameHeightLarge*7;
						}
					}
				}
			//}
			
			//removed by Mike, 20251110
			//mainImageTileHeroBody.style.visibility="visible";

			//iFrameY=iImageFrameHeightLarge*6;//7
			
/*
			//if (bHasFired) {
			//if (iHeroAttackEffectAnimationDelayCount<iHeroAttackEffectAnimationDelayCountMax) {
			if (bHasHeroHitMonster) {
				mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iHeroAnimationCount - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
				
				//alert("DITO!");
				
				//TODO: -add: constant 3; for last animation frame of four frames
				if (iHeroAnimationCount>=3) {
					bHasHeroHitMonster=false;
				}
			}
			else {
*/			

		mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iHeroAnimationCount + "px -" + iFrameY + "px";
	}
	
	//added by Mike, 20251105
	function executeHeroAttackingAnimation() {
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		//edited by Mike, 20251105; from 20251104
		//mainImageTileHeroBody.style.visibility="visible";

		if (iHeroAttackAnimationDelayCount==0) {//iHeroAnimationDelayCountMax) {
			//iHeroAttackAnimationCount=(iHeroAttackAnimationCount+1)%4; //last hidden
			if (iHeroAttackAnimationCount>iHeroAttackAnimationCountMax) {//3) {
				//alert(iHeroAnimationCount);
				iHeroAttackAnimationDelayCount=0;
				iHeroAttackAnimationCount=0;

				bHasHeroHitMonster=false;		
			}
			else {
				iHeroAttackAnimationCount++
			}
		}
		else {
			iHeroAttackAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;

/*		//removed by Mike, 20251106; update animation sprites instead
		if (iHeroAttackComboCount>1) {
			//alert(iHeroAttackComboCount);

			if (!bIsHeroFacingUpOrDown) {
			}
			else {
				//draw the horizontal flip;
				if (bIsHeroFacingLeftPrev==bIsHeroFacingLeft) {
					if (bIsHeroFacingLeft) {
						bIsHeroFacingLeft=false;
					}
					else {
						bIsHeroFacingLeft=true;
					}
				}
			}
		}
		bIsHeroFacingLeftPrev=bIsHeroFacingLeft;
*/

				
		if (bIsHeroFacingLeft) {
			iFrameY=iImageFrameHeightLarge*1;
			
			if (bIsHeroFacingUpOrDown) {
				if (!bIsHeroFacingUp) {
					iFrameY=iImageFrameHeightLarge*2;
				}
				else {
					iFrameY=iImageFrameHeightLarge*4;
				}				
			}
		}
		else {
			iFrameY=iImageFrameHeightLarge*0;

			if (bIsHeroFacingUpOrDown) {
				if (!bIsHeroFacingUp) {
					iFrameY=iImageFrameHeightLarge*3;
				}
				else {
					iFrameY=iImageFrameHeightLarge*5;
				}
			}
		}
		
		

		//if (bHasFired) {
		//if (iHeroAttackEffectAnimationDelayCount<iHeroAttackEffectAnimationDelayCountMax) {
		//if (bHasHeroHitMonster) {

		////mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iHeroAnimationCount - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
		
		//alert("DITO!");
/*				
		//TODO: -add: constant 3; for last animation frame of four frames
		if (iHeroAttackAnimationCount>=3) {

			//alert("DITO! "+iHeroAnimationCount);
			iHeroAttackAnimationDelayCount=0;
			iHeroAttackAnimationCount=0;//-1; //3;

			bHasHeroHitMonster=false;

			mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*1 - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
		}
		else {
*/		
			
			//alert(iHeroAttackAnimationCount);
		
			mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*(iHeroAttackAnimationCount-1) - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
/*			
			//mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*(iHeroAttackAnimationCount-1) - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";
		}
*/		
	}

	//added by Mike, 20251105
	function executeHeroIdleAnimation() {
		//resetProjectile();

		if (iHeroAnimationDelayCount==iHeroAnimationDelayCountMax) {
			iHeroAnimationCount=(iHeroAnimationCount+1)%4; //last hidden

			//alert(iHeroAnimationCount);

			resetProjectile();

			iHeroAnimationDelayCount=0;
		}
		else {
			iHeroAnimationDelayCount++;
		}

	}

	function executeTankWalkingAnimation() {
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		mainImageTileTankBody.style.visibility="visible";

		if (iHeroAnimationDelayCount==iHeroAnimationDelayCountMax) {
			iHeroAnimationCount=(iHeroAnimationCount+1)%3; //last hidden

			iHeroAnimationDelayCount=0;
		}
		else {
			iHeroAnimationDelayCount++;
		}

		var iFrameY=0;
		//destination to the left of hero projectile
		if (bIsHeroFacingLeft) {
			iFrameY=iImageFrameHeightLarge*2;//64*2; 128;
		}
		else {
			iFrameY=iImageFrameHeightLarge*3;//64*3; 192;
		}
		
		if (iHeroAnimationCount==0) { 
			mainImageTileTankBody.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iHeroAnimationCount==1) { 
			mainImageTileTankBody.style.objectPosition = "-" + iImageFrameWidthLarge + "px -" + iFrameY + "px";
		}
		else {
			mainImageTileTankBody.style.objectPosition = "-" + iImageFrameWidthLarge*2 + "px -" + iFrameY + "px";
		}
	}	
	
	function executeRiverAnimation() {
		var riverImageRight = document.getElementById("riverImageRightId");
		
		riverImageRight.style.visibility="visible";

		//iMonsterAnimationDelayCountMax=15;

/*		
		if (iRiverAnimationDelayCount>=iRiverAnimationDelayCountMax) {
			iRiverAnimationCount=(iRiverAnimationCount+1)%2; //3; //last hidden

			iRiverAnimationDelayCount=0;						
		}
		else {
			iRiverAnimationDelayCount++;
		}

		//alert("DITO: "+iRiverAnimationCount);
		//alert("iRiverAnimationDelayCount: "+iRiverAnimationDelayCount);

		var iFrameY=0;
		//var iRiverImageFrameWidth=130;
		//iRiverImageFrameWidth=130;
		
		//var iFrameY=iImageFrameHeight*2;//64*2; 128;

		//currently two frames only
		if (iRiverAnimationCount==0) { 
			riverImageRight.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else  { 
			riverImageRight.style.objectPosition = "-" + iRiverImageFrameWidth + "px -" + iFrameY + "px";
		}
*/
			var iFrameY=0;

			//Game Off 2021; TUGON
			if (iRiverAnimationDelayCount<10) {//5) {
				riverImageRight.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
			}
			else {
				if (iRiverAnimationDelayCount>20) {//10) {
					iRiverAnimationDelayCount=0;
				}
				riverImageRight.style.objectPosition = "-" + iRiverImageFrameWidth + "px -" + iFrameY + "px";
			}			
			iRiverAnimationDelayCount++;				
	}
	
	
	//giant version; last boss
	//walking or flying
	function executeDemonMonsterWalkingAnimation() {
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");	
		demonMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		if (iDemonMonsterAnimationDelayCount>=iDemonMonsterAnimationDelayCountMax) {
			iDemonMonsterAnimationCount=(iDemonMonsterAnimationCount+1)%iDemonMonsterAnimationCountMax;//4; //last hidden


			iDemonMonsterAnimationDelayCount=0;

			//==============================
			//AI; movement
			if (demonMonsterTileStepDelay>=demonMonsterTileStepDelayMax) {
				demonMonsterTileStepDelay=0;
				
				if (currDemonMonsterTileState==WALKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					currDemonMonsterTileState=IDLE_STATE;
				}
				else {
					currDemonMonsterTileState=WALKING_STATE;
				}
			}
			else {
				demonMonsterTileStepDelay++;
			}			
			
			if (currDemonMonsterTileState==WALKING_STATE) {
				if (demonMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {
					demonMonsterImageTilePosY+=demonMonsterTileStepY;
				}
				else if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {
					demonMonsterImageTilePosY-=demonMonsterTileStepY;
				}
					
				demonMonsterImageTile.style.top=demonMonsterImageTilePosY+"px";
				
				if (demonMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {

					demonMonsterImageTilePosX+=demonMonsterTileStepX;
				}
				else if (demonMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {
					demonMonsterImageTilePosX-=demonMonsterTileStepX;
				}

				demonMonsterImageTile.style.left=demonMonsterImageTilePosX+"px";	
			}
			
			//==============================

		}
		else {
			iDemonMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;
		
		//alert("skelMonsterImageTile.style.left: "+skelMonsterImageTile.style.left);		
		//alert("mainImageTileHeroBody.style.left+iImageFrameHeightLarge: "+mainImageTileHeroBody.style.left+iImageFrameHeightLarge);
		
		
		//if skel is to the left of hero
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {
		//if hero is to the right of skel
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {		


		if (demonMonsterImageTilePosX+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (demonMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);

		if (currDemonMonsterTileState==WALKING_STATE) {
			demonMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iDemonMonsterAnimationCount + "px -" + iFrameY + "px";
		}
		else { //IDLE_STATE
			demonMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*4 + "px -" + iFrameY + "px";
		}		
	}	
	
	//giant version; boss
	function executeSkelMonsterWalkingAnimation() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");	
		skelMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		if (iSkelMonsterAnimationDelayCount>=iSkelMonsterAnimationDelayCountMax) {
			iSkelMonsterAnimationCount=(iSkelMonsterAnimationCount+1)%4; //last hidden

			iSkelMonsterAnimationDelayCount=0;

			//==============================
			//AI; movement
			if (skelMonsterTileStepDelay>=skelMonsterTileStepDelayMax) {
				skelMonsterTileStepDelay=0;
				
				if (currSkelMonsterTileState==WALKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					currSkelMonsterTileState=IDLE_STATE;
				}
				else {
					currSkelMonsterTileState=WALKING_STATE;
				}
			}
			else {
				skelMonsterTileStepDelay++;
			}			
			
			if (currSkelMonsterTileState==WALKING_STATE) {
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge<mainImageTilePosY) {
				
				
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge<mainImageTilePosY) {
				if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/2<mainImageTilePosY) {
					skelMonsterImageTilePosY+=skelMonsterTileStepY;
				}
				//else if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge) {
				else if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {
					skelMonsterImageTilePosY-=skelMonsterTileStepY;
				}
					
				skelMonsterImageTile.style.top=skelMonsterImageTilePosY+"px";
				
				//if (skelMonsterImageTilePosX<mainImageTilePosX) {
				if (skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/2<mainImageTilePosX) {

					skelMonsterImageTilePosX+=skelMonsterTileStepX;
				}
				//else {
				else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {
					skelMonsterImageTilePosX-=skelMonsterTileStepX;
				}

				skelMonsterImageTile.style.left=skelMonsterImageTilePosX+"px";	
			}
			
			//==============================

		}
		else {
			iSkelMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;

		if (skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);

		//boss
		iFrameY*=2;

		if (currSkelMonsterTileState==WALKING_STATE) {
			skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLargeBoss*iSkelMonsterAnimationCount + "px -" + iFrameY + "px";
		}
		else { //IDLE_STATE
			skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLargeBoss*4 + "px -" + iFrameY + "px";
		}
	}	
	
	//added by Mike, 20251104
	//normal size
	function executeSkelMonsterWalkingAnimationOK() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");	
		skelMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		if (iSkelMonsterAnimationDelayCount>=iSkelMonsterAnimationDelayCountMax) {
			iSkelMonsterAnimationCount=(iSkelMonsterAnimationCount+1)%4; //last hidden

			iSkelMonsterAnimationDelayCount=0;

			//==============================
			//AI; movement
			if (skelMonsterTileStepDelay>=skelMonsterTileStepDelayMax) {
				skelMonsterTileStepDelay=0;
				
				if (currSkelMonsterTileState==WALKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					currSkelMonsterTileState=IDLE_STATE;
				}
				else {
					currSkelMonsterTileState=WALKING_STATE;
				}
			}
			else {
				skelMonsterTileStepDelay++;
			}			
			
			if (currSkelMonsterTileState==WALKING_STATE) {
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge<mainImageTilePosY) {
				
				
				//if (skelMonsterImageTilePosY+iImageFrameHeightLarge<mainImageTilePosY) {
				if (skelMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {
					skelMonsterImageTilePosY+=skelMonsterTileStepY;
				}
				//else if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge) {
				else if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {
					skelMonsterImageTilePosY-=skelMonsterTileStepY;
				}
					
				skelMonsterImageTile.style.top=skelMonsterImageTilePosY+"px";
				
				//if (skelMonsterImageTilePosX<mainImageTilePosX) {
				if (skelMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {

					skelMonsterImageTilePosX+=skelMonsterTileStepX;
				}
				//else {
				else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {
					skelMonsterImageTilePosX-=skelMonsterTileStepX;
				}

				skelMonsterImageTile.style.left=skelMonsterImageTilePosX+"px";	
			}
			
			//==============================

		}
		else {
			iSkelMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;
		
		//alert("skelMonsterImageTile.style.left: "+skelMonsterImageTile.style.left);		
		//alert("mainImageTileHeroBody.style.left+iImageFrameHeightLarge: "+mainImageTileHeroBody.style.left+iImageFrameHeightLarge);
		
		
		//if skel is to the left of hero
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {
		//if hero is to the right of skel
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {		


		if (skelMonsterImageTilePosX+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);

		if (currSkelMonsterTileState==WALKING_STATE) {
			skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iSkelMonsterAnimationCount + "px -" + iFrameY + "px";
		}
		else { //IDLE_STATE
			skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*4 + "px -" + iFrameY + "px";
		}
	}

	//giant; boss
	function executeSkelMonsterAttackingAnimation() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");	
		skelMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		if (iSkelMonsterAnimationDelayCount>=0) {
			if (iSkelMonsterAttackAnimationCount>iSkelMonsterAttackAnimationCountMax) {
				iSkelMonsterAttackAnimationCount=0;
				skelMonsterTileAttackDelay=0;
				currSkelMonsterTileState=IDLE_STATE;
			}
			else {
				iSkelMonsterAttackAnimationCount++;
			}
			iSkelMonsterAnimationDelayCount=0;
		}
		else {
			iSkelMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=iImageFrameWidthLarge*4;//0;
		
		if (skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);
		
		//boss
		iFrameY*=2;
		
		skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLargeBoss*(iSkelMonsterAttackAnimationCount-1) + "px -" + iFrameY + "px";
	}

	function executeSkelMonsterAttackingAnimationOK() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");	
		skelMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
/*		
		if (currSkelMonsterTileState!=ATTACKING_STATE) {
			return;
		}
*/

		//alert(iSkelMonsterAttackAnimationCount);

		//if (iSkelMonsterAnimationDelayCount>=iSkelMonsterAnimationDelayCountMax) {
		if (iSkelMonsterAnimationDelayCount>=0) { //iSkelMonsterAnimationDelayCountMax/2) {
		
			//iSkelMonsterAttackAnimationCount=(iSkelMonsterAttackAnimationCount+1);//%4; //last hidden

			//if (iSkelMonsterAttackAnimationCount>=iSkelMonsterAttackAnimationCountMax) {
			if (iSkelMonsterAttackAnimationCount>iSkelMonsterAttackAnimationCountMax) {
				iSkelMonsterAttackAnimationCount=0;
				skelMonsterTileAttackDelay=0;
				currSkelMonsterTileState=IDLE_STATE;
			}
			else {
				iSkelMonsterAttackAnimationCount++;
			}


			iSkelMonsterAnimationDelayCount=0;

/*
			//==============================
			//AI; movement
			if (skelMonsterTileAttackDelay>=skelMonsterTileAttackDelayMax) {
				skelMonsterTileAttackDelay=0;
				
				if (currSkelMonsterTileState==ATTACKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					currSkelMonsterTileState=IDLE_STATE;
				}
				////else {
				////	currSkelMonsterTileState=ATTACKING_STATE;
				////}
			}
			else {
				skelMonsterTileAttackDelay++;
			}			
*/			
		}
		else {
			iSkelMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=iImageFrameWidthLarge*4;//0;
		
		//if skel is to the left of hero
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {
		//if hero is to the right of skel
		//if (skelMonsterImageTile.style.left+iImageFrameWidthLarge<mainImageTileHeroBody.style.left) {		
		if (skelMonsterImageTilePosX+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);
		
		skelMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*(iSkelMonsterAttackAnimationCount-1) + "px -" + iFrameY + "px";
	}

	function executeDemonMonsterAttackingAnimation() {
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");	
		demonMonsterImageTile.style.visibility="visible";
		
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		if (iDemonMonsterAnimationDelayCount>=0) {
			if (iDemonMonsterAttackAnimationCount>(iDemonMonsterAttackAnimationCountMax-1)) {
				iDemonMonsterAttackAnimationCount=0;
				demonMonsterTileAttackDelay=0;
				currDemonMonsterTileState=IDLE_STATE;
			}
			else {
				iDemonMonsterAttackAnimationCount++;
			}

			iDemonMonsterAnimationDelayCount=0;
		}
		else {
			iDemonMonsterAnimationDelayCount++;
		}

		var iFrameY=0;
		var iFrameXOffset=iImageFrameWidthLarge*4;//0;
		
		//if demon is to the left of hero
		if (demonMonsterImageTilePosX+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (demonMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (demonMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (demonMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);
		
		demonMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*(iDemonMonsterAttackAnimationCount-1) + "px -" + iFrameY + "px";
	}


	function executeBatMonsterAttackingAnimation() {
		var batMonsterImageTile = document.getElementById("batMonsterImageId");
		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		batMonsterImageTile.style.visibility="visible";

		if (iBatMonsterAnimationDelayCount>=iBatMonsterAnimationDelayCountMax) {
			//iBatMonsterAnimationCount=(iBatMonsterAnimationCount+1)%iBatMonsterAnimationCountMax;

			if (iBatMonsterAttackAnimationCount>iBatMonsterAttackAnimationCountMax) {
				iBatMonsterAttackAnimationCount=0;
				batMonsterTileAttackDelay=0;
				currBatMonsterTileState=IDLE_STATE;
			}
			else {
				iBatMonsterAttackAnimationCount++;
			}

			iBatMonsterAnimationDelayCount=0;			

/*			
			//==============================
			//AI; movement
			if (batMonsterTileStepDelay>=batMonsterTileStepDelayMax) {
				batMonsterTileStepDelay=0;
				
				if (currBatMonsterTileState==WALKING_STATE) {
					currBatMonsterTileState=IDLE_STATE;
				}
				else {
					currBatMonsterTileState=WALKING_STATE;
				}				

				if (batMonsterImageTilePosY<parseInt(mainImageTile.style.top)) {//mainImageTilePosY) {
					batMonsterImageTilePosY+=batMonsterTileStepY;				
				}
				else {
					batMonsterImageTilePosY-=batMonsterTileStepY;
				}
				
				batMonsterImageTile.style.top=batMonsterImageTilePosY+"px";

				if (batMonsterImageTilePosX<mainImageTilePosX) {
					batMonsterImageTilePosX+=batMonsterTileStepX;
				}
				else {
					batMonsterImageTilePosX-=batMonsterTileStepX;
				}
				
				batMonsterImageTile.style.left=batMonsterImageTilePosX+"px";							
			}
			else {
				batMonsterTileStepDelay++;
			}			
			//==============================
*/			
		}
		else {
			iBatMonsterAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}


		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*2;//64*2; 128;

		//currently two frames only
/*		
		if (iBatMonsterAnimationCount==0) { 
			batMonsterImageTile.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iBatMonsterAnimationCount==1) { 
			batMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
*/		
		
		let iFrameXOffset=0;
		
		batMonsterImageTile.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthDefault*(iBatMonsterAttackAnimationCount) + "px -" + iFrameY + "px";
		
		
/*		
		else {
			batMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";
		}
*/		




	}

	
	function executeBatMonsterWalkingAnimation() {
		var batMonsterImageTile = document.getElementById("batMonsterImageId");
		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		batMonsterImageTile.style.visibility="visible";

		//iMonsterAnimationDelayCountMax=15;
		
		if (iBatMonsterAnimationDelayCount>=iBatMonsterAnimationDelayCountMax) {
			iBatMonsterAnimationCount=(iBatMonsterAnimationCount+1)%2; //3; //last hidden

			iBatMonsterAnimationDelayCount=0;			
			
			//==============================
			//AI; movement
			if (batMonsterTileStepDelay>=batMonsterTileStepDelayMax) {
				batMonsterTileStepDelay=0;
				
				if (currBatMonsterTileState==WALKING_STATE) {
					currBatMonsterTileState=IDLE_STATE;
				}
				else {
					currBatMonsterTileState=WALKING_STATE;
				}				

				if (batMonsterImageTilePosY<parseInt(mainImageTile.style.top)) {//mainImageTilePosY) {
					batMonsterImageTilePosY+=batMonsterTileStepY;				
				}
				else {
					batMonsterImageTilePosY-=batMonsterTileStepY;
				}
				
				batMonsterImageTile.style.top=batMonsterImageTilePosY+"px";

				if (batMonsterImageTilePosX<mainImageTilePosX) {
					batMonsterImageTilePosX+=batMonsterTileStepX;
				}
				else {
					batMonsterImageTilePosX-=batMonsterTileStepX;
				}
				
				batMonsterImageTile.style.left=batMonsterImageTilePosX+"px";							
			}
			else {
				batMonsterTileStepDelay++;
			}			
			//==============================
		}
		else {
			iBatMonsterAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*2;//64*2; 128;

		//currently two frames only
		if (iBatMonsterAnimationCount==0) { 
			batMonsterImageTile.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iBatMonsterAnimationCount==1) { 
			batMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
/*		
		else {
			batMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";
		}
*/		
	}
		
	function executeBossMonsterWalkingAnimation() {
		var bossMonsterImageTile = document.getElementById("bossMonsterImageId");
		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		bossMonsterImageTile.style.visibility="visible";

		//iMonsterAnimationDelayCountMax=15;
		
		if (iBossMonsterAnimationDelayCount>=iBossMonsterAnimationDelayCountMax) {
			iBossMonsterAnimationCount=(iBossMonsterAnimationCount+1)%2; //3; //last hidden

			iBossMonsterAnimationDelayCount=0;			
		}
		else {
			iBossMonsterAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}

			//==============================
			//AI; movement
			if (iBossMonsterMovementDelayCount>=iBossMonsterMovementDelayCountMax) {			
				var iDeltaX=(parseInt(mainImageTile.style.left)-iHorizontalOffset)-(bossMonsterImageTilePosX+iImageFrameWidthLarge/2);
				var iDeltaY=(parseInt(mainImageTile.style.top)-iVerticalOffset)-(bossMonsterImageTilePosY+iImageFrameHeightLarge/2);
	
				////alert(parseInt(mainImageTile.style.left));
				////alert("BOSS: "+parseInt(bossMonsterImageTile.style.left));

				////alert(parseInt(mainImageTile.style.top));
				////alert("BOSS: "+parseInt(bossMonsterImageTile.style.top));
	
				iDeltaY*=-1;

				var fBossMonsterImageTileStepAngleRad=Math.atan2(iDeltaX,iDeltaY);
				var iBossMonsterImageTileStepAngle=fBossMonsterImageTileStepAngleRad*(180/Math.PI);
				//var iBossMonsterImageTileStepAngle=fBossMonsterImageTileStepAngleRad*(360/Math.PI);
				//var iBossMonsterImageTileStepAngle=fBossMonsterImageTileStepAngleRad*(720/Math.PI);

				//clockwise
				//iBossMonsterImageTileStepAngle=(iBossMonsterImageTileStepAngle)%360;
				//flip vertically;
				iBossMonsterImageTileStepAngle=(iBossMonsterImageTileStepAngle+180)%360;
				
				bossMonsterImageTile.style.transform = "rotate("+iBossMonsterImageTileStepAngle+"deg)";	

				bossMonsterImageTile.style.transformOrigin = "12.5% 12.5%"; 

				
				var newBossMonsterTileStepY=bossMonsterTileStepY*Math.cos(fBossMonsterImageTileStepAngleRad).toFixed(3);
				newBossMonsterTileStepY*=-1;
				var newBossMonsterTileStepX=bossMonsterTileStepX*Math.sin(fBossMonsterImageTileStepAngleRad).toFixed(3);
				
				bossMonsterImageTilePosY=parseInt(bossMonsterImageTile.style.top)+newBossMonsterTileStepY;			
				bossMonsterImageTilePosX=parseInt(bossMonsterImageTile.style.left)+newBossMonsterTileStepX;

				bossMonsterImageTile.style.left = bossMonsterImageTilePosX+"px";
				bossMonsterImageTile.style.top = bossMonsterImageTilePosY+"px";			

				iBossMonsterMovementDelayCount=0;		
				
				//if (myAudioBossScreech.currentTime==0) {
				if (iBossMonsterHitAnimationCount%iBossMonsterHitAnimationCountMax==0) {
					myAudioBossScreech.play();
				}
			}
			else {
				iBossMonsterMovementDelayCount++;
			}
			//==============================
			
			
		var iFrameY=0;
		//var iFrameY=iImageFrameHeight*2;//64*2; 128;
		
		if (bIsBossMonsterHit) {
			//iImageFrameHeightLarge*2 = 128
			
			//reference: Game Off 2022; Time
			bossMonsterImageTile.style.objectPosition = "-" + iImageFrameHeightLarge*2*(iBossMonsterAnimationCount) + "px -" + iImageFrameHeightLarge*2 + "px";
			
			if (iBossMonsterHitAnimationCount>=iBossMonsterHitAnimationCountMax) {
				bIsBossMonsterHit=false;
				iBossMonsterHitAnimationCount=0;
			}
			iBossMonsterHitAnimationCount++;
		}
		else {
			//currently two frames only
			if (iBossMonsterAnimationCount==0) { 
				bossMonsterImageTile.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
			}
			else if (iBossMonsterAnimationCount==1) { 
				//use actual image dimensions in file; not scaled down dimensions
				bossMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthLarge*2 + "px -" + iFrameY + "px";
			}
		}
		
		//==================================================
/*		
		iTransitionRotate=(iTransitionRotate+10)%360; //30
		bossMonsterImageTile.style.transform = "rotate("+iTransitionRotate+"deg)";	
		bossMonsterImageTile.style.transformOrigin = "12.5% 12.5%"; 
*/

/*
		if (iTransitionScale<1) {
			iTransitionScale+=0.1
		}
		else if (iTransitionScale>0) {
			iTransitionScale-=0.1
		}
		//iTransitionScale=0.5;
		
		bossMonsterImageTile.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";			
		bossMonsterImageTile.style.transformOrigin = "12.5% 12.5%"; 
*/		
	}	
	
	function executeMiniBossMonsterWalkingAnimation(iCount,inputArrayMiniBossMonster){//inputArrayMiniBossMonsterWithIdCount) {	
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

/*
		var miniBossMonsterImageTile = document.getElementById("miniBossMonsterImageId");
		miniBossMonsterImageTile.style.visibility="visible";
*/		
		
		inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.visibility="visible";
		
		//==============================
		//AI; movement		
		if (inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
			inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_COUNT]=(inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_COUNT]+1)%2; //3; //last hidden

			inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT]=0;			
		}
		else {
			inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT]++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}


			//==============================
			//AI; movement
/*
		if (iMiniBossMonsterHitAnimationCount>=iMiniBossMonsterHitAnimationCountMax) {
			//bIsBossMonsterHit=false;
			//iMiniBossMonsterHitAnimationCount=0;
		}
		iMiniBossMonsterHitAnimationCount++;
*/		
		if (iMiniBossMonsterMovementDelayCount>=iMiniBossMonsterMovementDelayCountMax) {		
			if ((iCount==0)||(iCount>0)&&(!inputArrayMiniBossMonster[iCount-1][MONSTER_IS_ACTIVE])){			
				//movement
				if (inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]/2) {
				
					var iDeltaX=(parseInt(mainImageTile.style.left)+iImageFrameWidth/2-iHorizontalOffset)-(inputArrayMiniBossMonster[iCount][MONSTER_POSX]+iImageFrameWidth/2);
					
					var iDeltaY=(parseInt(mainImageTile.style.top)+iImageFrameHeight/2-iVerticalOffset)-(inputArrayMiniBossMonster[iCount][MONSTER_POSY]+iImageFrameHeight/2);

					
					////alert(parseInt(mainImageTile.style.left));
					////alert("BOSS: "+parseInt(bossMonsterImageTile.style.left));

					////alert(parseInt(mainImageTile.style.top));
					////alert("BOSS: "+parseInt(bossMonsterImageTile.style.top));

					iDeltaY*=-1;

					var fMiniBossMonsterImageTileStepAngleRad=Math.atan2(iDeltaX,iDeltaY);
					var iMiniBossMonsterImageTileStepAngle=fMiniBossMonsterImageTileStepAngleRad*(180/Math.PI);
					//var iBossMonsterImageTileStepAngle=fBossMonsterImageTileStepAngleRad*(360/Math.PI);
					//var iBossMonsterImageTileStepAngle=fBossMonsterImageTileStepAngleRad*(720/Math.PI);

					//clockwise
					//iBossMonsterImageTileStepAngle=(iBossMonsterImageTileStepAngle)%360;
					//flip vertically;
					iMiniBossMonsterImageTileStepAngle=(iMiniBossMonsterImageTileStepAngle+180)%360;
					
					inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.transform = "rotate("+iMiniBossMonsterImageTileStepAngle+"deg)";	

					inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.transformOrigin = "12.5% 12.5%"; 
					
					var newMiniBossMonsterTileStepY=inputArrayMiniBossMonster[iCount][MONSTER_STEPY]*Math.cos(fMiniBossMonsterImageTileStepAngleRad).toFixed(3);
					newMiniBossMonsterTileStepY*=-1;
					
					var newMiniBossMonsterTileStepX=inputArrayMiniBossMonster[iCount][MONSTER_STEPX]*Math.sin(fMiniBossMonsterImageTileStepAngleRad).toFixed(3);

					inputArrayMiniBossMonster[iCount][MONSTER_POSY]=parseInt(inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.top)+newMiniBossMonsterTileStepY;			
					inputArrayMiniBossMonster[iCount][MONSTER_POSX]=parseInt(inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.left)+newMiniBossMonsterTileStepX;

					//inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_DELAY_COUNT]=0;					
				}
			}
		}
		iMiniBossMonsterMovementDelayCount++;
			
		var iFrameY=0;
		//var iFrameY=iImageFrameHeight*2;//64*2; 128;

		//currently two frames only
		if (inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_COUNT]==0) { 
			inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (inputArrayMiniBossMonster[iCount][MONSTER_ANIMATION_COUNT]==1) { 
			//use actual image dimensions in file; not scaled down dimensions
			inputArrayMiniBossMonster[iCount][MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidth + "px -" + iFrameY + "px";
		}


/*		
		if (bIsMiniBossMonsterHit) {
			//iImageFrameHeightLarge*2 = 128
			
			//reference: Game Off 2022; Time
			miniBossMonsterImageTile.style.objectPosition = "-" + iImageFrameHeightLarge*2*(iMiniBossMonsterAnimationCount) + "px -" + iImageFrameHeightLarge*2 + "px";
			
			if (iMiniBossMonsterHitAnimationCount>=iMiniBossMonsterHitAnimationCountMax) {
				bIsMiniBossMonsterHit=false;
				iMiniBossMonsterHitAnimationCount=0;
			}
			iMiniBossMonsterHitAnimationCount++;
		}
		else {		
			//currently two frames only
			if (iMiniBossMonsterAnimationCount==0) { 
				miniBossMonsterImageTile.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
			}
			else if (iMiniBossMonsterAnimationCount==1) { 
				//use actual image dimensions in file; not scaled down dimensions
				miniBossMonsterImageTile.style.objectPosition = "-" + iImageFrameWidthLarge*2 + "px -" + iFrameY + "px";
			}
		}		
*/		
	}	
	
	function executeWraithMonsterWalkingAnimation(inputArrayWraithMonsterWithIdCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
	
		//alert("inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]: "+inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]);
	
		//==============================
		//AI; movement
		if (inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
			inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT_MAX]; //last hidden		

  			inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;

			if (inputArrayWraithMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArrayWraithMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
			
				inputArrayWraithMonsterWithIdCount[MONSTER_STEP_DELAY]=0;
				
				//alert("DITO!!!!"+inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]);
				
				if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
				}
				else {
					inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=WALKING_STATE;
				}
			}
			else {
				//alert(inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_STEP_DELAY]);
			
				inputArrayWraithMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}
		
			if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
				if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge*0.75<mainImageTilePosY) {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+=inputArrayWraithMonsterWithIdCount[MONSTER_STEPY];
				}
				else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge*0.75) {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSY]-=inputArrayWraithMonsterWithIdCount[MONSTER_STEPY];
				}
					
				inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.top=inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+"px";
				
				if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]<mainImageTilePosX) {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+=inputArrayWraithMonsterWithIdCount[MONSTER_STEPX];
				}
				else {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSX]-=inputArrayWraithMonsterWithIdCount[MONSTER_STEPX];
				}

				inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+"px";	
			}			
		}
		else {
			inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}
		//==============================

		var iFrameY=0;
		var iFrameXOffset=0;
		
		if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(iSkelMonsterAnimationDelayCount);

		if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
			inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT] + "px -" + iFrameY + "px";
		}
		else { //IDLE_STATE
			inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*4 + "px -" + iFrameY + "px";
		}
	}	

	function executeRunningWraithMonsterAttackingAnimation(inputArrayRunningWraithMonsterWithIdCount, iCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		//has gone to the left-most
		if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameHeightLarge/2<0) {
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";
		}
		else {
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
		}

		if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility=="hidden") {
			return;
		}

		
		//alert("inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]: "+inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]);
	
		//==============================
		//AI; movement

		if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
		
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT_MAX]; //last hidden		

  			inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;

			if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
			
				inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEP_DELAY]=0;

				
				//note double while loop causing blinking
				//setBombMonsterPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]);
				//note the id num of the bomb is based on running wraith's
				
				setBombMonsterPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY],iCount);
				
				
				//alert("DITO!!!!"+inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]);
/*				
				if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
					//currSkelMonsterTileState=ATTACKING_STATE;
					inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
				}
				else {
					inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=WALKING_STATE;
				}
*/				

				

			}
			else {
				//alert(inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_STEP_DELAY]);
			
				inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}

			inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
		
			if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge*0.75<mainImageTilePosY) {
				inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+=inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEPY];
			}
			else if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge*0.75) {
				inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]-=inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEPY];
			}		
		
			//move from right to left
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]-=inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEPX];
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+"px";	




/*		
//			if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
				if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge*0.75<mainImageTilePosY) {
				
					inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+=inputArrayRunningWraithMonsterWithIdCount[MONSTER_STEPY];
				}
				else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge*0.75) {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSY]-=inputArrayWraithMonsterWithIdCount[MONSTER_STEPY];
				}
					
				inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.top=inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+"px";
				
				if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]<mainImageTilePosX) {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+=inputArrayWraithMonsterWithIdCount[MONSTER_STEPX];
				}
				else {
					inputArrayWraithMonsterWithIdCount[MONSTER_POSX]-=inputArrayWraithMonsterWithIdCount[MONSTER_STEPX];
				}

				inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+"px";	
//			}	
*/


		}
		else {
			inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}
		//==============================

		var iFrameY=0;
		var iFrameXOffset=0;
		
/*		
		if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
*/

		iFrameY=iImageFrameHeightLarge*1; //face left
			
		//alert(iSkelMonsterAnimationDelayCount);

		inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*inputArrayRunningWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT] + "px -" + iFrameY + "px";
		
					//alert("DITO!!!!");

		
/*
		if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==WALKING_STATE) {
			inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT] + "px -" + iFrameY + "px";
		}
		else { //IDLE_STATE
			inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*4 + "px -" + iFrameY + "px";
		}
*/		
	}	


	function executeBombMonsterAttackingAnimation(inputArrayBombMonsterWithIdCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
	
		//alert("inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]: "+inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]);
	
		//==============================
		//AI; movement

		if (inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
		
			inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_COUNT_MAX]; //last hidden		

  			inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;

			if (inputArrayBombMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArrayBombMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
				inputArrayBombMonsterWithIdCount[MONSTER_STEP_DELAY]=0;
				
				//explode attack
				//------------------------------------------------
				setMonsterDeathAnimationPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]-iImageFrameWidthDefault/2, inputArrayBombMonsterWithIdCount[MONSTER_POSY]-iImageFrameHeightDefault/2, MONSTER_TYPE_VAL_BOMB);

				inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]--;

				if (inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]<=0) {
					inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayBombMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					
					//removed by Mike, 20251124
					//iCurrMonsterDeathCount++;

					setExplosionEffectPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault/2,inputArrayBombMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightDefault/2);
				}
				//------------------------------------------------
			}
			else {
				//alert(inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_STEP_DELAY]);
			
				inputArrayBombMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}

			inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
		
			if (inputArrayBombMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge*0.75<mainImageTilePosY) {
				inputArrayBombMonsterWithIdCount[MONSTER_POSY]+=inputArrayBombMonsterWithIdCount[MONSTER_STEPY];
			}
			else if (inputArrayBombMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge*0.75) {
				inputArrayBombMonsterWithIdCount[MONSTER_POSY]-=inputArrayBombMonsterWithIdCount[MONSTER_STEPY];
			}		
		
			//move from right to left
			inputArrayBombMonsterWithIdCount[MONSTER_POSX]-=inputArrayBombMonsterWithIdCount[MONSTER_STEPX];
			inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArrayBombMonsterWithIdCount[MONSTER_POSX]+"px";	

		}
		else {
			inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}
		//==============================

		var iFrameY=0;
		var iFrameXOffset=0;
		

		iFrameY=iImageFrameHeightDefault*1; //face left
			
		//alert(iSkelMonsterAnimationDelayCount);

		inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthDefault*inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_COUNT] + "px -" + iFrameY + "px";


		if (inputArrayBombMonsterWithIdCount[MONSTER_ANIMATION_COUNT]%2==0) {
			inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transform = "scale("+1+","+1+")";	
			inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transformOrigin = "12.5% 12.5%"; 	//scale 2		
			//inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transformOrigin = "6.125% 6.125%"; //scale 3, 4
		}
		else {
			inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transform = "scale("+1.10+","+1.10+")";	
			inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transformOrigin = "12.5% 12.5%"; 	//scale 2		
			//inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.transformOrigin = "6.125% 6.125%"; //scale 3, 4
		}
	}	






	
	function executeWraithMonsterAttackingAnimation(inputArrayWraithMonsterWithIdCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
	
	
		//if (inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
		
		if (inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=0) {
		
			inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]=(inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]+1);//%4; //last hidden

			//if (inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]>=inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT_MAX]) {
			if (inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]>inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT_MAX]) {
				
				inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]=0;
				
				inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]=0;
				inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
				
				//alert("DITO!!!");
			}

			inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;
		}
		else {
			//alert(inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]);
		
			inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]++;
		}

		var iFrameY=0;
		var iFrameXOffset=0;//iImageFrameWidthLarge*4;//0;
		
		if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSX]>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
		
		//alert(inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]);
		
		//inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]
		
		//inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + (iFrameXOffset-iImageFrameWidthLarge*inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]) + "px -" + iFrameY + "px";
		
		//mainImageTileHeroBody.style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*iHeroAttackAnimationCount - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";

		inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iFrameXOffset-iImageFrameWidthLarge*(inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_ANIMATION_COUNT]-1) - 4*iImageFrameWidthLarge + "px -" + iFrameY + "px";		
		
	}
	
	
	function executeSnakeMonsterWalkingAnimation(inputArraySnakeMonsterWithIdCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");

		inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
				
/*				
		if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
			inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%2; //3; //last hidden

			inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;
			
			if (inputArraySnakeMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArraySnakeMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
				inputArraySnakeMonsterWithIdCount[MONSTER_STEP_DELAY]=0;
			}
			else {
				inputArraySnakeMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}				
		}
		else {
			inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}
*/		

		//==============================
		//AI; movement		
		if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]/2) {
		
			if (inputArraySnakeMonsterWithIdCount[MONSTER_POSY]<parseInt(mainImageTile.style.top)) {//mainImageTilePosY) {
				inputArraySnakeMonsterWithIdCount[MONSTER_POSY]+=inputArraySnakeMonsterWithIdCount[MONSTER_STEPY];								
			}
			else {
				inputArraySnakeMonsterWithIdCount[MONSTER_POSY]-=inputArraySnakeMonsterWithIdCount[MONSTER_STEPY];				
			}
			
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.top=inputArraySnakeMonsterWithIdCount[MONSTER_POSY]+"px";		

			if (inputArraySnakeMonsterWithIdCount[MONSTER_POSX]<mainImageTilePosX) {
				inputArraySnakeMonsterWithIdCount[MONSTER_POSX]+=inputArraySnakeMonsterWithIdCount[MONSTER_STEPX];
				
			}
			else {
				inputArraySnakeMonsterWithIdCount[MONSTER_POSX]-=inputArraySnakeMonsterWithIdCount[MONSTER_STEPX];
				
			}
			
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArraySnakeMonsterWithIdCount[MONSTER_POSX]+"px";	
			
			
		}
		//==============================
		
/*
		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;//2;//64*2; 128;

		//currently two frames only
		if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==0) { 
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==1) { 
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
*/		

		var iFrameY=iImageFrameHeight*3;
		
		var iFrameXOffset=0;
		
		if (inputArraySnakeMonsterWithIdCount[MONSTER_IS_IN_RIVER]) {
			iFrameXOffset=iImageFrameWidth*2;
		}

		//Game Off 2021; TUGON
		if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]<20) {//30//40) {
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + 0 - iFrameXOffset + "px -" + iFrameY + "px";
		}
		else {
			if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>40) {//60//80) {
				inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;
			}
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidthDefault - iFrameXOffset + "px -" + iFrameY + "px";
		}	
		inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		
/*			
		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;//2;//64*2; 128;

		//currently two frames only
		if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==0) { 
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (inputArraySnakeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==1) { 
			inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
*/						
	}
	
	function executeGrassMonsterAnimation(inputArrayGrassMonsterWithIdCount) {		

		inputArrayGrassMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
				
		if (inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
			inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%2; //3; //last hidden

			inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;
			
			if (inputArrayGrassMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArrayGrassMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
				inputArrayGrassMonsterWithIdCount[MONSTER_STEP_DELAY]=0;
			}
			else {
				inputArrayGrassMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}				
		}
		else {
			inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*2;//2;//64*2; 128;

		//currently two frames only
		if (inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==0) { 
			inputArrayGrassMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (inputArrayGrassMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==1) { 
			inputArrayGrassMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
	}
	
	function executeSlimeMonsterAnimation(inputArraySlimeMonsterWithIdCount) {		
		//hero tile position
		var mainImageTile = document.getElementById("mainImageTileImageId");
		
		inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="visible";
				
		if (inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {
			inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]=(inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]+1)%2; //3; //last hidden

			inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]=0;
			
			if (inputArraySlimeMonsterWithIdCount[MONSTER_STEP_DELAY]>=inputArraySlimeMonsterWithIdCount[MONSTER_STEP_DELAY_MAX]) {
				inputArraySlimeMonsterWithIdCount[MONSTER_STEP_DELAY]=0;
			}
			else {
				inputArraySlimeMonsterWithIdCount[MONSTER_STEP_DELAY]++;
			}				
		}
		else {
			inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]++;
		}

		//var iFrameY=0;

		//==============================
		//AI; movement
		if (inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT]>=inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {///2) {
		
			if (inputArraySlimeMonsterWithIdCount[MONSTER_POSY]<parseInt(mainImageTile.style.top)) {//mainImageTilePosY) {
				inputArraySlimeMonsterWithIdCount[MONSTER_POSY]+=inputArraySlimeMonsterWithIdCount[MONSTER_STEPY];				
			}
			else {
				inputArraySlimeMonsterWithIdCount[MONSTER_POSY]-=inputArraySlimeMonsterWithIdCount[MONSTER_STEPY];
			}
			
			inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.top=inputArraySlimeMonsterWithIdCount[MONSTER_POSY]+"px";

			//go to the right
			if (inputArraySlimeMonsterWithIdCount[MONSTER_POSX]<mainImageTilePosX) {
				inputArraySlimeMonsterWithIdCount[MONSTER_POSX]+=inputArraySlimeMonsterWithIdCount[MONSTER_STEPX];
				
				//iFrameY=0;
			}
			else {
				inputArraySlimeMonsterWithIdCount[MONSTER_POSX]-=inputArraySlimeMonsterWithIdCount[MONSTER_STEPX];
				
				//iFrameY=iImageFrameHeight*1;//2;//64*2; 128;
			}
			
			inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.left=inputArraySlimeMonsterWithIdCount[MONSTER_POSX]+"px";	
			
		}
		//==============================

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*1;//2;//64*2; 128;

		//currently two frames only
		if (inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==0) { 
			inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (inputArraySlimeMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==1) { 
			inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.objectPosition = "-" + iImageFrameWidthDefault + "px -" + iFrameY + "px";
		}
	}
	
	function executeExplosionEffect() {
		var explosionEffectImage = document.getElementById("explosionEffectImageId");

		if (explosionEffectImage.style.visibility=="hidden") {
			return;
		}

		if (iExplosionEffectAnimationDelayCount==iExplosionEffectAnimationDelayCountMax) {
	//	if (iExplosionEffectAnimationDelayCount>=iExplosionEffectAnimationDelayCountMax) {
			
			iExplosionEffectAnimationCount=(iExplosionEffectAnimationCount+1)%5; //last hidden

			iExplosionEffectAnimationDelayCount=0;
			/*
			explosionEffectImage.style.visibility="visible";
			*/
			
			//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}
		else {
			iExplosionEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		
		//note: current output: fireball effect used in first frame only;
		iFrameY=0;
		//iFrameY=128;

		//put fireballExplosion as 1st frame
		if (iExplosionEffectAnimationCount==0) {
			iFrameY=128;
		}

		if (iExplosionEffectAnimationCount==0) { //%2
			explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iExplosionEffectAnimationCount==1) {
			explosionEffectImage.style.objectPosition = "-" + 128 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else if (iExplosionEffectAnimationCount==2) {
			explosionEffectImage.style.objectPosition = "-" + 128*2 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else if (iExplosionEffectAnimationCount==3) {
			explosionEffectImage.style.objectPosition = "-" + 128*3 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else {
			explosionEffectImage.style.visibility="hidden";
			
			//alert("HALLO");
		}
	}
	
	function executeFireballExplosionEffect() {
		var fireballExplosionEffectImage = document.getElementById("fireballExplosionEffectImageId");

		if (fireballExplosionEffectImage.style.visibility=="hidden") {
			return;
		}

		if (iFireballExplosionEffectAnimationDelayCount==iFireballExplosionEffectAnimationDelayCountMax) {
	//	if (iExplosionEffectAnimationDelayCount>=iExplosionEffectAnimationDelayCountMax) {
			
			iFireballExplosionEffectAnimationCount=(iFireballExplosionEffectAnimationCount+1)%5; //last hidden

			iFireballExplosionEffectAnimationDelayCount=0;
			/*
			explosionEffectImage.style.visibility="visible";
			*/
			
			//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}
		else {
			iFireballExplosionEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		
		//iFrameY=0;
		iFrameY=128;

		if (iFireballExplosionEffectAnimationCount==0) { //%2
			fireballExplosionEffectImage.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iFireballExplosionEffectAnimationCount==1) {
			fireballExplosionEffectImage.style.objectPosition = "-" + 128 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else if (iFireballExplosionEffectAnimationCount==2) {
			fireballExplosionEffectImage.style.objectPosition = "-" + 128*2 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else if (iFireballExplosionEffectAnimationCount==3) {
			fireballExplosionEffectImage.style.objectPosition = "-" + 128*3 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else {
			fireballExplosionEffectImage.style.visibility="hidden";			
			//alert("HALLO");
		}		
	}

	function executeGrassCutEffect() {
		var grassCutEffectImage = document.getElementById("grassCutEffectImageId");

		if (grassCutEffectImage.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*2;		
		
		if (iGrassCutEffectAnimationDelayCount==iGrassCutEffectAnimationDelayCountMax) {			
			iGrassCutEffectAnimationCount=(iGrassCutEffectAnimationCount+1)%2; //last hidden

			iGrassCutEffectAnimationDelayCount=0;
		}
		else {
			iGrassCutEffectAnimationDelayCount++;
		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		
		if (iGrassCutEffectAnimationCount==0) { //%2		
			grassCutEffectImage.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";
		}
		else {
			grassCutEffectImage.style.visibility="hidden";
		}
	}
	
	function executePearlAnimation() {
		var pearlImageTile = document.getElementById("pearlImageTileId");

		if (pearlImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		var iFrameY=0;
		//var iFrameY=iImageFrameHeight*2;		
		
		if (iPearlAnimationDelayCount>=iPearlAnimationDelayCountMax) {			
			iPearlAnimationCount=(iPearlAnimationCount+1)%3;

			iPearlAnimationDelayCount=0;
		}
		else {
			iPearlAnimationDelayCount++;
		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		
		pearlImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*iPearlAnimationCount + "px -" + iFrameY + "px";

/*		
		if (iPearlAnimationCount==0) { //%2		
			pearlImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";
		}
		else {
			pearlImageTile.style.visibility="hidden";
		}
*/		
	}	

	function executeKeyAnimation() {
		var keyImageTile = document.getElementById("keyImageTileId");

		if (keyImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;		

/*		
		if (iKeyAnimationDelayCount>=iKeyAnimationDelayCountMax) {			
			iKeyAnimationCount=(iKeyAnimationCount+1)%3;

			iKeyAnimationDelayCount=0;
		}
		else {
			iKeyAnimationDelayCount++;
		}
*/
		iKeyAnimationDelayCount=0;

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
				
		//keyImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*iKeyAnimationCount + "px -" + iFrameY + "px";

		keyImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*0 + "px -" + iFrameY + "px";

/*		
		if (iPearlAnimationCount==0) { //%2		
			pearlImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";
		}
		else {
			pearlImageTile.style.visibility="hidden";
		}
*/		
	}	
	
	function executeAmuletAnimation() {
		var amuletImageTile = document.getElementById("amuletImageTileId");

		if (amuletImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;		
		
		//iAmuletAnimationDelayCount=0;
		//amuletImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2 + "px -" + iFrameY + "px";	
/*		
		if (iAmuletStatusAnimationDelayCount>=iAmuletStatusAnimationDelayCountMax) {			
			iAmuletStatusAnimationCount=(iAmuletStatusAnimationCount+1)%3;

			iAmuletStatusAnimationDelayCount=0;
		}
		else {
			iAmuletStatusAnimationDelayCount++;
		}
		
		amuletImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2-iImageFrameWidthDefault*iAmuletStatusAnimationCount + "px -" + iFrameY + "px";
*/
		
		//Game Off 2021; TUGON
		if (iAmuletStatusAnimationDelayCount<5) {//5) {
			//riverImageRight.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
			iAmuletStatusAnimationCount=0;
		}
		else {
			if (iAmuletStatusAnimationDelayCount>10) {//10) {
				iAmuletStatusAnimationDelayCount=0;
			}
			//riverImageRight.style.objectPosition = "-" + iRiverImageFrameWidth + "px -" + iFrameY + "px";
			iAmuletStatusAnimationCount=1;
		}			
		iAmuletStatusAnimationDelayCount++;	

		amuletImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*2-iImageFrameWidthDefault*(iAmuletStatusAnimationCount) + "px -" + iFrameY + "px";		
		
	}	
	
	function executePearlStatusAnimation() {
		var pearlStatusImageTile = document.getElementById("pearlStatusImageTileId");

		if (pearlStatusImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		var iFrameY=0;
		//var iFrameY=iImageFrameHeight*2;		
		
		if (iPearlStatusAnimationDelayCount>=iPearlStatusAnimationDelayCountMax) {			
			iPearlStatusAnimationCount=(iPearlStatusAnimationCount+1)%3;

			iPearlStatusAnimationDelayCount=0;
		}
		else {
			iPearlStatusAnimationDelayCount++;
		}
		
		pearlStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*iPearlStatusAnimationCount + "px -" + iFrameY + "px";
	}	


	function executeSniperShotStatusAnimation() {
		var sniperShotStatusImageTile = document.getElementById("sniperShotStatusImageTileId");

		if (sniperShotStatusImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeightDefault*1;		
		
		if (iSniperShotStatusAnimationDelayCount>=iSniperShotStatusAnimationDelayCountMax) {			
			iSniperShotStatusAnimationCount=(iSniperShotStatusAnimationCount+1)%2;

			iSniperShotStatusAnimationDelayCount=0;
		}
		else {
			iSniperShotStatusAnimationDelayCount++;
		}
		
		sniperShotStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*iSniperShotStatusAnimationCount + "px -" + iFrameY + "px";
	}	

	function executeKeyStatusAnimation() {
		var keyStatusImageTile = document.getElementById("keyStatusImageTileId");

		if (keyStatusImageTile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		var iFrameY=0;
		//var iFrameY=iImageFrameHeight*2;		
		
		if (iKeyStatusAnimationDelayCount>=iKeyStatusAnimationDelayCountMax) {			
			iKeyStatusAnimationCount=(iKeyStatusAnimationCount+1)%3;

			iKeyStatusAnimationDelayCount=0;
		}
		else {
			iKeyStatusAnimationDelayCount++;
		}
		
		keyStatusImageTile.style.objectPosition = "-" + iImageFrameWidthDefault*iKeyStatusAnimationCount + "px -" + iFrameY + "px";
	}		
	
	function executeHeroFireballProjectileAnimation() {
		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		if (mainImageTileFireballProjectile.style.visibility=="hidden") {
			return;
		}

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*2;		
		
		if (iHeroFireballProjectileAnimationDelayCount>=iHeroFireballProjectileAnimationDelayCountMax) {			
			iHeroFireballProjectileAnimationCount=(iHeroFireballProjectileAnimationCount+1)%2;

			iHeroFireballProjectileAnimationDelayCount=0;
		}
		else {
			iHeroFireballProjectileAnimationDelayCount++;
		}		
		
		mainImageTileFireballProjectile.style.objectPosition = "-" + iImageFrameWidthDefault*iHeroFireballProjectileAnimationCount + "px -" + iFrameY + "px";
	 }		

	function updateHeroFireballProjectileHoldPositions() {
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");

		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		//edited by Mike, 20251124
/*
		mainImageTileFireballProjectileHold.style.left=mainImageTileHeroBody.style.left;
		mainImageTileFireballProjectileHold.style.top=mainImageTileHeroBody.style.top;
*/
		mainImageTileFireballProjectileHold.style.left=parseInt(mainImageTileHeroBody.style.left)+iImageFrameWidthDefault/2+"px";
		mainImageTileFireballProjectileHold.style.top=parseInt(mainImageTileHeroBody.style.top)+iImageFrameHeightDefault/2+"px";
		

/*		
		//##===============
		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;		
		
		if (iHeroFireballProjectileHoldAnimationDelayCount>=iHeroFireballProjectileHoldAnimationDelayCountMax) {			
			iHeroFireballProjectileHoldAnimationCount=(iHeroFireballProjectileHoldAnimationCount+1)%2;

			iHeroFireballProjectileHoldAnimationDelayCount=0;
		}
		else {
			iHeroFireballProjectileHoldAnimationDelayCount++;
		}		
		
		mainImageTileFireballProjectileHold.style.objectPosition = "-" + iImageFrameWidthDefault*iHeroFireballProjectileHoldAnimationCount + "px -" + iFrameY + "px";
		
		mainImageTileFireballProjectileHold.style.left=mainImageTileHeroBody.style.left;//+"px";
		mainImageTileFireballProjectileHold.style.top=mainImageTileHeroBody.style.top;//+"px";
*/		
	}
	 
	function executeHeroFireballProjectileHoldAnimation() {
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");
		
		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

/*
		if (mainImageTileFireballProjectileHold.style.visibility=="hidden") {
			return;
		}
*/

//		mainImageTileFireballProjectileHold.style.visibility="visible";

		//alert("DITO");

		//var iFrameY=0;
		var iFrameY=iImageFrameHeight*3;		
		
		if (iHeroFireballProjectileHoldAnimationDelayCount>=iHeroFireballProjectileHoldAnimationDelayCountMax) {			
			iHeroFireballProjectileHoldAnimationCount=(iHeroFireballProjectileHoldAnimationCount+1)%2;

			iHeroFireballProjectileHoldAnimationDelayCount=0;
			
			//wait before setting to visible
			mainImageTileFireballProjectileHold.style.visibility="visible";
		}
		else {
			iHeroFireballProjectileHoldAnimationDelayCount++;
		}		
		
		mainImageTileFireballProjectileHold.style.objectPosition = "-" + iImageFrameWidthDefault*iHeroFireballProjectileHoldAnimationCount + "px -" + iFrameY + "px";
		
/*		//edited by Mike, 20251124
		mainImageTileFireballProjectileHold.style.left=mainImageTileHeroBody.style.left;//+"px";
		mainImageTileFireballProjectileHold.style.top=mainImageTileHeroBody.style.top;//+"px";
*/
		mainImageTileFireballProjectileHold.style.left=parseInt(mainImageTileHeroBody.style.left)+iImageFrameWidthDefault/2+"px";
		mainImageTileFireballProjectileHold.style.top=parseInt(mainImageTileHeroBody.style.top)+iImageFrameHeightDefault/2+"px";
		
  }			 

  function executeExplosionEffectToMonsterBoss() {
		var explosionEffectImage = document.getElementById("explosionEffectToMonsterImageId");

		if (explosionEffectImage.style.visibility=="hidden") {
			return;
		}

		if (iMonsterExplosionEffectAnimationDelayCount==iMonsterExplosionEffectAnimationDelayCountMax) {
	//	if (iExplosionEffectAnimationDelayCount>=iExplosionEffectAnimationDelayCountMax) {
			iMonsterExplosionEffectAnimationCount=(iMonsterExplosionEffectAnimationCount+1)%5; //last hidden


			iMonsterExplosionEffectAnimationDelayCount=0;
			/*
			explosionEffectImage.style.visibility="visible";
			*/
		}
		else {
			iMonsterExplosionEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		if (iMonsterExplosionEffectAnimationCount==0) { //%2
			explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
		}
		else if (iMonsterExplosionEffectAnimationCount==1) {
			explosionEffectImage.style.objectPosition = "-" + 128 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else if (iMonsterExplosionEffectAnimationCount==2) {
			explosionEffectImage.style.objectPosition = "-" + 128*2 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else if (iMonsterExplosionEffectAnimationCount==3) {
			explosionEffectImage.style.objectPosition = "-" + 128*3 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else {
			explosionEffectImage.style.visibility="hidden";
		}
	}

	function executeExplosionEffectToCity() {
		var explosionEffectImage = document.getElementById("explosionEffectToCityImageId");

/*		
		if (iTransitionScale<1) {
			iTransitionScale+=0.1
		}
		else if (iTransitionScale>0) {
			iTransitionScale-=0.1
		}
*/
		//iTransitionScale=0.5;
		
//		explosionEffectImage.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";	

		//explosionEffectImage.style.transform = "scale("+0.5+","+0.5+")";	

		if (explosionEffectImage.style.visibility=="hidden") {
			return;
		}

		//alert("Dito");
		
		if (iMonsterExplosionEffectAnimationDelayCount==iMonsterExplosionEffectAnimationDelayCountMax) {
	//	if (iExplosionEffectAnimationDelayCount>=iExplosionEffectAnimationDelayCountMax) {
			iMonsterExplosionEffectAnimationCount=(iMonsterExplosionEffectAnimationCount+1)%5; //last hidden


			iMonsterExplosionEffectAnimationDelayCount=0;
			/*
			explosionEffectImage.style.visibility="visible";
			*/
		}
		else {
			iMonsterExplosionEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		}

		//alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);

		if (iMonsterExplosionEffectAnimationCount==0) { //%2
			explosionEffectImage.style.objectPosition = "-" + 0 + "px -" + 128 + "px";
		}
		else if (iMonsterExplosionEffectAnimationCount==1) {
			explosionEffectImage.style.objectPosition = "-" + 128 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else if (iMonsterExplosionEffectAnimationCount==2) {
			explosionEffectImage.style.objectPosition = "-" + 128*2 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else if (iMonsterExplosionEffectAnimationCount==3) {
			explosionEffectImage.style.objectPosition = "-" + 128*3 + "px -" + 128 + "px";
			//alert(">>>>");
		}
		else {
			explosionEffectImage.style.visibility="hidden";
		}
	}

	//added by Mike, 20251116
	function updateHasHeroShotSniper() {
		mainImageTileSniperShotPosX=0;
		mainImageTileSniperShotPosY=0;

		if (iCurrHeroMana==iCurrHeroManaMax) {
			//resetSniperShot();
			bHasHeroShotSniper=false;
		}
	}

	//added by Mike, 20241105
	function executeDustEffect() {
		var dustEffectImage = document.getElementById("dustEffectImageId");

		if (bHasHeroHitMonster) {
			dustEffectImage.style.visibility="hidden";
			return;
		}

		if (dustEffectImage.style.visibility=="hidden") {
			return;
		}

/*		
		if (bIsHeroGoingUpOrDown) {
			dustEffectImage.style.visibility="hidden";
			return;
		}		
*/

		if (iDustEffectAnimationDelayCount==iDustEffectAnimationDelayCountMax) {
			iDustEffectAnimationCount=(iDustEffectAnimationCount+1)%4;//5; //last hidden

			iDustEffectAnimationDelayCount=0;
		}
		else {
			iDustEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}
		
		//dustEffectImage.style.objectPosition = "-" + 0 + "px -" + 256 + "px";

		//alert("iDustEffectAnimationCount: "+iDustEffectAnimationCount);

		if (iDustEffectAnimationCount==0) { //%2
			dustEffectImage.style.objectPosition = "-" + 0 + "px -" + 256 + "px";
		}
		else if (iDustEffectAnimationCount==1) {
			dustEffectImage.style.objectPosition = "-" + iImageDustEffectAnimationWidth + "px -" + 256 + "px";
			//alert(">>>>");
		}
		else if (iDustEffectAnimationCount==2) {
			dustEffectImage.style.objectPosition = "-" + iImageDustEffectAnimationWidth*2 + "px -" + 256 + "px";
			//alert(">>>>");
		}
////		else if (iExplosionEffectAnimationCount==3) {
////			explosionEffectImage.style.objectPosition = "-" + 128*3 + "px -" + 0 + "px";
////			//alert(">>>>");
////		}	
		else {
			dustEffectImage.style.visibility="hidden";
		}		
	}

	
	function executeMonsterDeathAnimation() {
	
		iMonsterType=MONSTER_TYPE_VAL_BOMB;
	
		//BOMB MONSTER
		switch (iMonsterType) {
			case MONSTER_TYPE_VAL_BOMB:
				//for (iCurrParticleEffectCount=0; iCurrParticleEffectCount<iCurrParticleEffectCountMax; iCurrParticleEffectCount++) {
				//for (iCurrParticleEffectCount=0; iCurrParticleEffectCount<1; iCurrParticleEffectCount++) {
					var particleEffectImage = document.getElementById("particleEffectImageId"+0);

					//particleEffectImage.style.visibility="hidden";

					if (particleEffectImage.style.visibility=="hidden") {
						return;
					}

					//if (iCurrParticleEffectCount==0) {
					
						if (iMonsterDeathAnimationDelayCount==iMonsterDeathAnimationDelayCountMax) {
							iMonsterDeathAnimationCount=(iMonsterDeathAnimationCount+1);
							iMonsterDeathAnimationDelayCount=0;
						}
						else {
							iMonsterDeathAnimationDelayCount++;
						}
						
						//alert(iMonsterDeathAnimationCount);
					
		/*			
					if (iMonsterDeathAnimationCount>=iMonsterDeathAnimationCountMax) {
						particleEffectImage.style.visibility="hidden";
					}
					else {
						particleEffectImage.style.visibility="visible";
					}
		*/			
					
					
		/*			
					particleEffectImage.style.objectPosition = "-" + iImageParticleEffectAnimationWidth*iMonsterDeathAnimationCount + "px -" + iImageParticleEffectAnimationHeight + "px";
		*/			

					//iCurrParticleEffectOpacity-=0;

						iCurrParticleEffectOpacity-=0.005;//0.005; //0.02

						if (iCurrParticleEffectOpacity<0) {
							iCurrParticleEffectOpacity=0;
						}

						particleEffectImage.style.opacity=iCurrParticleEffectOpacity;

						iTransitionScale+=0.2; //0.1
						//iTransitionScale=1.5;
						//iTransitionScale=1.75;

						iTransitionScaleMax=4;//3
						
						if (iTransitionScale>iTransitionScaleMax) {
							iTransitionScale=iTransitionScaleMax;
							
							particleEffectImage.style.visibility="hidden";
						}

					//}

					particleEffectImage.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";	
					//particleEffectImage.style.transformOrigin = "12.5% 12.5%"; 	//scale 2		
					particleEffectImage.style.transformOrigin = "6.125% 6.125%"; //scale 3, 4


					//--------------------
					var myAudioEffectCannonFire = document.getElementById("myAudioEffectCannonFireId");

					myAudioEffectCannonFire.setAttribute("src", sAudioEffectActionCannonFire);

					//fMyAudioEffectVolume=0.2;
					fMyAudioEffectCannonFireVolume=1.0;
					myAudioEffectCannonFire.volume=fMyAudioEffectCannonFireVolume;
					myAudioEffectCannonFire.loop=false;
					myAudioEffectCannonFire.play();		
					//--------------------
					
				//}

				particleEffectImage.style.objectPosition = "-" + iImageParticleEffectAnimationWidth*0 + "px -" + iImageParticleEffectAnimationHeight*2 + "px";
				break;
		}
	}	

	//for further testing
	function executeMonsterDeathAnimationBuggy() { //actorObject) {
/*
		var monsterDeathAnimationImage = document.getElementById("skelMonsterDeathAnimationImageId");

		if (monsterDeathAnimationImage.style.visibility=="hidden") {
			return;
		}
*/

		var iFrameY=0;
		var iFrameXOffset=0;

		
		for (iCurrParticleEffectCount=0; iCurrParticleEffectCount<iCurrParticleEffectCountMax; iCurrParticleEffectCount++) {
			var particleEffectImage = document.getElementById("particleEffectImageId"+iCurrParticleEffectCount);

			if (particleEffectImage.style.visibility=="hidden") {
				continue;
			}

			if (iCurrParticleEffectAnimationCycleCount<iCurrParticleEffectAnimationCycleCountMax) {
				particleEffectImage.style.visibility="visible";
				
				if (iCurrParticleEffectCount==0) {
					iCurrParticleEffectAnimationCycleCount++;
				}
			}
			else {
				particleEffectImage.style.visibility="hidden";
				continue;
			}

			//particleEffectImage.style.visibility="visible";

			if (iCurrParticleEffectCount==0) {
					if (iMonsterDeathAnimationDelayCount==iMonsterDeathAnimationDelayCountMax) {
					iMonsterDeathAnimationCount=(iMonsterDeathAnimationCount+1)%iMonsterDeathAnimationCountMax;
/*					
					if (iMonsterDeathAnimationCount<iMonsterDeathAnimationCountMax) {
						particleEffectImage.style.visibility="visible";
					}
					else {
						particleEffectImage.style.visibility="hidden";
						iMonsterDeathAnimationCount=0;
					}
					iMonsterDeathAnimationCount++
*/
					iMonsterDeathAnimationDelayCount=0;
				}
				else {
					iMonsterDeathAnimationDelayCount++;
				}
			}

			if (iMonsterDeathAnimationCount<iMonsterDeathAnimationCountMax) {
				particleEffectImage.style.objectPosition = "-" + iImageParticleEffectAnimationWidth*iMonsterDeathAnimationCount + "px -" + iImageParticleEffectAnimationHeight + "px";
			}/*
			else {
				iMonsterDeathAnimationCount=0;
			}	*/	

			let iParticleEffectPosX=parseInt(particleEffectImage.style.left);
			let iParticleEffectPosY=parseInt(particleEffectImage.style.top);
						
			if (iMonsterDeathAnimationCount==0) {
		
				let iWrapOffsetX=iStageMaxWidth/2;
				let iWrapOffsetY=iStageMaxHeight/4;

/*
				if (iParticleEffectPosX<0) {
					iParticleEffectPosX=iStageMaxWidth;
				}
*/

/*
				if (iParticleEffectPosX<iStageMaxWidth/2) {
					iParticleEffectPosX=iInitialParticleEffectPosX;
				
					if (iParticleEffectPosX%2==0) {
						iParticleEffectPosX-=window.parseInt(Math.random()*10)%10;
					}
					else {
						iParticleEffectPosX+=window.parseInt(Math.random()*10)%10;
					}					
				}
*/
				//iParticleEffectPosX=iInitialParticleEffectPosX;

				//iParticleEffectPosX-=window.parseInt(Math.random()*10)%10;

				
	/*			
				if (iParticleEffectPosY>iStageMaxHeight-iWrapOffsetY) {
					iParticleEffectPosY=0-iImageFrameHeightDefault-iWrapOffsetY;
				}
	*/
	
				if (iCurrParticleEffectCount<iCurrParticleEffectCountMax/2) {
					//if (iParticleEffectPosY<0) {
					if (iParticleEffectPosY<iInitialParticleEffectPosY-iImageFrameHeightLarge) {
						//iParticleEffectPosY=iStageMaxHeight;
						iParticleEffectPosY=iInitialParticleEffectPosY;
					}
				}
				else {
					if (iParticleEffectPosY<iInitialParticleEffectPosY-iImageFrameHeightLarge/4) {
						//iParticleEffectPosY=iStageMaxHeight;
						iParticleEffectPosY=iInitialParticleEffectPosY+iImageFrameHeightDefault/2;
						//iParticleEffectPosX=iInitialParticleEffectPosX+iImageFrameWidthDefault/2;

					}
				}

				iCurrParticleEffectOpacity=1;

				iParticleEffectPosY-=window.parseInt(Math.random()*5)%5;
				//iParticleEffectPosY--;
			}
			else {
				iParticleEffectPosY--;
			}

			iParticleEffectPosX-=1;


			iCurrParticleEffectOpacity-=0.02;

			if (iCurrParticleEffectOpacity<0) {
				iCurrParticleEffectOpacity=0;
			}

			//alert(iCurrParticleEffectOpacity);

			//particleEffectImage.style.opacity="0.6";//+iCurrParticleEffectOpacity;
			//particleEffectImage.style.opacity="0.40000000000000013";//+iCurrParticleEffectOpacity;
			particleEffectImage.style.opacity=iCurrParticleEffectOpacity;

			//particleEffectImage.style.filter  = 'alpha(opacity=60)'; // IE fallback

			particleEffectImage.style.left=iParticleEffectPosX+"px";
			particleEffectImage.style.top=iParticleEffectPosY+"px";
		}
		

/*		
		if (skelMonsterImageTilePosX+iImageFrameWidthLarge/4<mainImageTilePosX) {
			iFrameY=iImageFrameHeightLarge*0; //face right
			
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*5; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*3; //face down
			}
		}
		//if hero is to the left of skel
		else if (skelMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/4) {
			iFrameY=iImageFrameHeightLarge*1; //face left

			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
		}
		//if parallel
		else {
			//if skel is facing up; below hero
			if (skelMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/4) {
				iFrameY=iImageFrameHeightLarge*4; //face up
			}
			else if (skelMonsterImageTilePosY+iImageFrameHeightLarge/4<mainImageTilePosY) {
			//else {
				iFrameY=iImageFrameHeightLarge*2; //face down
			}
			else {
				iFrameY=iImageFrameHeightLarge*4; //default
			}
		}
*/		
		//alert(iSkelMonsterAnimationDelayCount);

	}


	function executeSpiralStrokeEffect() {
/*	
		if (iSpiralStrokeEffectAnimationDelayCount==iSpiralStrokeEffectAnimationDelayCountMax) {
			iSpiralStrokeEffectAnimationCount=(iSpiralStrokeEffectAnimationCount+1)%4;

			iSpiralStrokeEffectAnimationDelayCount=0;
		}
		else {
			iSpiralStrokeEffectAnimationDelayCount++;
		}
*/
		//Game Off 2022
		var spiralStrokeEffectCanvas = document.getElementById("myEffectCanvasId");
		var spiralStrokeEffectCanvasContext = spiralStrokeEffectCanvas.getContext("2d");
		//brown
		spiralStrokeEffectCanvasContext.strokeStyle = "#0000FF"; //"#ff0000";//80591b"; //"#ff0000";
		spiralStrokeEffectCanvasContext.lineWidth = 1;

		spiralStrokeEffectCanvas.style.left = (iSpiralStrokeEffectPosX-iImageFrameWidthLarge/2-iImageFrameWidthDefault/2)+"px";
		spiralStrokeEffectCanvas.style.top = (iSpiralStrokeEffectPosY-iImageFrameHeightLarge/2-iImageFrameHeightDefault/2)+"px";

		if (iSpiralStrokeEffectAnimationCount<iSpiralStrokeEffectAnimationCountMax) {
			//dash 5px; space 3px
			//spiralStrokeEffectCanvasContext.setLineDash([5, 3]);
			//note: spiral effect
			spiralStrokeEffectCanvasContext.lineWidth=5;
			spiralStrokeEffectCanvasContext.setLineDash([2, 3*iSpiralStrokeEffectAnimationCount]);		

			spiralStrokeEffectCanvasContext.clearRect(0, 0, spiralStrokeEffectCanvas.width, spiralStrokeEffectCanvas.height);
			
			spiralStrokeEffectCanvasContext.beginPath();
			spiralStrokeEffectCanvasContext.arc(50, 50, (iSpiralStrokeEffectCanvasContextRadius/iSpiralStrokeEffectAnimationCountMax)*iSpiralStrokeEffectAnimationCount, 0, 2 * Math.PI);
			
			spiralStrokeEffectCanvasContext.stroke(); 
		
			spiralStrokeEffectCanvas.style.visibility="visible";
			
			iSpiralStrokeEffectAnimationCount++;
		}
		else {
			bHasShotSniper=false;
			spiralStrokeEffectCanvas.style.visibility="hidden";
		}
	}

	//added by Mike, 20251115
	function executeSnowEffect(iCurrSnowEffectCount) {
		var snowEffectImage = document.getElementById("snowEffectImageId"+iCurrSnowEffectCount);

		//edited by Mike, 20251125; from 20251121
		//if ((bIsGameOver) || (bIsLevelUp)) {
		//if ((bIsGameOver) || (bIsLevelUp) || (bIsShowingStage1End) || (bIsShowingStage2End)) {
		if ((bIsGameOver) || (bIsLevelUp) || (bIsShowingStage1End) || (bIsShowingStage2End) || (bIsShowingStage3End) || (bIsShowingStage1Start) || (bIsShowingStage2Start) || (bIsShowingStage3Start)) {

			snowEffectImage.style.visibility="hidden";
			return;
		}


//alert("iCurrSnowEffectCount: "+iCurrSnowEffectCount)

		if (snowEffectImage.style.visibility=="hidden") {
			return;
		}

		if (iCurrSnowEffectCount==0) {
			if (iSnowEffectAnimationDelayCount==iSnowEffectAnimationDelayCountMax) {
				iSnowEffectAnimationCount=(iSnowEffectAnimationCount+1)%iSnowEffectAnimationCountMax;//5; //last hidden

				iSnowEffectAnimationDelayCount=0;
			}
			else {
				iSnowEffectAnimationDelayCount++;

		//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
			}
		}
		
		if (iSnowEffectAnimationCount<iSnowEffectAnimationCountMax) {
			snowEffectImage.style.objectPosition = "-" + iImageSnowEffectAnimationWidth*iSnowEffectAnimationCount + "px -" + 0 + "px";
		}
		else {
			//snowEffectImage.style.visibility="visible";
			iSnowEffectAnimationCount=0;
		}		
		
		//move the snow toward the bottom-left
		iSnowEffectPosX=parseInt(snowEffectImage.style.left);
		iSnowEffectPosY=parseInt(snowEffectImage.style.top);
		
		let iWrapOffsetX=iStageMaxWidth/2;
		let iWrapOffsetY=iStageMaxHeight/4;
		
		if (iSnowEffectPosX<0) {
			iSnowEffectPosX=iStageMaxWidth;
		}
		//add randomizing movement
		//iSnowEffectPosX--;
		//increase 5 to speed-up
		iSnowEffectPosX-=window.parseInt(Math.random()*5)%5;
		
		if (iSnowEffectPosY>iStageMaxHeight-iWrapOffsetY) {
			iSnowEffectPosY=0-iImageFrameHeightDefault-iWrapOffsetY;
		}
		iSnowEffectPosY+=window.parseInt(Math.random()*5)%5;
		//iSnowEffectPosY++;
		
		snowEffectImage.style.left=iSnowEffectPosX+"px";
		snowEffectImage.style.top=iSnowEffectPosY+"px";
	}
	
	function executeInitFireballEffect() {
		var initFireballEffectImage = document.getElementById("initFireballEffectImageId");

		if (initFireballEffectImage.style.visibility=="hidden") {
			return;
		}

		if (iInitFireballEffectAnimationDelayCount==iInitFireballEffectAnimationDelayCountMax) {
			iInitFireballEffectAnimationCount=(iInitFireballEffectAnimationCount+1)%4;//5; //last hidden

			iInitFireballEffectAnimationDelayCount=0;
			
		}
		else {
			iInitFireballEffectAnimationDelayCount++;

	//		alert("iExplosionEffectAnimationCount: "+iExplosionEffectAnimationCount);
		}
		
		//dustEffectImage.style.objectPosition = "-" + 0 + "px -" + 256 + "px";

		//alert("iInitFireballEffectAnimationCount: "+iInitFireballEffectAnimationCount);
		
		var iFrameY=128*2+32*4;
		//var iFrameY=0;

		if (iInitFireballEffectAnimationCount==0) { //%2
			initFireballEffectImage.style.objectPosition = "-" + 0 + "px -" + iFrameY + "px";
		}
		else if (iInitFireballEffectAnimationCount==1) {
			initFireballEffectImage.style.objectPosition = "-" + 128 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
		else if (iInitFireballEffectAnimationCount==2) {
			initFireballEffectImage.style.objectPosition = "-" + 128*2 + "px -" + iFrameY + "px";
			//alert(">>>>");
		}
/*		
		else if (iInitFireballEffectAnimationCount==3) {
			initFireballEffectImage.style.objectPosition = "-" + 128*3 + "px -" + iFrameY + "px";
////			//alert(">>>>");
		}	
*/		
		else {
			initFireballEffectImage.style.visibility="hidden";
		}		
	}
	
	//added by Mike, 20241113
	function executeHeroAttackEffect() {
		var heroAttackEffectImage = document.getElementById("heroAttackEffectImageId");
/*
		if (heroAttackEffectImage.style.visibility=="hidden") {
			return;
		}
*/

/*
		if (iHeroAttackEffectAnimationDelayCount==iHeroAttackEffectAnimationDelayCountMax) {
			iHeroAttackEffectAnimationCount=(iHeroAttackEffectAnimationCount+1)%4;//5; //last hidden

			iHeroAttackEffectAnimationDelayCount=0;
		}
		else {
			iHeroAttackEffectAnimationDelayCount++;
		}
*/

		if (iHeroAttackEffectAnimationCount>iHeroAttackEffectAnimationCountMax) {
			iHeroAttackEffectAnimationCount=0;
			iHeroAttackEffectAnimationDelayCount=0;
			
			heroAttackEffectImage.style.visibility="hidden";
		}
		else {
			iHeroAttackEffectAnimationCount++;
		}
		
		iHeroAttackEffectAnimationDelayCount=0;
		
		
		//dustEffectImage.style.objectPosition = "-" + 0 + "px -" + 256 + "px";

		//alert("iDustEffectAnimationCount: "+iDustEffectAnimationCount);
/*
		if (iHeroAttackEffectAnimationCount==0) { //%2
			heroAttackEffectImage.style.objectPosition = "-" + 0 + "px -" + (0) + "px";
		}
		else if (iHeroAttackEffectAnimationCount==1) {
			heroAttackEffectImage.style.objectPosition = "-" + iImageHeroAttackEffectAnimationWidth + "px -" + (0) + "px";
			//alert(">>>>");
		}
		else if (iHeroAttackEffectAnimationCount==2) {
			heroAttackEffectImage.style.objectPosition = "-" + iImageHeroAttackEffectAnimationWidth*2 + "px -" + (0) + "px";
			//alert(">>>>");
		}
		else {
			heroAttackEffectImage.style.visibility="hidden";
		}		
*/
		heroAttackEffectImage.style.objectPosition = "-" + iImageHeroAttackEffectAnimationWidth*iHeroAttackEffectAnimationCount + "px -" + (0) + "px";
	}		
	
	//added by Mike, 20251113
	//function executeWalkOnSnowEffect(arrayWalkOnSnowEffectCount) {
	//function executeWalkOnSnowEffect(walkOnSnowEffectImage) {
	function executeWalkOnSnowEffect() {
		//var walkOnSnowEffectImage = document.getElementById("walkOnSnowEffectImageId");
		//var walkOnSnowEffectImage2 = document.getElementById("walkOnSnowEffectImageId2");

		arrayWalkOnSnowEffectCount=0;

/*
		for (arrayWalkOnSnowEffectCount=0; arrayWalkOnSnowEffectCount<arrayWalkOnSnowEffectCountMax; arrayWalkOnSnowEffectCount++) {
*/			
						//alert("DITO!!!");
			
			arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+arrayWalkOnSnowEffectCount);

			//added by Mike, 20251118
			if (bHasHeroHitMonster) {
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
				//continue;
				return;
			}


			if (arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility=="hidden") {
				//alert("arrayWalkOnSnowEffectCount!!!"+arrayWalkOnSnowEffectCount);
					
				//continue;
				return;
			}
			
			if (bIsHeroGoingUpOrDown) {
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
				return;
			}
			

			if (arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT]==arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT_MAX]) {			
			
				arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]=(arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]+1)%4;//5; //last hidden

				arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT]=0;
				
				//walkOnSnowEffectImage.style.visibility="hidden";
			}
			else {
				arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT]++;
/*				
if (arrayWalkOnSnowEffectCount==0) {
				alert("MONSTER_ANIMATION_DELAY_COUNT: "+arrayWalkOnSnowEffect[MONSTER_ANIMATION_DELAY_COUNT]);
}
*/
			}
							
			if (arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]<3) {
				//arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="visible";
/*			
if (arrayWalkOnSnowEffectCount==1) {
	if (arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]==0) {
				alert(arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT]);
	}
}
*/			


//				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + iImageSnowEffectAnimationWidth*arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT] + "px -" + (iImageSnowEffectAnimationHeight) + "px";

				if (bIsHeroFacingLeftOrRight) {
					//if facing right;
					if (!bIsHeroFacingLeft) {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + iImageWalkOnSnowEffectAnimationWidth*arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT] + "px -" + (iImageWalkOnSnowEffectAnimationHeight) + "px";
					}
					else {					
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + iImageWalkOnSnowEffectAnimationWidth*arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT] + "px -" + (iImageWalkOnSnowEffectAnimationHeight*2) + "px";
					}
				}
				//edited by Mike, 20251123
				else if (bIsHeroFacingUpOrDown) {
/*				
					if (!bIsHeroFacingUp) {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + iImageWalkOnSnowEffectAnimationWidth*arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT] + "px -" + (iImageWalkOnSnowEffectAnimationHeight*4) + "px";
					}
					else {
						arrayWalkOnSnowEffect[MONSTER_OBJECT].style.objectPosition = "-" + iImageWalkOnSnowEffectAnimationWidth*arrayWalkOnSnowEffect[MONSTER_ANIMATION_COUNT] + "px -" + (iImageWalkOnSnowEffectAnimationHeight*3) + "px";
					}
*/					

					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
				}
			}
			else {
				arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
			}
/*			
		}
*/		
	}

	function isElapsedTimeUnderThreeMins() {	
		return true;
	
		dElapsedTimeInSeconds=(Date.now()-iStartTimeInMilliseconds)/1000;

		dCurrTimeSeconds=(dElapsedTimeInSeconds)%60;
		dCurrTimeMinutes=((dElapsedTimeInSeconds)/60)%60;
		dCurrTimeHours=(dElapsedTimeInSeconds)/60/60;

		//max reached
		if (dCurrTimeHours>=60) {
			dCurrTimeMinutes=99;
			dCurrTimeSeconds=99;
			dCurrTimeHours=99;
		}		
		
		if (dCurrTimeHours>0) {
			return false;
		}

		if (dCurrTimeMinutes<60) {
			return true;
		}		
		
		return false;
	}
		
	function executeTimeDisplay() {
		var textTimeDiv = document.getElementById("textTimeDivId");

		if (!bIsMissionDone) {
			dElapsedTimeInSeconds=(Date.now()-iStartTimeInMilliseconds)/1000;
		}
		//otherwise, use current value of dElapsedTimeInSeconds;
		
/*			
		dElapsedTimeInSeconds=60*59;
		dElapsedTimeInSeconds=60*60;
		dElapsedTimeInSeconds=60*45*59;
*/			

		dCurrTimeSeconds=(dElapsedTimeInSeconds)%60;
		dCurrTimeMinutes=((dElapsedTimeInSeconds)/60)%60;
		dCurrTimeHours=(dElapsedTimeInSeconds)/60/60;

		//max reached
		if (dCurrTimeHours>=60) {
			dCurrTimeMinutes=99;
			dCurrTimeSeconds=99;
			dCurrTimeHours=99;
		}		

		sCurrTimeSeconds=parseInt(dCurrTimeSeconds);			
		if (parseInt(dCurrTimeSeconds)<10) {
			sCurrTimeSeconds="0"+sCurrTimeSeconds;
		}

		sCurrTimeMinutes=parseInt(dCurrTimeMinutes);			
		if (parseInt(dCurrTimeMinutes)<10) {
			sCurrTimeMinutes="0"+sCurrTimeMinutes;
		}
		
		sCurrTimeHours=parseInt(dCurrTimeHours);			
		if (parseInt(dCurrTimeHours)<10) {
			sCurrTimeHours="0"+sCurrTimeHours;
		}

		
		//textTimeDiv.innerHTML = parseInt(dCurrTimeMinutes) + ":" + sCurrTimeSeconds;//sCurrTime;
		textTimeDiv.innerHTML = sCurrTimeHours + ":" + sCurrTimeMinutes + ":" + sCurrTimeSeconds;	
		textTimeDiv.style.visibility = "visible";
	}

	//function heroHitByMonster(mainImageTilePosX, mainImageTilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY) {			
	function heroHitByMonster(mainImageTilePosX, mainImageTilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY, iMonsterAttackDamage) {				
		/*var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		*/
		
		if (iHeroInvincibileCount<iHeroInvincibileCountMax) {
			return;
		}

		bIsHeroAttacked=true;
		bIsExecutingShake=true;

/*		//edited by Mike, 20251112
		//iCurrHeroLife--;
		iCurrHeroLife-=iMonsterAttackDamage;
		
		if (iCurrHeroLife<0) {
			iCurrHeroLife=0;
		}
*/		
		//alert(iMonsterAttackDamage);

		reduceHeroLifeBar(iMonsterAttackDamage);
				
		iHeroInvincibileCount=0;
				
		//resetProjectile();

		//added by Mike, 20251104
/*	
		//put hero out
		//TODO: -reverify: this
		mainImageTilePosY=iMonsterImageTilePosY+iImageFrameHeightLarge;
		mainImageTileHeroBody.style.top = mainImageTilePosY+"px";
*/
/*
		mainImageTilePosX=0; //mainImageTileProjectileStepX*5;
		mainImageTilePosY=0;
		
		////mainImageTile.style.left=mainImageTilePosX+"px";		
		////resetProjectile();			
		//alert(mainImageTilePosX);


		//var mainImageTile = document.getElementById("mainImageTileImageId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		//alert(">>>"+mainImageTile.style.left);

		mainImageTileHeroBody.style.left=mainImageTilePosX+"px";
		
		//alert(">>>>>"+mainImageTile.style.left);
*/		
		
		resetProjectile();

/*		
		var myAudioEffectCannonFire = document.getElementById("myAudioEffectCannonFireId");

		myAudioEffectCannonFire.setAttribute("src", sAudioEffectActionCannonFire);

		//fMyAudioEffectVolume=0.2;
		fMyAudioEffectCannonFireVolume=1.0;
		myAudioEffectCannonFire.volume=fMyAudioEffectCannonFireVolume;
		myAudioEffectCannonFire.loop=false;
		myAudioEffectCannonFire.play();		
*/

		var myAudioEffectSwordSlice = document.getElementById("myAudioEffectSwordSliceId");

		myAudioEffectSwordSlice.setAttribute("src", sAudioEffectActionSwordSlice);

		fMyAudioEffectSwordSliceVolume=1.0;
		myAudioEffectSwordSlice.volume=fMyAudioEffectSwordSliceVolume;
		myAudioEffectSwordSlice.loop=false;
		myAudioEffectSwordSlice.play();				


/*
		//hero hit by monster
		var myAudioEffectHitMetal = document.getElementById("myAudioEffectHitMetalId");

		myAudioEffectHitMetal.setAttribute("src", sAudioEffectActionHitMetal);

		fMyAudioEffectHitMetalVolume=1.0;
		myAudioEffectHitMetal.volume=fMyAudioEffectHitMetalVolume;
		myAudioEffectHitMetal.loop=false;
		myAudioEffectHitMetal.play();		
*/		
	}	
	
	function heroHitByMonsterWithType(mainImageTilePosX, mainImageTilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY, iMonsterAttackDamage, iMonsterType) {				
		
		if (iHeroInvincibileCount<iHeroInvincibileCountMax) {
			return;
		}

		bIsHeroAttacked=true;
		bIsExecutingShake=true;

		reduceHeroLifeBar(iMonsterAttackDamage);
				
		iHeroInvincibileCount=0;
				
		resetProjectile();

		switch (iMonsterType) {
			case MONSTER_TYPE_VAL_BOMB:
				break;
		}

/*
		var myAudioEffectSwordSlice = document.getElementById("myAudioEffectSwordSliceId");

		myAudioEffectSwordSlice.setAttribute("src", sAudioEffectActionSwordSlice);

		fMyAudioEffectSwordSliceVolume=1.0;
		myAudioEffectSwordSlice.volume=fMyAudioEffectSwordSliceVolume;
		myAudioEffectSwordSlice.loop=false;
		myAudioEffectSwordSlice.play();				
*/
	}	
	

	function monsterHitByHero(mainImageTilePosX, mainImageTilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY) {	
		//+iImageFrameWidthDefault/2
		//iImageFrameHeightDefault/2
/*
		//added by Mike, 20251110
		//push monster out
		if (bIsHeroFacingLeftOrRight) {
			if (bIsHeroFacingLeft) {
				if (iMonsterImageTilePosX>mainImageTilePosX) {	
					iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
				}
				else {
					iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
				}				
			}
		}
		
		if (bIsHeroFacingUpOrDown) {
			if (bIsHeroFacingUp) {
				if (iMonsterImageTilePosY>mainImageTilePosY) {	
					iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
				}
				else {
					iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
				}				
			}
		}
*/

/*		
		let iMonsterShakeOffsetWidth=iMonsterShakeOffsetWidthMax;
		let iMonsterShakeOffsetHeight=iMonsterShakeOffsetHeightMax;
				
		setHeroAttackEffectPosition(iMonsterImageTilePosX,iMonsterImageTilePosY); 

		iMonsterImageTilePosX+=iShakeOffsetHeight;
		iMonsterImageTilePosY+=iShakeOffsetWidth;
*/
	
		resetProjectile();
		
		setMonsterDeathAnimationPosition(iMonsterImageTilePosX, iMonsterImageTilePosY, MONSTER_TYPE_VAL_SKEL);

/*
		var myAudioEffectCannonFire = document.getElementById("myAudioEffectCannonFireId");

		myAudioEffectCannonFire.setAttribute("src", sAudioEffectActionCannonFire);

		//fMyAudioEffectVolume=0.2;
		fMyAudioEffectCannonFireVolume=1.0;
		myAudioEffectCannonFire.volume=fMyAudioEffectCannonFireVolume;
		myAudioEffectCannonFire.loop=false;
		myAudioEffectCannonFire.play();
*/	
		//TODO: -update: depending on monster type

		var myAudioEffectSwordOut = document.getElementById("myAudioEffectSwordOutId");

		myAudioEffectSwordOut.setAttribute("src", sAudioEffectActionSwordOut);

		fMyAudioEffectSwordOutVolume=1.0;
		myAudioEffectSwordOut.volume=fMyAudioEffectSwordOutVolume;
		myAudioEffectSwordOut.loop=false;
		myAudioEffectSwordOut.play();
	}

	function grassMonsterHitByHero(mainImageTilePosX, mainImageTilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY) {	
		
		//+iImageFrameWidthDefault/2
		//iImageFrameHeightDefault/2
				
		setHeroAttackEffectPosition(iMonsterImageTilePosX,iMonsterImageTilePosY); 
		
		resetProjectile();
		
		var myAudioEffectGrassCut = document.getElementById("myAudioEffectGrassCutId");

		myAudioEffectGrassCut.setAttribute("src", sAudioEffectGrassCut);

		//fMyAudioEffectVolume=0.2;
		fMyAudioEffectGrassCutVolume=1.0;
		myAudioEffectGrassCut.volume=fMyAudioEffectGrassCutVolume;
		myAudioEffectGrassCut.loop=false;
		myAudioEffectGrassCut.play();
	}

	function monsterHitByHeroFireball(mainImageTileFireballProjectilePosX, mainImageTileFireballProjectilePosY, iMonsterImageTilePosX, iMonsterImageTilePosY) {	
		
		//+iImageFrameWidthDefault/2
		//iImageFrameHeightDefault/2
		
		setHeroAttackEffectPosition(iMonsterImageTilePosX,iMonsterImageTilePosY); 
		
		resetProjectile();
		resetFireballProjectile();
	
		var myAudioEffectCannonFire = document.getElementById("myAudioEffectCannonFireId");

		myAudioEffectCannonFire.setAttribute("src", sAudioEffectActionCannonFire);

		//fMyAudioEffectVolume=0.2;
		fMyAudioEffectCannonFireVolume=1.0;
		myAudioEffectCannonFire.volume=fMyAudioEffectCannonFireVolume;
		myAudioEffectCannonFire.loop=false;
		myAudioEffectCannonFire.play();
	}

	function monsterHitByHeroSniperShot(mainImageTileSniperShotPosX, mainImageTileSniperShotPosY, iMonsterImageTilePosX, iMonsterImageTilePosY) {	
		
		setHeroAttackEffectPosition(iMonsterImageTilePosX,iMonsterImageTilePosY); 
		
		resetProjectile();
		resetSniperShot();

/*		
		var myAudioEffectCannonFire = document.getElementById("myAudioEffectCannonFireId");

		myAudioEffectCannonFire.setAttribute("src", sAudioEffectActionCannonFire);

		//fMyAudioEffectVolume=0.2;
		fMyAudioEffectCannonFireVolume=1.0;
		myAudioEffectCannonFire.volume=fMyAudioEffectCannonFireVolume;
		myAudioEffectCannonFire.loop=false;
		myAudioEffectCannonFire.play();	

*/		
		playDogWolfHowl();
		
	}

	function verifyIfHeroLeveledUp() {
		if (iCurrHeroLevel<1) {
			if (iCurrMonsterDeathCount>=iMonsterDeathCountToLevel1Min) {
				bIsLevelUp=true;
				iCurrHeroLevel++;
				setAllActorsToHidden();				
			}					
		}
		else if (iCurrHeroLevel<2) {
			if (iCurrMonsterDeathCount>=iMonsterDeathCountToLevel2Min) {
				bIsLevelUp=true;
				iCurrHeroLevel++;
			}					
		}
	}
	
	function verifyHeroCollideWithRiver() {
		var riverImageTile = document.getElementById("riverImageRightId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		//alert(mainImageTilePosX);
		
		var iRiverImagePosXOffset=iImageFrameWidth/2;
		var iRiverImagePosYOffset=0;
		
		if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, iRiverImagePosX+iRiverImagePosXOffset, iRiverImagePosY+iRiverImagePosYOffset, iImageFrameWidth, iImageFrameHeight, iRiverImageFrameWidth, iRiverImageFrameHeight)) {			
			//alert("HALLO"); 	

			//heroHitByMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY);
			
			if (!bIsHeroInRiver) {
				myAudioWater.play();
			}
			
			bIsHeroInRiver=true;	
			bIsHeroDash=false;

			//alert("Dito");
		}
		else {
			bIsHeroInRiver=false;
		}
	}
	
	function verifySnakeCollideWithRiver(inputArraySnakeMonsterWithIdCount) {
		var riverImageTile = document.getElementById("riverImageRightId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		//alert(mainImageTilePosX);
		
		var iRiverImagePosXOffset=iImageFrameWidth/2;
		var iRiverImagePosYOffset=0;
		
		if (!inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY], iRiverImagePosX+iRiverImagePosXOffset, iRiverImagePosY+iRiverImagePosYOffset,iImageFrameWidth, iImageFrameHeight, iRiverImageFrameWidth, iRiverImageFrameHeight)) {	
				
				if (!inputArraySnakeMonsterWithIdCount[MONSTER_IS_IN_RIVER]) {
					myAudioWater.play();
				}
				inputArraySnakeMonsterWithIdCount[MONSTER_IS_IN_RIVER]=true;	
			}
			else {
				inputArraySnakeMonsterWithIdCount[MONSTER_IS_IN_RIVER]=false;			
			}
		}
	}
	
	//giant; boss
	function verifyHeroCollideWithSkelMonsters() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");

		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				
				//removed by Mike, 20251108
				//return;
			}
			
			//giant; boss;
			//edited by Mike, 20251118
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iImageFrameWidthLargeBoss*0.75, iImageFrameHeightLargeBoss*0.75)) {
			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLargeBoss, iImageFrameHeightLargeBoss)) {

				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLargeBoss/2, iImageFrameHeightLargeBoss/2))) {

					//edited by Mike, 20251112; from 20251111
					var bHasReducedHeroManaOutput=reduceHeroMana(3);
					
					if (!bHasReducedHeroManaOutput) {
						return;
					}
					
/*	
					iCurrHeroMana-=3;
					//iCurrHeroManaToBeDeducted+=3;
					
					iCurrHeroProjectileManaAnimationDelayCount=0;

					//TODO: -update: to use function; with iCurrHeroManaToBeDeducted as parameter
					if (iCurrHeroMana<=0) {
						iCurrHeroMana=0;
						return;
					}
*/
									
					bHasHeroHitMonster=true;
					iHeroAttackAnimationDelayCount=0;
					iHeroAttackAnimationCount=0;//-1;
					
					iHeroAttackComboCount++;

					//alert("DITO!!!");
				
					bIsExecutingShake=true;
				
					monsterHitByHero(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY);

					//added by Mike, 20251110
					//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
					//-------------------------------

					let iMonsterImageTilePosX=skelMonsterImageTilePosX;
					let iMonsterImageTilePosY=skelMonsterImageTilePosY;

					//push monster out
					if (bIsHeroFacingLeftOrRight) {
						if (bIsHeroFacingLeft) {
							if (iMonsterImageTilePosX+iImageFrameWidthLargeBoss/2<mainImageTilePosX) {	
								iMonsterImageTilePosX-=iImageFrameWidthLargeBoss/20;
							}
						}
						else {
							if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLargeBoss/2) {	
								iMonsterImageTilePosX+=iImageFrameWidthLargeBoss/20;
							}
						}				
					}
					
					if (bIsHeroFacingUpOrDown) {
						if (bIsHeroFacingUp) {
							if (iMonsterImageTilePosY+iImageFrameHeightLargeBoss/2<mainImageTilePosY) {	
								iMonsterImageTilePosY-=iImageFrameHeightLargeBoss/20;
							}
						}
						else {
							if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLargeBoss/2) {	
								iMonsterImageTilePosY+=iImageFrameHeightLargeBoss/20;
							}
						}
					}
					
					skelMonsterImageTilePosX=iMonsterImageTilePosX;
					skelMonsterImageTilePosY=iMonsterImageTilePosY;
					//-------------------------------

					setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/2,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/2);
	
					actorLastAttackedByHero=skelMonsterImageTile;
					
					//edited by Mike, 20251124
					//iSkelMonsterHP--;

					reduceBossLifeBar(1); //iMonsterAttackDamageBoss
					iSkelMonsterHP=iCurrBossLife;
					
/*					//debug
					if (iSkelMonsterHP<=0) {
*/					
						skelMonsterImageTile.style.visibility="hidden";				
						isSkelMonsterTileActive=false;
						
						//edited by Mike, 20251124
						//iCurrMonsterDeathCount++;
						iCurrMonsterDeathCount+=BOSS_DEATH_COUNT_VAL;

						bHasBeatenStage1Boss=true;
						//bIsBossBattle=false;
						
						if (iCurrMapLocation==55) {
							executeStageTransition(61);
						}/*
						else if (iCurrMapLocation==65) {
							executeStageTransition(71);
						}*/
						
						setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/2,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/2);
/*						
					}
*/					
/*
					else {
						//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

						actorLastAttackedByHero=skelMonsterImageTile;

						iSkelMonsterHP--;
					}
*/					
				}
				else {
					if (!bHasHeroHitMonster) {
						//decide if will attack; 
/*
						let iRandAttackValue=window.parseInt(Math.random() * 10)%20;
						
						if (iRandAttackValue<=1) {
							//alert(iRandAttackValue);
						
							currSkelMonsterTileState=ATTACKING_STATE;
						}
*/
						if (skelMonsterTileAttackDelay>=skelMonsterTileAttackDelayMax) {
							currSkelMonsterTileState=ATTACKING_STATE;
						}
						else {
							skelMonsterTileAttackDelay++;

							currSkelMonsterTileState=IDLE_STATE;
						}

						if (currSkelMonsterTileState==ATTACKING_STATE) {
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iMonsterAttackDamageSkel);
							
							setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
							
							//push out hero
							//bHasHeroChangedFacingLeftOrRight=false;
							
							if (!bIsHeroFacingUpOrDown) {
								if (!bIsHeroWalking) {
									if (mainImageTilePosX>skelMonsterImageTilePosX) {	
										mainImageTilePosX+=iImageFrameWidthLarge/20;
									}
									else {
										mainImageTilePosX-=iImageFrameWidthLarge/20;
									}
								}
							}
							
							//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
						}
					}
					
					//added by Mike, 20251118
					//giant boss; push hero out
					//if hero is inside the boss
					if (mainImageTilePosY>skelMonsterImageTilePosY) {
						if (mainImageTilePosY+iImageFrameHeightLarge<skelMonsterImageTilePosY+iImageFrameHeightLargeBoss) {
						
							bIsHeroWalking=false;
						
							currSkelMonsterTileState=ATTACKING_STATE;
								
							if (currSkelMonsterTileState==ATTACKING_STATE) {
								heroHitByMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iMonsterAttackDamageSkelBoss);
									
								setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
							}		

							if (iHeroInvincibileCount<iHeroInvincibileCountMax) {
							}
							else {
								resetProjectile();
							}
						}		
					}
					
				}
			}
		}
	}	
	
	//added by Mike, 20251104
	function verifyHeroCollideWithSkelMonstersOK() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");

		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				
				//removed by Mike, 20251108
				//return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2

			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {
			
			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLarge, iImageFrameHeightLarge)) {
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75)) {
/*	
				if (bHasHeroChangedFacingLeftOrRight) {
					//monster deals damage to hero; spinning hero;
					//therefore, push out hero
					//bHasHeroChangedFacingLeftOrRight=false;
					
					//deal damage only when hero is exactly facing left or right;
					if (!bIsHeroFacingUpOrDown) {
						currSkelMonsterTileState=ATTACKING_STATE;
					}
					else {
						if (iSkelMonsterAnimationCount==0) {
							let iRandAttackValue=window.parseInt(Math.random() * 10)%10;
							
							//alert(iRandAttackValue);
							
							//deal damage at 1/20 chance
							if (iRandAttackValue<1) {
								currSkelMonsterTileState=ATTACKING_STATE;
							}
						}
					}
				}
*/				
				//---------------------------------------				
				
				//verify if hero attacked
				//edited by Mike, 20251113
				//if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLarge, iImageFrameHeightLarge))) {
				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

					//edited by Mike, 20251112; from 20251111
					var bHasReducedHeroManaOutput=reduceHeroMana(3);
					
					if (!bHasReducedHeroManaOutput) {
						return;
					}
					
/*	
					iCurrHeroMana-=3;
					//iCurrHeroManaToBeDeducted+=3;
					
					iCurrHeroProjectileManaAnimationDelayCount=0;

					//TODO: -update: to use function; with iCurrHeroManaToBeDeducted as parameter
					if (iCurrHeroMana<=0) {
						iCurrHeroMana=0;
						return;
					}
*/
									
					bHasHeroHitMonster=true;
					iHeroAttackAnimationDelayCount=0;
					iHeroAttackAnimationCount=0;//-1;
					
					iHeroAttackComboCount++;

					//alert("DITO!!!");
				
					bIsExecutingShake=true;
				
					monsterHitByHero(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY);

					//added by Mike, 20251110
					//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
					//-------------------------------

					let iMonsterImageTilePosX=skelMonsterImageTilePosX;
					let iMonsterImageTilePosY=skelMonsterImageTilePosY;

					//push monster out
					if (bIsHeroFacingLeftOrRight) {
						if (bIsHeroFacingLeft) {
							if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
								iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
								iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
							}
						}				

					}
					
					if (bIsHeroFacingUpOrDown) {
						if (bIsHeroFacingUp) {
							if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
								iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
								iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
							}
						}
					}
					
					skelMonsterImageTilePosX=iMonsterImageTilePosX;
					skelMonsterImageTilePosY=iMonsterImageTilePosY;
					//-------------------------------

					setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge/2,skelMonsterImageTilePosY+iImageFrameHeightLarge/2);
	
					actorLastAttackedByHero=skelMonsterImageTile;
					iSkelMonsterHP--;
	
					if (iSkelMonsterHP<=0) {
						skelMonsterImageTile.style.visibility="hidden";				
						isSkelMonsterTileActive=false;
						iCurrMonsterDeathCount++;

						setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge/2,skelMonsterImageTilePosY+iImageFrameHeightLarge/2);

					}
/*
					else {
						//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

						actorLastAttackedByHero=skelMonsterImageTile;

						iSkelMonsterHP--;
					}
*/
				}
				else {
					if (!bHasHeroHitMonster) {
						//decide if will attack; 
/*
						let iRandAttackValue=window.parseInt(Math.random() * 10)%20;
						
						if (iRandAttackValue<=1) {
							//alert(iRandAttackValue);
						
							currSkelMonsterTileState=ATTACKING_STATE;
						}
*/
						if (skelMonsterTileAttackDelay>=skelMonsterTileAttackDelayMax) {
							currSkelMonsterTileState=ATTACKING_STATE;
						}
						else {
							skelMonsterTileAttackDelay++;

							currSkelMonsterTileState=IDLE_STATE;
						}

						if (currSkelMonsterTileState==ATTACKING_STATE) {
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iMonsterAttackDamageSkel);
							
							setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
							
							//push out hero
							//bHasHeroChangedFacingLeftOrRight=false;
							
							if (!bIsHeroFacingUpOrDown) {
								if (!bIsHeroWalking) {
									if (mainImageTilePosX>skelMonsterImageTilePosX) {	
										mainImageTilePosX+=iImageFrameWidthLarge/20;
									}
									else {
										mainImageTilePosX-=iImageFrameWidthLarge/20;
									}
								}
							}
							
							//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
						}
					}
				}
			}
		}
	}
	
	//added by Mike, 20251123
	function verifyHeroCollideWithDemonMonsters() {
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isDemonMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				
				//removed by Mike, 20251108
				//return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2

			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {
			
			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLarge, iImageFrameHeightLarge)) {
			
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, demonMonsterImageTilePosX,demonMonsterImageTilePosY, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75)) {
/*	
				if (bHasHeroChangedFacingLeftOrRight) {
					//monster deals damage to hero; spinning hero;
					//therefore, push out hero
					//bHasHeroChangedFacingLeftOrRight=false;
					
					//deal damage only when hero is exactly facing left or right;
					if (!bIsHeroFacingUpOrDown) {
						currSkelMonsterTileState=ATTACKING_STATE;
					}
					else {
						if (iSkelMonsterAnimationCount==0) {
							let iRandAttackValue=window.parseInt(Math.random() * 10)%10;
							
							//alert(iRandAttackValue);
							
							//deal damage at 1/20 chance
							if (iRandAttackValue<1) {
								currSkelMonsterTileState=ATTACKING_STATE;
							}
						}
					}
				}
*/				
				//---------------------------------------				
				
				//verify if hero attacked
				//edited by Mike, 20251113
				//if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLarge, iImageFrameHeightLarge))) {
				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, demonMonsterImageTilePosX,demonMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

					//edited by Mike, 20251112; from 20251111
					var bHasReducedHeroManaOutput=reduceHeroMana(3);
					
					if (!bHasReducedHeroManaOutput) {
						return;
					}
					
/*	
					iCurrHeroMana-=3;
					//iCurrHeroManaToBeDeducted+=3;
					
					iCurrHeroProjectileManaAnimationDelayCount=0;

					//TODO: -update: to use function; with iCurrHeroManaToBeDeducted as parameter
					if (iCurrHeroMana<=0) {
						iCurrHeroMana=0;
						return;
					}
*/
									
					bHasHeroHitMonster=true;
					iHeroAttackAnimationDelayCount=0;
					iHeroAttackAnimationCount=0;//-1;
					
					iHeroAttackComboCount++;

					//alert("DITO!!!");
				
					bIsExecutingShake=true;
				
					monsterHitByHero(mainImageTilePosX,mainImageTilePosY, demonMonsterImageTilePosX,demonMonsterImageTilePosY);

					//added by Mike, 20251110
					//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
					//-------------------------------

					let iMonsterImageTilePosX=demonMonsterImageTilePosX;
					let iMonsterImageTilePosY=demonMonsterImageTilePosY;

					//push monster out
					if (bIsHeroFacingLeftOrRight) {
						if (bIsHeroFacingLeft) {
							if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
								iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
								iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
							}
						}				

					}
					
					if (bIsHeroFacingUpOrDown) {
						if (bIsHeroFacingUp) {
							if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
								iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
								iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
							}
						}
					}
					
					demonMonsterImageTilePosX=iMonsterImageTilePosX;
					demonMonsterImageTilePosY=iMonsterImageTilePosY;
					//-------------------------------

					setExplosionEffectPosition(demonMonsterImageTilePosX+iImageFrameWidthLarge/2,demonMonsterImageTilePosY+iImageFrameHeightLarge/2);
	
					actorLastAttackedByHero=demonMonsterImageTile;
					//iDemonMonsterHP--;
					//iCurrBossLife=iDemonMonsterHP;
					reduceBossLifeBar(1); //iMonsterAttackDamageBoss
					iDemonMonsterHP=iCurrBossLife;
	
					if (iDemonMonsterHP<=0) {
					//if (iCurrBossLife<=0) {
					
						//alert("DONE!");
					
						demonMonsterImageTile.style.visibility="hidden";				
						isDemonMonsterTileActive=false;
						iCurrMonsterDeathCount++;

						setExplosionEffectPosition(demonMonsterImageTilePosX+iImageFrameWidthLarge/2,demonMonsterImageTilePosY+iImageFrameHeightLarge/2);

					}
/*
					else {
						//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

						actorLastAttackedByHero=skelMonsterImageTile;

						iSkelMonsterHP--;
					}
*/
				}
				else {
					if (!bHasHeroHitMonster) {
						//decide if will attack; 
/*
						let iRandAttackValue=window.parseInt(Math.random() * 10)%20;
						
						if (iRandAttackValue<=1) {
							//alert(iRandAttackValue);
						
							currSkelMonsterTileState=ATTACKING_STATE;
						}
*/
						if (demonMonsterTileAttackDelay>=demonMonsterTileAttackDelayMax) {
							currDemonMonsterTileState=ATTACKING_STATE;
						}
						else {
							demonMonsterTileAttackDelay++;

							currDemonMonsterTileState=IDLE_STATE;
						}

						if (currDemonMonsterTileState==ATTACKING_STATE) {
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, demonMonsterImageTilePosX,demonMonsterImageTilePosY, iMonsterAttackDamageSkel);
							
							setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
							
							//push out hero
							//bHasHeroChangedFacingLeftOrRight=false;
							
							if (!bIsHeroFacingUpOrDown) {
								if (!bIsHeroWalking) {
									if (mainImageTilePosX>skelMonsterImageTilePosX) {	
										mainImageTilePosX+=iImageFrameWidthLarge/20;
									}
									else {
										mainImageTilePosX-=iImageFrameWidthLarge/20;
									}
								}
							}
							
							//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
						}
					}
				}
			}
		}
	}	
	
	function verifyHeroCollideWithBatMonsters() {
		var batMonsterImageTile = document.getElementById("batMonsterImageId");

		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isBatMonsterTileActive) {
			return;
		}		
		//if (batMonsterImageTile.style.visibility!=="hidden") {						
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
			//edited by Mike, 20251121
			//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {	

			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75)) {	
			
				//alert("HALLO"); 	
				
				//verify if hero attacked
				//if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault))) {

				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

					var bHasReducedHeroManaOutput=reduceHeroMana(3);
					
					if (!bHasReducedHeroManaOutput) {
						return;
					}

					bHasHeroHitMonster=true;
					iHeroAttackAnimationDelayCount=0;
					iHeroAttackAnimationCount=0;//-1;
					
					iHeroAttackComboCount++;

					//alert("DITO!!!");
				
					bIsExecutingShake=true;
				
					monsterHitByHero(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY);

					let iMonsterImageTilePosX=batMonsterImageTilePosX;
					let iMonsterImageTilePosY=batMonsterImageTilePosY;

					//push monster out
					if (bIsHeroFacingLeftOrRight) {
						if (bIsHeroFacingLeft) {
							if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
								iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
								iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
							}
						}				

					}
					
					if (bIsHeroFacingUpOrDown) {
						if (bIsHeroFacingUp) {
							if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
								iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
							}
						}
						else {
							if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
								iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
							}
						}
					}
					
					batMonsterImageTilePosX=iMonsterImageTilePosX;
					batMonsterImageTilePosY=iMonsterImageTilePosY;
										
					//setExplosionEffectPosition(batMonsterImageTilePosX+iImageFrameWidthLarge/2,batMonsterImageTilePosY+iImageFrameHeightLarge/2);
					
					setExplosionEffectPosition(batMonsterImageTilePosX+iImageFrameWidthDefault/2,batMonsterImageTilePosY+iImageFrameHeightDefault/2);

					
/*
					batMonsterImageTile.style.visibility="hidden";				
					isBatMonsterTileActive=false;
					iCurrMonsterDeathCount++;
*/

					actorLastAttackedByHero=batMonsterImageTile;
					iBatMonsterHP--;

					if (iBatMonsterHP<=0) {
						batMonsterImageTile.style.visibility="hidden";				
						isBatMonsterTileActive=false;
						iCurrMonsterDeathCount++;

						setExplosionEffectPosition(batMonsterImageTilePosX+iImageFrameWidthLarge,batMonsterImageTilePosY+iImageFrameHeightLarge);

					}
/*
					else {
						//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

						actorLastAttackedByHero=batMonsterImageTile;

						iBatMonsterHP--;
					}
*/
				}
				else {			
					if (!bHasHeroHitMonster) {
						//deal damage if hero collides with this monster
						heroHitByMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iMonsterAttackDamageDefault);
						//setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
						
						//---------------------------------
						//if with waiting before attacking
/*
						if (batMonsterTileAttackDelay>=batMonsterTileAttackDelayMax) {
							currBatMonsterTileState=ATTACKING_STATE;
						}
						else {
							batMonsterTileAttackDelay++;

							currBatMonsterTileState=IDLE_STATE;
						}

						if (currBatMonsterTileState==ATTACKING_STATE) {
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iMonsterAttackDamageBat);
							
							setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
							
							//push out hero
							//bHasHeroChangedFacingLeftOrRight=false;
							
							if (!bIsHeroFacingUpOrDown) {
								if (!bIsHeroWalking) {
									if (mainImageTilePosX>skelMonsterImageTilePosX) {	
										mainImageTilePosX+=iImageFrameWidthLarge/20;
									}
									else {
										mainImageTilePosX-=iImageFrameWidthLarge/20;
									}
								}
							}
							
							//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
						}	
*/						
						//---------------------------------
					}
				}
			}
		}
	}

	//giant; boss
	function verifyHeroFireballCollideWithSkelMonsters() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId")
		
		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLargeBoss, iImageFrameHeightLargeBoss)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
				
					//alert("HALLO"); 	
				
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), skelMonsterImageTilePosX,skelMonsterImageTilePosY);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					//TODO: -update: this if boss
					//setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge,skelMonsterImageTilePosY+iImageFrameHeightLarge);

					setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge*0.75,skelMonsterImageTilePosY+iImageFrameHeightLarge*0.75);
					
					reduceBossLifeBar(iFireballAttackDamage);
					iSkelMonsterHP=iCurrBossLife;
	
					if (iSkelMonsterHP<=0) {
						skelMonsterImageTile.style.visibility="hidden";				
						isSkelMonsterTileActive=false;
						
						//edited by Mike, 20251124
						//iCurrMonsterDeathCount++;
						iCurrMonsterDeathCount+=BOSS_DEATH_COUNT_VAL;

						setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/2,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/2);
					}					
				}
			}
		}
	}	
	
	function verifyHeroFireballCollideWithSkelMonstersOK() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId")
		
		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
				
					//alert("HALLO"); 	
				
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), skelMonsterImageTilePosX,skelMonsterImageTilePosY);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge/4,skelMonsterImageTilePosY+iImageFrameHeightLarge/4);
					
					skelMonsterImageTile.style.visibility="hidden";				
					isSkelMonsterTileActive=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}	

	function verifyHeroFireballCollideWithDemonMonsters() {
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		//var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId")
		
		if (!isDemonMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), demonMonsterImageTilePosX,demonMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
				
					//alert("HALLO"); 	
				
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), demonMonsterImageTilePosX,demonMonsterImageTilePosY);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(demonMonsterImageTilePosX+iImageFrameWidthLarge/4,demonMonsterImageTilePosY+iImageFrameHeightLarge/4);
					
					demonMonsterImageTile.style.visibility="hidden";				
					isDemonMonsterTileActive=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}	

	
	//giant; boss
	function verifyHeroSniperShotCollideWithSkelMonsters() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");
		
		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLargeBoss, iImageFrameHeightLargeBoss)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY);
					
					//TODO: -update: this
					//setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/4,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4);
					
					setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/4+iImageFrameWidthLarge/4,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/4+iImageFrameHeightLarge/4);
					
					reduceBossLifeBar(iSniperShotAttackDamage);
					iSkelMonsterHP=iCurrBossLife;
	
					if (iSkelMonsterHP<=0) {
						skelMonsterImageTile.style.visibility="hidden";				
						isSkelMonsterTileActive=false;
						
						//edited by Mike, 20251124
						//iCurrMonsterDeathCount++;
						iCurrMonsterDeathCount+=BOSS_DEATH_COUNT_VAL;

						setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLargeBoss/2,skelMonsterImageTilePosY+iImageFrameHeightLargeBoss/2);
					}
				}
			}
		}
	}	

	function verifyHeroSniperShotCollideWithSkelMonstersOK() {
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");
		
		if (!isSkelMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, skelMonsterImageTilePosX,skelMonsterImageTilePosY);
					
					//TODO: -update: this
					setFireballExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge/4,skelMonsterImageTilePosY+iImageFrameHeightLarge/4);
					
					skelMonsterImageTile.style.visibility="hidden";				
					isSkelMonsterTileActive=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}	

	function verifyHeroSniperShotCollideWithDemonMonsters() {
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");
		
		if (!isDemonMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, demonMonsterImageTilePosX,demonMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, demonMonsterImageTilePosX,demonMonsterImageTilePosY);
					
					//TODO: -update: this
					setFireballExplosionEffectPosition(demonMonsterImageTilePosX+iImageFrameWidthLarge/4,demonMonsterImageTilePosY+iImageFrameHeightLarge/4);

					actorLastAttackedByHero=demonMonsterImageTile;
					//iDemonMonsterHP-=iSniperShotAttackDamage;
					reduceBossLifeBar(iSniperShotAttackDamage); //iMonsterAttackDamageBoss
					iDemonMonsterHP=iCurrBossLife;
					
					if (iDemonMonsterHP<=0) {
						demonMonsterImageTile.style.visibility="hidden";				
						isDemonMonsterTileActive=false;
						iCurrMonsterDeathCount++;
						//setExplosionEffectPosition(skelMonsterImageTilePosX+iImageFrameWidthLarge/2,skelMonsterImageTilePosY+iImageFrameHeightLarge/2);

					}
				}
			}
		}
	}	

	//TODO: -change: this to little demon
	function verifyHeroSniperShotCollideWithBatMonsters() {
		var batMonsterImageTile = document.getElementById("batMonsterImageId");
		
		if (!isBatMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidthDefault, iImageFrameHeightDefault, iImageFrameWidthLarge, iImageFrameHeightLarge)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					//TODO: -update: this
					setFireballExplosionEffectPosition(batMonsterImageTilePosX+iImageFrameWidthDefault/4,batMonsterImageTilePosY+iImageFrameHeightDefault/4);
					
					batMonsterImageTile.style.visibility="hidden";				
					isBatMonsterTileActive=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}
	
	function verifyHeroFireballCollideWithBatMonsters() {
		var batMonsterImageTile = document.getElementById("batMonsterImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isBatMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), batMonsterImageTilePosX,batMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
				
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
				
					//alert("HALLO"); 	
				
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), batMonsterImageTilePosX,batMonsterImageTilePosY);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					batMonsterImageTile.style.visibility="hidden";				
					isBatMonsterTileActive=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}

	function verifyHeroCollideWithBossMonster() {
		var bossMonsterImageTile = document.getElementById("bossMonsterImageId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isBossMonsterTileActive) {
			return;
		}		
		else { 

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		

			//note iImageFrameWidthLarge*2;  iImageFrameHeightLarge*2
			if (isPointsOfRectIntersectingPointsOfRectMonsterLarge(mainImageTilePosX,mainImageTilePosY, bossMonsterImageTilePosX,bossMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge*2, iImageFrameHeightLarge*2)) {			
				//alert("HALLO"); 	
				
				//verify if hero attacked
				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, bossMonsterImageTilePosX,bossMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge*2, iImageFrameHeightLarge*2))) {
					
					//large
					monsterHitByHero(mainImageTilePosX,mainImageTilePosY, bossMonsterImageTilePosX+iImageFrameWidthLarge/2*2,bossMonsterImageTilePosY+iImageFrameHeightLarge/2*2);
	
	//monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), bossMonsterImageTilePosX+iImageFrameWidthLarge/2*2,bossMonsterImageTilePosY+iImageFrameHeightLarge/2*2);
										
					setExplosionEffectPositionLarge(bossMonsterImageTilePosX+iImageFrameWidthLarge/2,bossMonsterImageTilePosY+iImageFrameHeightLarge/2);
					
					bIsBossMonsterHit=true;
					
					iCurrBossMonsterLife--;
										
					//remove this temporarily; debug
					if (iCurrBossMonsterLife<=0) {					
						bossMonsterImageTile.style.visibility="hidden";				
						isBossMonsterTileActive=false;
						iCurrMonsterDeathCount++;
					}						
				}
				else {			
					heroHitByMonster(mainImageTilePosX,mainImageTilePosY, bossMonsterImageTilePosX,bossMonsterImageTilePosY,iMonsterAttackDamageBoss);
				}
			}
		}
	}
	
	function verifyHeroFireballCollideWithBossMonster() {
		var bossMonsterImageTile = document.getElementById("bossMonsterImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");

		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (!isBossMonsterTileActive) {
			return;
		}		
		else {
			if (bIsHeroAttacked) {
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), bossMonsterImageTilePosX,bossMonsterImageTilePosY, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge*2, iImageFrameHeightLarge*2)) {			

				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
				
					//alert("HALLO"); 	
					
					//large
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), bossMonsterImageTilePosX+iImageFrameWidthLarge/2*2,bossMonsterImageTilePosY+iImageFrameHeightLarge/2*2);
					
					setFireballExplosionEffectPositionLarge(bossMonsterImageTilePosX+iImageFrameWidthLarge/2,bossMonsterImageTilePosY+iImageFrameHeightLarge/2);
					
					bIsBossMonsterHit=true;
					
					iCurrBossMonsterLife--;
					
					if (iCurrBossMonsterLife<=0) {										
						bossMonsterImageTile.style.visibility="hidden";				
						isBossMonsterTileActive=false;
						iCurrMonsterDeathCount++;					
					}
				}
			}
		}
	}			
		
	function verifyHeroCollideWithMiniBossMonsters(inputArrayMiniBossMonsterWithIdCount) {			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

			if (!inputArrayMiniBossMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
					//alert("HALLO"); 	
					
					//verify if hero attacked
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault))) {
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY]);
												
						setExplosionEffectPosition(inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY]);
						
						inputArrayMiniBossMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
						inputArrayMiniBossMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
						iCurrMonsterDeathCount++;		

						//prepare next miniBossMonster
						iMiniBossMonsterMovementDelayCount=0;
					}
					else {			
						heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY],iMonsterAttackDamageDefault);
					}
				}
			}
	}

	function verifyHeroFireballCollideWithMiniBossMonsters(inputArrayMiniBossMonsterWithIdCount) {			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

		if (!inputArrayMiniBossMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
					//alert("HALLO"); 	
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY]);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(inputArrayMiniBossMonsterWithIdCount[MONSTER_POSX],inputArrayMiniBossMonsterWithIdCount[MONSTER_POSY]);
					
					inputArrayMiniBossMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayMiniBossMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;
				}
			}
		}
	}			
	
	//buggy if checking against big boss
	function updateArrayActorsZIndexBuggy() {
		//var iCurrOutArraysActorsIndex=0;
		var iCurrZIndex=iZIndexDefault;
		
		//alert (arrayActors.length);

		//sort the array; from lowest to highest in z-index;
		//based on y-axis position
		//higher z-index means higher y-axis position; 
		//therefore, should be drawn above the others;
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			//aImageTilePosX=parseInt(arrayActors[iCount].style.left);
			aImageTilePosY=parseInt(arrayActors[iCount].style.top);	

			//alert(iCount+"; "+arrayActors[iCount].style.zIndex);

			for (iCountTwo=iCount+1; iCountTwo<iArrayActorsCount; iCountTwo++) {
				//bImageTilePosX=parseInt(arrayActors[iCountTwo].style.left);
				bImageTilePosY=parseInt(arrayActors[iCountTwo].style.top);	
				
				var bIsMustSwap=false;
				
				//gets the entire spritesheet
				//alert(arrayActors[iCountTwo].height)

				//if a is the boss; double the size; 
				if (parseInt(arrayActors[iCountTwo].height)<parseInt(arrayActors[iCount].height)) {
				
					//swap values in array; put b behind a
					if (bImageTilePosY<aImageTilePosY) {				
						bIsMustSwap=true;
					}
					else {
						//check if bottom of b is lower than a's in the y-axis
						//therefore, b should be behind a;
						//if (bImageTilePosY+parseInt(arrayActors[iCountTwo].height)<aImageTilePosY+parseInt(arrayActors[iCount].height)) {
	/*					
						alert("actor b"+parseInt(arrayActors[iCountTwo].height));
						alert("actor a"+parseInt(arrayActors[iCount].height));
	*/					
							//put b behind a
							if ((bImageTilePosY+iImageFrameHeightLarge)<(aImageTilePosY+iImageFrameHeightLargeBoss)) {
	/*						
							alert("not boss"+(bImageTilePosY+iImageFrameHeightLarge));
							alert("boss"+(aImageTilePosY+iImageFrameHeightLargeBoss));
	*/						
								bIsMustSwap=true;
							}
					}
				}

				if (bIsMustSwap) {
					var objectTemp=arrayActors[iCount];
				
					arrayActors[iCount]=arrayActors[iCountTwo];
					arrayActors[iCountTwo]=objectTemp;

					//alert("SWAP!!!"+bImageTilePosY+"vs"+aImageTilePosY);

					//iCurrOutArraysActorsIndex++;
					break;
				}
			}
		}
		
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			//alert("iCount: "+iCount+"; "+arrayActors[iCount].style.top);
			arrayActors[iCount].style.zIndex=iCurrZIndex;
			iCurrZIndex++;
			
			//alert(iCount+"; "+arrayActors[iCount].style.zIndex);
			//alert(iCount+"; "+arrayActors[iCount].style.top);
		}		
	}	
	
	//OK if sprite images have the same height
	function updateArrayActorsZIndex() {
		//var iCurrOutArraysActorsIndex=0;
		var iCurrZIndex=iZIndexDefault;
		
		//alert (arrayActors.length);

		//sort the array; from lowest to highest in z-index;
		//based on y-axis position
		//higher z-index means higher y-axis position; 
		//therefore, should be drawn above the others;
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			//aImageTilePosX=parseInt(arrayActors[iCount].style.left);
			aImageTilePosY=parseInt(arrayActors[iCount].style.top);	

			//alert(iCount+"; "+arrayActors[iCount].style.zIndex);

			for (iCountTwo=iCount+1; iCountTwo<iArrayActorsCount; iCountTwo++) {
				//bImageTilePosX=parseInt(arrayActors[iCountTwo].style.left);
				bImageTilePosY=parseInt(arrayActors[iCountTwo].style.top);	
				
				//swap values in array
				if (bImageTilePosY<aImageTilePosY) {				
					var objectTemp=arrayActors[iCount];
				
					arrayActors[iCount]=arrayActors[iCountTwo];
					arrayActors[iCountTwo]=objectTemp;

					//alert("SWAP!!!"+bImageTilePosY+"vs"+aImageTilePosY);

					//iCurrOutArraysActorsIndex++;
					break;
				}
			}
		}
		
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			//alert("iCount: "+iCount+"; "+arrayActors[iCount].style.top);
			arrayActors[iCount].style.zIndex=iCurrZIndex;
			iCurrZIndex++;
			
			//alert(iCount+"; "+arrayActors[iCount].style.zIndex);
			//alert(iCount+"; "+arrayActors[iCount].style.top);
		}		
	}

	function updateHeroFacingDirection() {
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		heroImageTilePosX=parseInt(mainImageTileHeroBody.style.left);
		heroImageTilePosY=parseInt(mainImageTileHeroBody.style.top);	
	
		for (iCount=0; iCount<iArrayActorsCount; iCount++) {
			if (arrayActors[iCount]!=mainImageTileHeroBody) {
				if (arrayActors[iCount].style.visibility=="visible") {
					if (actorLastAttackedByHero==arrayActors[iCount]) {
			
						monsterImageTilePosX=parseInt(arrayActors[iCount].style.left);
						monsterImageTilePosY=parseInt(arrayActors[iCount].style.top);
						
						let iMonsterWidth=iImageFrameWidthLarge;
						let iMonsterHeight=iImageFrameHeightLarge;
						
						//boss actor
						if (arrayActors[iCount].height==1280) {
							iMonsterWidth=iImageFrameWidthLargeBoss;
							iMonsterHeight=iImageFrameHeightLargeBoss;
						}
						
						if (bHasHeroHitMonster) {
							//edited by Mike, 20251121; from 20251119
							//if (isPointsOfRectIntersectingPointsOfRectMonster(heroImageTilePosX,heroImageTilePosY, monsterImageTilePosX,monsterImageTilePosY, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iMonsterWidth*0.75, iMonsterHeight*0.75)) {

							if (isPointsOfRectIntersectingPointsOfRectMonster(heroImageTilePosX,heroImageTilePosY, monsterImageTilePosX,monsterImageTilePosY, iImageFrameWidthLarge, iImageFrameHeightLarge, iMonsterWidth, iMonsterHeight)) {
								
								//edited by Mike, 20251121; from 20251118
								if (heroImageTilePosY>monsterImageTilePosY) {
								//if (heroImageTilePosY>monsterImageTilePosY+iMonsterHeight/2) {
									bIsHeroFacingUp=true;
									bIsHeroFacingUpOrDown=true;					
								}
								else { //hero is on top of monster in y-axis;
									bIsHeroFacingUp=false;

									if (bIsHeroFacingUpOrDown) {
									}				
									//hero facing only left or right
									else {
										bIsHeroFacingUpOrDown=false;//true;			
									}
								}
								
								//removed by Mike, 20251111
								//if (!bHasHeroChangedFacingLeftOrRight) {
									if (!bIsHeroFacingUpOrDown) {
										if (heroImageTilePosX>monsterImageTilePosX) {	
											bIsHeroFacingLeft=true;
											bIsHeroFacingLeftOrRight=true;					
										}
										else { //hero is on top of monster in y-axis;
											bIsHeroFacingLeft=false;
											bIsHeroFacingLeftOrRight=true;					
										}
									}
									//bHasHeroChangedFacingLeftOrRight=true;
								//}
							}
						}
						
						return;
					}
				}
			}	
		}
	}

	function verifyHeroCollideWithWraithMonsters(inputArrayWraithMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);


			if (!inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
				//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {		
				//removed by Mike, 20251120
/*				
				//edited by Mike, 20251113
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {	

					inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
				
					//if (!bHasFired) {
						if (!bHasHeroHitMonster) {
							if (inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]>=inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY_MAX]) {
								inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE							
							}
							else {
								inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]++;

								inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
							}

							if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==ATTACKING_STATE) {

								heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iMonsterAttackDamageWraith);
								
								setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
								
								//push out hero
								//bHasHeroChangedFacingLeftOrRight=false;
								
								if (!bIsHeroFacingUpOrDown) {
									if (!bIsHeroWalking) {
										if (mainImageTilePosX>inputArrayWraithMonsterWithIdCount[MONSTER_POSX]) {	
											mainImageTilePosX+=iImageFrameWidthLarge/20;
										}
										else {
											mainImageTilePosX-=iImageFrameWidthLarge/20;
										}
									}
								}
							}
						}
					//}					
				}				
				
				else */
				/*if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75, iImageFrameWidthLarge*0.75, iImageFrameHeightLarge*0.75)) {
*/
				
				//edited by Mike, 20251124
				//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {	
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge, iImageFrameWidthLarge/2, iImageFrameHeightLarge)) {
				
				
				//if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {
				
					//TODO: -add: auto-update z-index
					//updateHeroZIndex(mainImageTileHeroBody,inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT]);
					
					//added by Mike, 20251109
/*
					if (!bHasHeroChangedFacingLeftOrRight) {
						if (!bIsHeroFacingUpOrDown) {
							if (mainImageTilePosX>inputArrayWraithMonsterWithIdCount[MONSTER_POSX]) {				
								bIsHeroFacingLeft=true;
								bIsHeroFacingLeftOrRight=true;					
							}
							else { //hero is on top of skel in y-axis;
								bIsHeroFacingLeft=false;
								bIsHeroFacingLeftOrRight=true;					
							}
						}
						bHasHeroChangedFacingLeftOrRight=true;
					}
					else {
*/
					//edited by Mike, 20251120; from 20251119
					//inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
					
					
					
/*
					if (bHasHeroChangedFacingLeftOrRight) {
						//monster deals damage to hero; spinning hero;
						//therefore, push out hero
						//bHasHeroChangedFacingLeftOrRight=false;
						
						//deal damage only when hero is exactly facing left or right;
						if (!bIsHeroFacingUpOrDown) {
							inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
						}
						else {
							if (inputArrayWraithMonsterWithIdCount[MONSTER_ANIMATION_COUNT]==0) {
								let iRandAttackValue=window.parseInt(Math.random() * 10)%10;
								
								//alert(iRandAttackValue);
								
								//deal damage at 1/20 chance
								if (iRandAttackValue<1) {
									inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE;
								}
							}
						}
					}
*/

					//verify if hero attacked
					//edited by Mike, 20251113
					//if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge, iImageFrameHeightLarge, iImageFrameWidthLarge, iImageFrameHeightLarge))) {
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

						//edited by Mike, 20251112; from 20251111
						var bHasReducedHeroManaOutput=reduceHeroMana(3);
						
						if (!bHasReducedHeroManaOutput) {
							return;
						}
						
	/*	
						iCurrHeroMana-=3;
						//iCurrHeroManaToBeDeducted+=3;
						
						iCurrHeroProjectileManaAnimationDelayCount=0;

						//TODO: -update: to use function; with iCurrHeroManaToBeDeducted as parameter
						if (iCurrHeroMana<=0) {
							iCurrHeroMana=0;
							return;
						}
	*/
										
						bHasHeroHitMonster=true;
						iHeroAttackAnimationDelayCount=0;
						iHeroAttackAnimationCount=0;//-1;
						
						iHeroAttackComboCount++;

						//alert("DITO!!!");
					
						bIsExecutingShake=true;
											
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY]);


						//added by Mike, 20251110
						//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
						//-------------------------------

						let iMonsterImageTilePosX=inputArrayWraithMonsterWithIdCount[MONSTER_POSX];
						let iMonsterImageTilePosY=inputArrayWraithMonsterWithIdCount[MONSTER_POSY];

						//push monster out
						if (bIsHeroFacingLeftOrRight) {
							if (bIsHeroFacingLeft) {
								if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
									iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
									iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
								}
							}				

						}
						
						if (bIsHeroFacingUpOrDown) {
							if (bIsHeroFacingUp) {
								if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
									iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
									iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
								}
							}
						}
						
						inputArrayWraithMonsterWithIdCount[MONSTER_POSX]=iMonsterImageTilePosX;
						inputArrayWraithMonsterWithIdCount[MONSTER_POSY]=iMonsterImageTilePosY;
						//-------------------------------
					
						setExplosionEffectPosition(inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/2,inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/2);	

						actorLastAttackedByHero=inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT];
						inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_HP]--;
	
						if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_HP]<=0) {
							inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
							inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
							iCurrMonsterDeathCount++;

							setExplosionEffectPosition(inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/2,inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/2);
						}
/*
						else {
							//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

							actorLastAttackedByHero=inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT];

							inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_HP]--;
						}					
*/						
					}
					
					else {		
						//heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY],iMonsterAttackDamageDefault);
						
						if (!bHasHeroHitMonster) {
						//decide if will attack; 
						
							if (inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]>=inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY_MAX]) {
								inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE							
							}
							else {
								inputArrayWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]++;

								inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
							}

							if (inputArrayWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==ATTACKING_STATE) {

								heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iMonsterAttackDamageWraith);
								
								setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
								
								//push out hero
								//bHasHeroChangedFacingLeftOrRight=false;
								
								if (!bIsHeroFacingUpOrDown) {
									if (!bIsHeroWalking) {
										if (mainImageTilePosX>inputArrayWraithMonsterWithIdCount[MONSTER_POSX]) {	
											mainImageTilePosX+=iImageFrameWidthLarge/20;
										}
										else {
											mainImageTilePosX-=iImageFrameWidthLarge/20;
										}
									}
								}
								
								//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
							}

						
							
						}
					}
				}
			}
		//}
	}
	
	function verifyHeroCollideWithRunningWraithMonsters(inputArrayRunningWraithMonsterWithIdCount) {
			
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);


			if (!inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {	

					//verify if hero attacked
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

						//edited by Mike, 20251112; from 20251111
						var bHasReducedHeroManaOutput=reduceHeroMana(3);
						
						if (!bHasReducedHeroManaOutput) {
							return;
						}
						
						bHasHeroHitMonster=true;
						iHeroAttackAnimationDelayCount=0;
						iHeroAttackAnimationCount=0;//-1;
						
						iHeroAttackComboCount++;

						//alert("DITO!!!");
					
						bIsExecutingShake=true;
											
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]);


						//added by Mike, 20251110
						//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
						//-------------------------------

						let iMonsterImageTilePosX=inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX];
						let iMonsterImageTilePosY=inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY];

						//push monster out
						if (bIsHeroFacingLeftOrRight) {
							if (bIsHeroFacingLeft) {
								if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
									iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
									iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
								}
							}				

						}
						
						if (bIsHeroFacingUpOrDown) {
							if (bIsHeroFacingUp) {
								if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
									iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
									iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
								}
							}
						}
						
						inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]=iMonsterImageTilePosX;
						inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]=iMonsterImageTilePosY;
						//-------------------------------
					

						setExplosionEffectPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/2,inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/2);
	
						actorLastAttackedByHero=inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT];
						inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_HP]--;
	
	
						if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_HP]<=0) {
							inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
							inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
							iCurrMonsterDeathCount++;

							setExplosionEffectPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/2,inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/2);
						}
/*
						else {
							//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

							actorLastAttackedByHero=inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT];

							inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_HP]--;
						}					
*/						
					}
					
					else {		
						
						if (!bHasHeroHitMonster) {
						//decide if will attack; 
						
							//deal damage if hero collides with this monster
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iMonsterAttackDamageDefault);						
						
/*						
							if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]>=inputArrayRunningWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY_MAX]) {
								inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=ATTACKING_STATE							
							}
							else {
								inputArrayRunningWraithMonsterWithIdCount[MONSTER_ATTACK_DELAY]++;

								inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]=IDLE_STATE;
							}

							if (inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_STATE]==ATTACKING_STATE) {

								heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY], iMonsterAttackDamageWraith);
								
								setExplosionEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);
								
								//push out hero
								//bHasHeroChangedFacingLeftOrRight=false;
								
								if (!bIsHeroFacingUpOrDown) {
									if (!bIsHeroWalking) {
										if (mainImageTilePosX>inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]) {	
											mainImageTilePosX+=iImageFrameWidthLarge/20;
										}
										else {
											mainImageTilePosX-=iImageFrameWidthLarge/20;
										}
									}
								}
								
								//currSkelMonsterTileState=ATTACKING_STATE;//WALKING_STATE;
							}					
*/							
						}
					}
				}
			}
		//}
	}	


	function verifyHeroCollideWithBombMonsters(inputArrayBombMonsterWithIdCount) {
			
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);


			if (!inputArrayBombMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayBombMonsterWithIdCount[MONSTER_POSX],inputArrayBombMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2)) {	

					//verify if hero attacked
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2, inputArrayBombMonsterWithIdCount[MONSTER_POSX],inputArrayBombMonsterWithIdCount[MONSTER_POSY], iImageFrameWidthLarge/2, iImageFrameHeightLarge/2, iImageFrameWidthLarge/2, iImageFrameHeightLarge/2))) {

						//edited by Mike, 20251112; from 20251111
						var bHasReducedHeroManaOutput=reduceHeroMana(3);
						
						if (!bHasReducedHeroManaOutput) {
							return;
						}
						
						bHasHeroHitMonster=true;
						iHeroAttackAnimationDelayCount=0;
						iHeroAttackAnimationCount=0;//-1;
						
						iHeroAttackComboCount++;

						//alert("DITO!!!");
					
						bIsExecutingShake=true;
											
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayBombMonsterWithIdCount[MONSTER_POSX],inputArrayBombMonsterWithIdCount[MONSTER_POSY]);


						//added by Mike, 20251110
						//skelMonsterImageTilePosX and PosY; not referenced if passed as parameter					
						//-------------------------------

						let iMonsterImageTilePosX=inputArrayBombMonsterWithIdCount[MONSTER_POSX];
						let iMonsterImageTilePosY=inputArrayBombMonsterWithIdCount[MONSTER_POSY];

						//push monster out
						if (bIsHeroFacingLeftOrRight) {
							if (bIsHeroFacingLeft) {
								if (iMonsterImageTilePosX+iImageFrameWidthLarge/2<mainImageTilePosX) {	
									iMonsterImageTilePosX-=iImageFrameWidthLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosX>mainImageTilePosX+iImageFrameWidthLarge/2) {	
									iMonsterImageTilePosX+=iImageFrameWidthLarge/20;
								}
							}				

						}
						
						if (bIsHeroFacingUpOrDown) {
							if (bIsHeroFacingUp) {
								if (iMonsterImageTilePosY+iImageFrameHeightLarge/2<mainImageTilePosY) {	
									iMonsterImageTilePosY-=iImageFrameHeightLarge/20;
								}
							}
							else {
								if (iMonsterImageTilePosY>mainImageTilePosY+iImageFrameHeightLarge/2) {	
									iMonsterImageTilePosY+=iImageFrameHeightLarge/20;
								}
							}
						}
						
						inputArrayBombMonsterWithIdCount[MONSTER_POSX]=iMonsterImageTilePosX;
						inputArrayBombMonsterWithIdCount[MONSTER_POSY]=iMonsterImageTilePosY;
						//-------------------------------
					

						setExplosionEffectPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault/2,inputArrayBombMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightDefault/2);
	
						actorLastAttackedByHero=inputArrayBombMonsterWithIdCount[MONSTER_OBJECT];
						inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]--;
	
	
						if (inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]<=0) {
							inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
							inputArrayBombMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
							
							//removed by Mike, 20251124
							//iCurrMonsterDeathCount++;

							setExplosionEffectPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault/2,inputArrayBombMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightDefault/2);
						}
/*
						else {
							//alert("iSkelMonsterHP!!!"+iSkelMonsterHP);

							actorLastAttackedByHero=inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT];

							inputArrayRunningWraithMonsterWithIdCount[MONSTER_CURRENT_HP]--;
						}					
*/						


						//deal damage if hero collides with this monster; bomb
						heroHitByMonsterWithType(mainImageTilePosX,mainImageTilePosY, inputArrayBombMonsterWithIdCount[MONSTER_POSX],inputArrayBombMonsterWithIdCount[MONSTER_POSY], iMonsterAttackDamageDefault, MONSTER_TYPE_VAL_BOMB);	
						
						setMonsterDeathAnimationPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]-iImageFrameWidthDefault/2, inputArrayBombMonsterWithIdCount[MONSTER_POSY]-iImageFrameHeightDefault/2, MONSTER_TYPE_VAL_BOMB);
					}
					
					else {		
						
						if (!bHasHeroHitMonster) {
						//decide if will attack; 
						
							//deal damage if hero collides with this monster
							//heroHitByMonster(mainImageTilePosX,mainImageTilePosY, batMonsterImageTilePosX,batMonsterImageTilePosY, iMonsterAttackDamageDefault);		

							heroHitByMonsterWithType(mainImageTilePosX,mainImageTilePosY, inputArrayBombMonsterWithIdCount[MONSTER_POSX],inputArrayBombMonsterWithIdCount[MONSTER_POSY], iMonsterAttackDamageDefault, MONSTER_TYPE_VAL_BOMB);	

							//resetProjectile();
		
							setMonsterDeathAnimationPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]-iImageFrameWidthDefault/2, inputArrayBombMonsterWithIdCount[MONSTER_POSY]-iImageFrameHeightDefault/2, MONSTER_TYPE_VAL_BOMB);

							inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]--;
		
							if (inputArrayBombMonsterWithIdCount[MONSTER_CURRENT_HP]<=0) {
								inputArrayBombMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
								inputArrayBombMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
								
								//removed by Mike, 20251124
								//iCurrMonsterDeathCount++;

								setExplosionEffectPosition(inputArrayBombMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault/2,inputArrayBombMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightDefault/2);
							}
						}
					}
				}
			}
		//}
	}	



	function verifyHeroSniperShotCollideWithWraithMonsters(inputArrayWraithMonsterWithIdCount) {
		if (!inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { 

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {
			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY]);
					
					//TODO: -update: this
					setFireballExplosionEffectPosition(inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/4,inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4);
					
					inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}

	function verifyHeroSniperShotCollideWithRunningWraithMonsters(inputArrayRunningWraithMonsterWithIdCount) {
		if (!inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { 

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {
			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotSniper) {
					monsterHitByHeroSniperShot(mainImageTileSniperShotPosX,mainImageTileSniperShotPosY, inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]);
					
					//TODO: -update: this
					setFireballExplosionEffectPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthLarge/4,inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeightLarge/4);
					
					inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;					
				}
			}
		}
	}

	
	function verifyHeroCollideWithSnakeMonsters(inputArraySnakeMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);

			if (!inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
					//alert("HALLO"); 	
					
					//verify if hero attacked
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault))) {
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY]);
												
						setExplosionEffectPosition(inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY]);
						
						inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
						inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
						iCurrMonsterDeathCount++;						
					}
					else {			
/*					
						bIsHeroAttacked=true;
						bIsExecutingShake=true;
*/
						//Usbong SFZ
						//TODO: -add: hitBy(...)
						heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY],iMonsterAttackDamageDefault);
					}
				}
			}
		//}
	}		
	
	function verifyHeroFireballCollideWithWraithMonsters(inputArrayWraithMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

		if (!inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {	
			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
					//alert("HALLO"); 	
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayWraithMonsterWithIdCount[MONSTER_POSX],inputArrayWraithMonsterWithIdCount[MONSTER_POSY]);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(inputArrayWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidth/2,inputArrayWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeight/2);
					
					inputArrayWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;
				}
			}
		}
	}

	function verifyHeroFireballCollideWithRunningWraithMonsters(inputArrayRunningWraithMonsterWithIdCount) {
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		if (!inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthLarge, iImageFrameHeightLarge)) {	
			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
					//alert("HALLO"); 	
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX],inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidth/2,inputArrayRunningWraithMonsterWithIdCount[MONSTER_POSY]+iImageFrameHeight/2);
					
					inputArrayRunningWraithMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArrayRunningWraithMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;
				}
			}
		}
	}


	function verifyHeroFireballCollideWithSnakeMonsters(inputArraySnakeMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

		if (!inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
			
			//bIsHeroAttacked=false;		
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
					//alert("HALLO"); 	
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY]);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(inputArraySnakeMonsterWithIdCount[MONSTER_POSX],inputArraySnakeMonsterWithIdCount[MONSTER_POSY]);
					
					inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;
				}
			}
		}
	}			
	
	function verifyHeroCollideWithGrassMonsters(inputArrayGrassMonsterWithIdCount) {
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		if (!inputArrayGrassMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}

/*		
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayGrassMonsterWithIdCount[MONSTER_POSX],inputArrayGrassMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
*/
			var iGrassXOffset=iImageFrameWidthDefault*0.5;
			var iGrassYOffset=iImageFrameHeightDefault*0.5;
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArrayGrassMonsterWithIdCount[MONSTER_POSX]+iGrassXOffset,inputArrayGrassMonsterWithIdCount[MONSTER_POSY]+iGrassYOffset, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault-iGrassXOffset, iImageFrameHeightDefault-iGrassYOffset)) {
				//alert("HALLO"); 	
				
				//verify if hero attacked
/*				
				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, inputArrayGrassMonsterWithIdCount[MONSTER_POSX],inputArrayGrassMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault))) {
*/				
				//no need to cut grass if destination is at different location
				if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, inputArrayGrassMonsterWithIdCount[MONSTER_POSX]+iGrassXOffset,inputArrayGrassMonsterWithIdCount[MONSTER_POSY]+iGrassYOffset, iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault-iGrassXOffset, iImageFrameHeightDefault-iGrassYOffset))) {

					if (bHasFired) {
						//monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayGrassMonsterWithIdCount[MONSTER_POSX],inputArrayGrassMonsterWithIdCount[MONSTER_POSY]);
							
						grassMonsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArrayGrassMonsterWithIdCount[MONSTER_POSX],inputArrayGrassMonsterWithIdCount[MONSTER_POSY]);
							
						setGrassCutEffectPosition(inputArrayGrassMonsterWithIdCount[MONSTER_POSX],inputArrayGrassMonsterWithIdCount[MONSTER_POSY]);
						
						inputArrayGrassMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
						inputArrayGrassMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;					
					}
				}
			}
		}
	}			
	
	function verifyHeroCollideWithSlimeMonsters(iSlimeCount, inputArraySlimeMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);

			if (!inputArraySlimeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
			//bIsHeroAttacked=false;		
			
			if (isPointsOfRectIntersectingPointsOfRectMonster(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
				//verify if hero attacked
				//if (bHasFired && bHasHeroShotFireball) {
				if (bHasHeroShotFireball) {
					//alert("HALLO"); 	
					monsterHitByHeroFireball(parseInt(mainImageTileFireballProjectilePosX),parseInt(mainImageTileFireballProjectilePosY), inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY]);
					//setExplosionEffectPosition(batMonsterImageTilePosX,batMonsterImageTilePosY);
					
					setFireballExplosionEffectPosition(inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY]);
					
					inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
					inputArraySlimeMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
					iCurrMonsterDeathCount++;
										
					if (iSlimeCount==0) {
						//show the rest of the children slime
						arraySlimeMonsterCountId[1][MONSTER_OBJECT].style.visibility="visible";
						arraySlimeMonsterCountId[1][MONSTER_IS_ACTIVE]=true;
						arraySlimeMonsterCountId[1][MONSTER_POSX]=inputArraySlimeMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault*1; //3
						arraySlimeMonsterCountId[1][MONSTER_POSY]=inputArraySlimeMonsterWithIdCount[MONSTER_POSY];
						
						arraySlimeMonsterCountId[2][MONSTER_OBJECT].style.visibility="visible";
						arraySlimeMonsterCountId[2][MONSTER_IS_ACTIVE]=true;
						arraySlimeMonsterCountId[2][MONSTER_POSX]=inputArraySlimeMonsterWithIdCount[MONSTER_POSX]-iImageFrameWidthDefault*1; //3
						arraySlimeMonsterCountId[2][MONSTER_POSY]=inputArraySlimeMonsterWithIdCount[MONSTER_POSY];
					}											
				}
			}
		}
	}		

	function verifyHeroFireballCollideWithSlimeMonsters(iSlimeCount, inputArraySlimeMonsterWithIdCount) {
			
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	
	
		//alert(inputArraySnakeMonsterWithIdCount[MONSTER_IS_ACTIVE]);

	
//		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			//inputArraySnakeMonsterWithIdCount[MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);

			//alert(arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]);

			if (!inputArraySlimeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
				return;
			}		
			else { //if (isBatMonsterTileActive) {						

				if (bIsHeroAttacked) {
					//bIsHeroAttacked=false;
					return;
				}
			
			//bIsHeroAttacked=false;		

			//+iImageFrameWidthDefault/2; iImageFrameHeightDefault/2
				if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {			
					//alert("HALLO"); 	
					
					//verify if hero attacked
					if (bHasFired && (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2, inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY], iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault))) {
						monsterHitByHero(mainImageTilePosX,mainImageTilePosY, inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY]);
												
						setExplosionEffectPosition(inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY]);
						
						inputArraySlimeMonsterWithIdCount[MONSTER_OBJECT].style.visibility="hidden";				
						inputArraySlimeMonsterWithIdCount[MONSTER_IS_ACTIVE]=false;
						iCurrMonsterDeathCount++;						
						
						if (iSlimeCount==0) {
							//show the rest of the children slime
							arraySlimeMonsterCountId[1][MONSTER_OBJECT].style.visibility="visible";
							arraySlimeMonsterCountId[1][MONSTER_IS_ACTIVE]=true;
							arraySlimeMonsterCountId[1][MONSTER_POSX]=inputArraySlimeMonsterWithIdCount[MONSTER_POSX]+iImageFrameWidthDefault*1; //3
							arraySlimeMonsterCountId[1][MONSTER_POSY]=inputArraySlimeMonsterWithIdCount[MONSTER_POSY];
							
							arraySlimeMonsterCountId[2][MONSTER_OBJECT].style.visibility="visible";
							arraySlimeMonsterCountId[2][MONSTER_IS_ACTIVE]=true;
							arraySlimeMonsterCountId[2][MONSTER_POSX]=inputArraySlimeMonsterWithIdCount[MONSTER_POSX]-iImageFrameWidthDefault*1; //3
							arraySlimeMonsterCountId[2][MONSTER_POSY]=inputArraySlimeMonsterWithIdCount[MONSTER_POSY];
						}						
					}
					else {			
/*					
						bIsHeroAttacked=true;
						bIsExecutingShake=true;
*/
						//note: no need to destroy slime monster
						//slime attacks when attempted to be hit
						//if (inputArraySlimeMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
							heroHitByMonster(mainImageTilePosX,mainImageTilePosY, inputArraySlimeMonsterWithIdCount[MONSTER_POSX],inputArraySlimeMonsterWithIdCount[MONSTER_POSY],iMonsterAttackDamageDefault);
						//}
					}
				}
			}
		//}
	}			
	
	function verifyHeroCollideWithPearl(pearlImageTileWithId) {
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

/*	
		if (!inputArrayGrassMonsterWithIdCount[MONSTER_IS_ACTIVE]) {
			return;
		}		
		else { //if (isBatMonsterTileActive) {						

			if (bIsHeroAttacked) {
				//bIsHeroAttacked=false;
				return;
			}
*/					
			if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, parseInt(pearlImageTileWithId.style.left), parseInt(pearlImageTileWithId.style.top), iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {		

				pearlImageTileWithId.style.visibility="hidden";
				//TODO: -set is_active to false

/*				
				//==========================================
				var myAudioEffectSolved = document.getElementById("myAudioEffectSolvedId");

				myAudioEffectSolved.setAttribute("src", sAudioEffectSolved);

				//fMyAudioEffectVolume=0.2;
				myAudioEffectSolvedVolume=1.0;
				myAudioEffectSolved.volume=myAudioEffectSolvedVolume;
				myAudioEffectSolved.loop=false;
				myAudioEffectSolved.play();
				//==========================================
*/
				
				iCurrPearlCount++;
				
				switch(iCurrMapLocation) {
					case 42:
						bHasObtainedPearlAtRoom42=true;
						break;
					case 41:
						bHasObtainedPearlAtRoom41=true;
						break;
					case 33:
						bHasObtainedPearlAtRoom33=true;
						break;						
					case 43:
						bHasObtainedPearlAtRoom43=true;
						break;						
					case 22:
						bHasObtainedPearlAtRoom22=true;
						break;						
					case 11: //KEY
						//bHasObtainedPearlAtRoom11=true;
						break;												
					case 12:
						bHasObtainedPearlAtRoom12=true;
						break;												
				}
			}
/*			
		}
*/		
	}		
	
	function verifyHeroCollideWithSpecialItem(specialItemImageTileWithId) {
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");	

		if (isPointsOfRectIntersectingPointsOfRectMonster(mainImageTilePosX,mainImageTilePosY, parseInt(specialItemImageTileWithId.style.left), parseInt(specialItemImageTileWithId.style.top), iImageFrameWidth, iImageFrameHeight, iImageFrameWidthDefault, iImageFrameHeightDefault)) {		

			specialItemImageTileWithId.style.visibility="hidden";
			//TODO: -set is_active to false

/*			
			//==========================================
			var myAudioEffectSolved = document.getElementById("myAudioEffectSolvedId");

			myAudioEffectSolved.setAttribute("src", sAudioEffectSolved);

			//fMyAudioEffectVolume=0.2;
			myAudioEffectSolvedVolume=1.0;
			myAudioEffectSolved.volume=myAudioEffectSolvedVolume;
			myAudioEffectSolved.loop=false;
			myAudioEffectSolved.play();
			//==========================================
*/
			
			//iCurrKeyCount++;
			
			switch(iCurrMapLocation) {
				case 1: //KEY
					bHasObtainedKeyAtRoom1=true;
					break;		
				case 32: //amulet
					bHasObtainedAmuletAtRoom32=true;
					break;						
			}
		}
	}			
	
	function myUpdateFunction() {
		//removed by Mike, 20251102
		//using square for main dungeon
		//iHorizontalOffset=(640-iStageMaxHeight)/2;

		var myFavicon = document.getElementById("faviconImageId");
		var deathCountImageTile = document.getElementById("deathCountImageId");

		var wolfImageTile = document.getElementById("wolfImageTileId");
		
		var textNewGameDiv = document.getElementById("textNewGameDivId");
		var textContinueGameDiv = document.getElementById("textContinueGameDivId");

		var textLevelUpLifeDiv = document.getElementById("textLevelUpLifeDivId");
		var textLevelUpStaminaDiv = document.getElementById("textLevelUpStaminaDivId");
		var textLevelUpSpeedDiv = document.getElementById("textLevelUpSpeedDivId");

		var mainImageTile = document.getElementById("mainImageTileImageId");

		//added by Mike, 20231124
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");

		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

		//added by Mike, 20230427
		var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");

		var mainImageTileFireballProjectile = document.getElementById("mainImageTileFireballProjectileImageId");
		
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");
		
		//var bossBattleBgImage = document.getElementById("bossBattleBgImageId");
		var bossBattleBgImageBeach = document.getElementById("bossBattleBgImageBeachId");
		var bossBattleBgImageBeachPart2 = document.getElementById("bossBattleBgImageBeachPart2Id");

		var bossBattleBgImagePart2 = document.getElementById("bossBattleBgImagePart2Id");		
		var bossBattleBgImagePart3 = document.getElementById("bossBattleBgImagePart3Id");		

		//var grassBgImage = document.getElementById("grassBgImageId");	

		//added by Mike, 20231125
		var bossMonsterImageTile = document.getElementById("bossMonsterImageId");

/*
	var batMonsterImageTile = document.getElementById("batMonsterImageId");
	//var snakeMonsterImageTile = document.getElementById("snakeMonsterImageId");
	
	for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
		arraySnakeMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("snakeMonsterImageId"+iCount);
	}
*/

		var textStoryDiv = document.getElementById("textStoryDivId");

		var textStatusDiv = document.getElementById("textStatusDivId");
		var textStatusBackgroundDiv = document.getElementById("textStatusBackgroundDivId");

		var textEnterDiv = document.getElementById("textEnterDivId");

		//added by Mike, 20231119
		var explosionEffectImage = document.getElementById("explosionEffectImageId");
		var fireballExplosionEffectImage = document.getElementById("explosionEffectImageId");
		
		var grassCutEffectImage = document.getElementById("grassCutEffectImageId");
				
		//added by Mike, 20231126
		var explosionEffectToMonsterImage = document.getElementById("explosionEffectToMonsterImageId");

		//added by Mike, 20251115
/*		
		var walkOnSnowEffectImage = document.getElementById("walkOnSnowEffectImageId");
		var walkOnSnowEffectImage2 = document.getElementById("walkOnSnowEffectImageId2");
*/

		//added by Mike, 20231121
		var mouseInputImage = document.getElementById("mouseInputImageId");

		//added by Mike, 20231121
		var titleImage = document.getElementById("titleImageId");
		//titleImage.style.visibility="hidden";
		var titleImageFrame2 = document.getElementById("titleImageFrame2Id");
		//titleImage.style.visibility="hidden";

		//added by Mike, 20231122
		var howToPlayGuideImage = document.getElementById("howToPlayGuideImageId");

		//added by Mike, 20231129
		var howToPlayGuideImageFrame2 = document.getElementById("howToPlayGuideImageFrame2Id");

/*
	var textScoreDiv = document.getElementById("textScoreDivId");

	//note: correct sequence to cause correct OUTPUT
	textScoreDiv.innerHTML = iScore;

	iTextScoreDivWidth = (textScoreDiv.clientWidth)+iTextScoreDivWidthOffset;

	//added by Mike, 20231125
	var textScoreShadowDiv = document.getElementById("textScoreShadowDivId");
	textScoreShadowDiv.innerHTML = iScore;

	//textScoreShadowDiv.style.left = textScoreDiv.style.left;
	textScoreShadowDiv.style.left = parseInt(textScoreDiv.style.left)+iTextScoreShadowDivWidthOffset +"px";
*/

	var heroLifeBarStatusImageTile = document.getElementById("heroLifeBarStatusImageTileId");
	
	heroLifeBarStatusImageTile.style.left=0+iImageFrameWidthDefault*.1+"px"; 
	heroLifeBarStatusImageTile.style.top=0+iImageFrameWidthDefault*.1+"px";
	
	var textLifeBarDiv = document.getElementById("textLifeBarDivId");

	var textTimeDiv = document.getElementById("textTimeDivId");
	var textPearlStatusDiv = document.getElementById("textPearlStatusDivId");	
	var textMonsterDeathStatusDiv = document.getElementById("textMonsterDeathStatusDivId");
	var textHeroDeathStatusDiv = document.getElementById("textHeroDeathStatusDivId");

    //added by Mike, 20230313
    //reference: https://www.w3schools.com/tags/canvas_fillrect.asp;
    //last accessed: 2020911
    var myCanvas = document.getElementById("myCanvasId");
    var myCanvasContext = myCanvas.getContext("2d");
    //myCanvasContext.clearRect(0, 0, iStageMaxWidth, iStageMaxHeight)
	
	//edited by Mike, 20251105
    //myCanvasContext.fillStyle = "#f3f3f3"; //"#f9f9f9"; //"#f3f3f3"; //"#ffffff"; //white background//stage
    myCanvasContext.fillStyle = "#000000"; //black background//stage
    
	myCanvasContext.fillRect(0, 0, iStageMaxWidth, iStageMaxHeight);


    //added by Mike, 20231126
    var myCanvasTwo = document.getElementById("myCanvasTwoId");
    var myCanvasTwoContext = myCanvasTwo.getContext("2d");
    
	//added by Mike, 20251113
	myCanvasContext.clearRect(0, 0, iStageMaxWidth, iStageMaxHeight);
	myCanvasTwoContext.clearRect(0, 0, iStageMaxWidth, iStageMaxHeight);


    //edited by Mike, 20231126
    /*myCanvasTwoContext.fillStyle = "#000000"; //"#ffffff"; //white background//stage
    */
	//myCanvasTwoContext.fillStyle = "#261912"; //brown background//stage


    //note: max is 150 for height?...
    //myCanvasTwoContext.fillRect(0, 0, iStageMaxWidth, 120);//iStageMaxHeight/2);
    /*myCanvasTwoContext.fillRect(0, 0, iStageMaxWidth, iStageMaxHeight);//iStageMaxHeight/2);
	*/

	//added by Mike, 20251103
	//drawChar(iImageFrameWidthDefault*5,iImageFrameHeightDefault*0,"5");
	
	//removed by Mike, 20251125
	//drawString(iImageFrameWidthDefault*7,iImageFrameHeightDefault*0,"ABC123");

/*
	//edited by Mike, 20241114	
	//iCurrSnowFlakeCountMax
	for (iCurrSnowFlakeCount=0; iCurrSnowFlakeCount<10; iCurrSnowFlakeCount++) {
		var myDivSnowEffect = document.getElementById("divSnowEffectId"+iCurrSnowFlakeCount);
		myDivSnowEffect.style.visibility="hidden";		
	}
*/	
	
	
/*	
	bossBattleBgImage.style.left=0+iHorizontalOffset+"px";
	bossBattleBgImage.style.top=0+iVerticalOffsetInnerScreen+"px";	
*/
	bossBattleBgImageBeach.style.left=0+iHorizontalOffset+"px";
	bossBattleBgImageBeach.style.top=0+iVerticalOffsetInnerScreen+"px";	

	bossBattleBgImageBeachPart2.style.left=0+iHorizontalOffset+"px";
	bossBattleBgImageBeachPart2.style.top=0+iVerticalOffsetInnerScreen+"px";	
	

	if (bIsExecutingShake) {
		iShakeOffsetWidth=iShakeOffsetWidthMax;
		iShakeOffsetHeight=iShakeOffsetHeightMax;

		//alert("dito");

		if (iDestroyHumanShakeDelayCount==iDestroyHumanShakeDelayMax) {
			//myKeysDown[KEY_K] = FALSE;
    		bIsExecutingShake = false;
    		iDestroyHumanShakeDelayCount=0;
			
			//bIsHeroAttacked=false;
    	}
    	else {
				iDestroyHumanShakeDelayCount+=1;
    	}
	}
	else {
  			iShakeOffsetWidth=0;
			iShakeOffsetHeight=0;
	}

    myCanvas.style.top = (iVerticalOffsetInnerScreen+0)+iShakeOffsetHeight+"px";

    iHorizontalOffset=myCanvas.getBoundingClientRect().x+iShakeOffsetWidth;


    myCanvasTwo.style.top = myCanvas.style.top;
    myCanvasTwo.style.left = myCanvas.style.left;

		if (!bHasViewedTitle) {
			titleImage.style.visibility="visible";

/*			
			if (iTitleImageFrame2DelayCount<iTitleImageFrame2DelayCountMax) {
					iTitleImageFrame2DelayCount++;
			}
			else {
				iTitleImageFrame2DelayCount=0;

				if (titleImageFrame2.style.visibility == "visible") {
					titleImageFrame2.style.visibility = "hidden";
				}
				else {
					titleImageFrame2.style.visibility = "visible";
				}
			}
*/			
			//Game Off 2021; TUGON
			if (iTitleImageFrame2DelayCount<20) {//5) {
				titleImageFrame2.style.visibility = "visible";
			}
			else {
				if (iTitleImageFrame2DelayCount>40) {//10) {
					iTitleImageFrame2DelayCount=0;
				}
				titleImageFrame2.style.visibility = "hidden";
			}			
			iTitleImageFrame2DelayCount++;			


			executeEnterClickAnimation();
			////executeMouseClickAnimation();	
		}

		if (bHasPressedStart) {
			
			//add delay to solve inadvertent double tap
			iInputDelayCount++;
			
			titleImage.style.visibility="hidden";
			titleImageFrame2.style.visibility="hidden";

			bHasViewedTitle=true;

			textEnterDiv.style.visibility="hidden";
			
			if (!bHasViewedHowToPlayGuide) {
				mouseInputImage.style.visibility="hidden";
				howToPlayGuideImage.style.visibility = "visible";

				if (iHowToPlayGuideImageFrame2DelayCount<iHowToPlayGuideImageFrame2DelayCountMax) {
					iHowToPlayGuideImageFrame2DelayCount++;
				}
				else {
					iHowToPlayGuideImageFrame2DelayCount=0;

					if (howToPlayGuideImageFrame2.style.visibility == "visible") {
						howToPlayGuideImageFrame2.style.visibility = "hidden";
					}
					else {
						howToPlayGuideImageFrame2.style.visibility = "visible";
					}
				}
				
				var iHowToPlayGuideImageWidth = (howToPlayGuideImage.clientWidth);

				var iHowToPlayGuideImageHeight = (howToPlayGuideImage.clientHeight);

				howToPlayGuideImage.style.top = (iVerticalOffsetInnerScreen+0+iStageMaxHeight/2 -iHowToPlayGuideImageHeight/2)+"px";

				howToPlayGuideImage.style.left = 0+iHorizontalOffset+iStageMaxWidth/2 -iHowToPlayGuideImageWidth/2 +"px";

				//added by Mike, 20231129
				howToPlayGuideImageFrame2.style.top = howToPlayGuideImage.style.top;

				howToPlayGuideImageFrame2.style.left = howToPlayGuideImage.style.left;
				
				return;
			}
			else {
				//----------------------------------
				myCanvasTwo.style.visibility="visible";

				//bossBattleBgImage.style.visibility = "visible"; //default

				bossBattleBgImageBeach.style.visibility = "hidden";
				bossBattleBgImageBeachPart2.style.visibility = "hidden";
				
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart2.style.left = 0+"px"; 			
				bossBattleBgImagePart2.style.top = 0+iStageMaxHeight-bossBattleBgImagePart2.clientHeight+"px";
				
				//cave; default
				bossBattleBgImagePart3.style.visibility = "hidden";//visible";				
				bossBattleBgImagePart3.style.left = 0+"px"; 			
				bossBattleBgImagePart3.style.top = 0+iStageMaxHeight-bossBattleBgImagePart3.clientHeight+"px";

				howToPlayGuideImage.style.visibility = "hidden";
				howToPlayGuideImageFrame2.style.visibility = "hidden";
				
				if (bIsHeroInTank) {
					mainImageTileTankBody.style.visibility = "visible";			
				}
				else {
					mainImageTileHeroBody.style.visibility = "visible";
				}			
				
				//pearlStatusImageTile.style.visibility="visible";
				
				//----------------------------------
			}


		//executeTransitionEffect();

	  //debug
	  //bIsMissionDone=true;
	  bIsMissionStarted=true;

	  if (iCurrPearlCount>=iCurrPearlCountMax) {		
		if (!bIsMissionDone) {
			iCurrTextCharacterCount=0;
		}
		bIsMissionDone=true;
	  }
/*
	  //debug	  
	  bHasViewedMissionIntro=true;
	  bIsMissionDone=true;
	  iCurrMonsterDeathCount=9;//10;//999;//14;//16;					
	  iCurrHeroDeathCount=0;//1
*/					

	  sText="";
	  textStatusDiv.innerHTML=sText;
	  textStoryDiv.innerHTML=sText;

      if (bIsMissionStarted) {
		//added by Mike, 20251125
		//mainImageTileHeroBody.style.visibility="hidden";
	  
		if (!bHasViewedMissionIntro) {
		
			bossBattleBgImageBeach.style.visibility = "hidden";
			bossBattleBgImagePart2.style.visibility = "hidden";
			bossBattleBgImagePart3.style.visibility = "hidden";	
			
			heroLifeBarStatusImageTile.style.visibility = "hidden";		
			mainImageTileHeroBody.style.visibility = "hidden";
		
			//edited by Mike, 20251108
			//sText = "The river underground<br/>hides 6 precious pearls.<br/><br/>But only those who can<br/>find its amulet would be<br/>granted the river's power.";
			
			//sText = "";
			//sText = "GAME & WATCH !?";
			//sText = "Keyboard Press + Attack<br/>to do a sniper shot.";
			//sText = "HURRY! GO RIGHT!!!";

			//sText = "The Empire's generosity hardly<br/> reaches the Outer Waves.<br/><br/> In this part of the galaxy, people<br/> have learned to survive, without<br/> any help from the Empire.<br/><br/> Meanwhile, the Undead continue<br/> to advance and attack...<br/><br/> What was that! An explosion!<br/><br/> Hurry! Take this message<br/> and bring it to the Emperor!";
			
/*
			switch (iCurrMissionIntroPage) {
				case 0:
					sText = "The Empire's generosity hardly reaches the Outer Waves.";
					break;
				case 1:
					sText = "In this part of the galaxy, people have learned to survive,";
					break;
				case 2:
					sText = "without any help from the Empire.";
					break;
				case 3:
					sText = "Meanwhile, the Undead continue to advance and attack...";
					break;
				case 4:
					sText = "What was that! An explosion!";
					break;
				case 5:
					sText = "Hurry! Take this message and bring it to the Emperor!"
					break;
			}
*/					
			switch (iCurrMissionIntroPage) {
				case 0:
					sText = "The Empire's generosity hardly extends to the far reaches of the galaxy. <br/><br/>Distant from Imperial affairs, the people of the Outer Waves have learned to survive, without relying on any help from the Empire.";
					break;
				case 1:
					sText = "Meanwhile, the creatures of the Undead continue to advance, bringing death in the service of their Dark Lord...";
					break;
				case 2:
					sText = "What was that!";
					break;
				case 3:
					sText = "An explosion!";
					break;
				case 4:
					sText = "Hurry! Take this message and bring it to the Emperor!";
					break;
			}

			//var sCurrText="";
			
			//sText="<span style='text-align: center;'>"+sText+"</span>";
			//sText="<span style='text-align: center;'>"+sText+"</span>";

			

/*			//scrolling
			iCurrTextCharacterCountMax=sText.length;
	
			//include last character
//			if (iCurrTextCharacterCount<iCurrTextCharacterCountMax) {
			if (iCurrTextCharacterCountEffectDelayCount>=iCurrTextCharacterCountEffectDelayCountMax) {

				if (iCurrTextCharacterCount<=iCurrTextCharacterCountMax) {
					//sCurrText=sText.substring(0,iCurrTextCharacterCount);
				}
				//iCurrTextCharacterCount++;
				iTextStatusOffsetY++;
				
				iCurrTextCharacterCountEffectDelayCount=0;
			}
			else {
				iCurrTextCharacterCountEffectDelayCount++;
			}
						
  			//textStatusDiv.innerHTML = sCurrText;//sText;
  			textStatusDiv.innerHTML = sText;
*/


/*
  			//alert(sText.length);
  			var iTextStatusDivWidth = (textStatusDiv.clientWidth);
  			var iTextStatusDivHeight = (textStatusDiv.clientHeight);
*/

/*			
			textStatusDiv.style.transform = "scale("+0.5+","+0.75+")";	
			//textStatusDiv.style.transformOrigin = "12.5% 12.5%"; 	//scale 2		
			textStatusDiv.style.transformOrigin = "6.125% 6.125%"; //scale 3, 4
*/			
			
			
			//added by Mike, 20231128
			//var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");


  			//TODO: -update: this
  			//iOffsetWidth
  			//textStatusDiv.style.left = 0+iHorizontalOffset+iStageMaxWidth/2 -iTextStatusDivWidth/2 +"px";
			
			//edited by Mike, 20251122
		//textStatusDiv.style.left=0+iStageMaxWidth/2-textStatusBackgroundDiv.clientWidth/2;


  				//textStatusDiv.style.left = 0+iHorizontalOffset+iOffsetWidth+"px";

  			//iOffsetHeight
  			//textStatusDiv.style.top = 0+iStageMaxHeight-iTextStatusDivHeight*1.5+"px";
  			//textStatusDiv.style.top = 0+"px";
			//textStatusDiv.style.top = 0+(iStageMaxHeight*0.10)+"px";
			//textStatusDiv.style.top = 0+(iStageMaxHeight*0.15)+"px";

			//textStatusDiv.style.top = 0+(iStageMaxHeight*0.15-iTextStatusOffsetY)+"px";

			if (iCurrMissionIntroPage>1) {
			
				//textStatusDiv.innerHTML = sText;
			
				iCurrTextCharacterCountMax=sText.length;
		
				//include last character
	//			if (iCurrTextCharacterCount<iCurrTextCharacterCountMax) {
				if (iCurrTextCharacterCountEffectDelayCount>=iCurrTextCharacterCountEffectDelayCountMax) {

					if (iCurrTextCharacterCount<=iCurrTextCharacterCountMax) {
						sCurrText=sText.substring(0,iCurrTextCharacterCount);
					}
					iCurrTextCharacterCount++;
					
					iCurrTextCharacterCountEffectDelayCount=0;
				}
				else {
					iCurrTextCharacterCountEffectDelayCount++;
				}
							
				textStatusDiv.innerHTML = sCurrText;//sText;
			
				textStatusDiv.style.left=0+iStageMaxWidth*0.2;
				textStatusDiv.style.top = 0+(iStageMaxHeight*0.4-iTextStatusOffsetY)+"px";

				textStatusBackgroundDiv.style.visibility="visible";//"hidden";
				textStatusDiv.style.visibility="visible";
				textStoryDiv.style.visibility="hidden";
			}
			//scrollable
			else {
			
/*			
iCurrTextCharacterCountMax=sText.length;
	
			//include last character
//			if (iCurrTextCharacterCount<iCurrTextCharacterCountMax) {
			if (iCurrTextCharacterCountEffectDelayCount>=iCurrTextCharacterCountEffectDelayCountMax) {

				if (iCurrTextCharacterCount<=iCurrTextCharacterCountMax) {
					//sCurrText=sText.substring(0,iCurrTextCharacterCount);
				}
				//iCurrTextCharacterCount++;
				iTextStatusOffsetY++;
				
				iCurrTextCharacterCountEffectDelayCount=0;
			}
			else {
				iCurrTextCharacterCountEffectDelayCount++;
			}
						
  			//textStatusDiv.innerHTML = sCurrText;//sText;
  			textStatusDiv.innerHTML = sText;
*/
			
				textStoryDiv.innerHTML = sText;
			
				textStoryDiv.style.left=0+iStageMaxWidth*0.15;
				textStoryDiv.style.top = 0+(iStageMaxHeight*0.15-iTextStatusOffsetY)+"px";

				textStatusBackgroundDiv.style.visibility="hidden";
				textStatusDiv.style.visibility="hidden";
				textStoryDiv.style.visibility="visible";
			}

			
			//mainImageTileProjectile.style.visibility="hidden";
			textStatusBackgroundDiv.style.top=textStatusDiv.style.top;
		
			textStatusBackgroundDiv.style.left=0+iStageMaxWidth/2-textStatusBackgroundDiv.clientWidth/2;//textStatusDiv.style.left;//0;


			textStatusBackgroundDiv.style.width=iStageMaxWidth*0.60;
			//textStatusBackgroundDiv.style.width=iStageMaxWidth*0.5;

			//textStatusBackgroundDiv.style.height=iStageMaxHeight*0.4;////iStageMaxHeight*0.5;	
			textStatusBackgroundDiv.style.height=iStageMaxHeight*0.3;////iStageMaxHeight*0.5;	
			
			//added by Mike, 20251112
			//-----
/*			//buggy;
			if (iTextTriangleAnimationCount>=iTextTriangleAnimationCountMax) {
				//myCanvasTwoContext.clear();
				iTextTriangleAnimationCount=0;
			}
			else {
				drawTextTriangle(myCanvasTwoContext,0+iStageMaxWidth/2-textStatusBackgroundDiv.clientWidth/2,0+(iStageMaxHeight*0.15)); 

				iTextTriangleAnimationCount++;
			}
*/			
			//-----
			
			executeTimeDisplay();

			//removed by Mike, 20251102
			//drawMiniMap(myCanvasTwoContext,iStageMaxHeight-iInnerHorizontalOffset*0.85, 0+iStageMaxHeight/10);
	
	
			heroLifeBarStatusImageTile.style.visibility="hidden";

/*	
			//iCurrHeroLife=iCurrHeroLifeMax;
			drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,false); 

			if (bIsBossBattle) {
				drawBossLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+50, 00+iStageMaxHeight*0.35,false); 
			}

			//iCurrHeroMana=iCurrHeroManaMax;		
			drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left), 0+parseInt(textLifeBarDiv.style.bottom)+5,false); 			
			//drawPearlStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 
			drawSniperShotStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 


			if (bHasObtainedKeyAtRoom1) {
				drawKeyStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
			}

			if (bHasObtainedAmuletAtRoom32) {
				drawAmuletStatus(myCanvasTwoContext,iInnerHorizontalOffset/6+iImageFrameWidthDefault, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
			}

			//drawMonsterDeathStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault*2); 
			
			//note: using "textTimeDiv.style.top", instead of "bottom"
			//edited by Mike, 20251120
			//drawMonsterDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top)); 				
*/			

			//edited by Mike, 20251124
			//drawMonsterDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top));
			drawHeroDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top)); 
			
			return;
		}
		//else if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
		else if (iCurrMapLocation==61) {

			bossBattleBgImageBeach.style.visibility = "hidden";
			bossBattleBgImagePart2.style.visibility = "hidden";
			bossBattleBgImagePart3.style.visibility = "hidden";	
			
			//profile
			//heroLifeBarStatusImageTile.style.visibility = "hidden";
			mainImageTileHeroBody.style.visibility = "hidden";

			setAllActorsToHidden();

			//sText="";
			
			if (!bHasBeatenStage1Boss) {
				bIsShowingStage1End=false;
				bIsShowingStage2Start=true;
				return;
			}

			heroLifeBarStatusImageTile.style.visibility = "visible";

			drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,false); 

			iCurrHeroMana=iCurrHeroManaMax;
			iCurrHeroManaToBeDeducted=0;
			
			drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left), 0+parseInt(textLifeBarDiv.style.bottom)+5,false); 	
			
			drawSavedWolf();

			bHasHeroGottenSniperShot=true;
			
			//sText="<span style='text-align: center;'>Thanks for your help! Take this!<br/><br/>You got Sniper Shot of the Wolf!<br/><br/>Keyboard Press + Attack</span>";

			sText="Thanks for your help! Take this!<br/><br/>You got Sniper Shot of the Wolf!<br/><br/>Keyboard Press + Attack";
					
/*		
			textStatusDiv.innerHTML = sText;

  			//alert(sText.length);
  			var iTextStatusDivWidth = (textStatusDiv.clientWidth);
  			var iTextStatusDivHeight = (textStatusDiv.clientHeight);

			
			var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");


			textStatusDiv.style.left=0+iStageMaxWidth*0.15;

			textStatusDiv.style.top = 0+(iStageMaxHeight*0.15-iTextStatusOffsetY)+"px";
*/

			textStoryDiv.innerHTML = sText;

  			//alert(sText.length);
  			var iTextStoryDivWidth = (textStoryDiv.clientWidth);
  			var iTextStoryDivHeight = (textStoryDiv.clientHeight);

			var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");

			textStoryDiv.style.left=0+iStageMaxWidth*0.15;
			textStoryDiv.style.top = 0+(iStageMaxHeight*0.15-iTextStatusOffsetY)+"px";
  			
  			//textStatusDiv.style.visibility="visible";
			mainImageTileProjectile.style.visibility="hidden";
	
			executeTimeDisplay();
			
			if (iInputDelayAtStageTransitionCount>=iInputDelayAtStageTransitionCountMax) {
/*
				textLevelUpLifeDiv.style.visibility="visible";
				textLevelUpStaminaDiv.style.visibility="visible";
				textLevelUpSpeedDiv.style.visibility="visible";
*/				
				textStoryDiv.style.visibility="visible";
			}
			iInputDelayAtStageTransitionCount++;

/*
			if (iInputDelayAtStageTransitionCount>=iInputDelayAtStageTransitionCountMax*2) {
				return;
			}				
*/

			//iInputDelayAtStageTransitionCount++;
			
			return;
		
		}
		//else if ((iCurrMapLocation==63) && (bIsShowingStage2Start)) {
		else if (iCurrMapLocation==63) {

//alert("DITO");

			bossBattleBgImageBeach.style.visibility = "hidden";
			bossBattleBgImagePart2.style.visibility = "hidden";
			bossBattleBgImagePart3.style.visibility = "hidden";	
			
			//profile
			heroLifeBarStatusImageTile.style.visibility = "hidden";			
			mainImageTileHeroBody.style.visibility = "hidden";

//alert(">>>DITO");
			
			setAllActorsToHidden();

//alert(">>>>>>DITO");

			//sText="<span style='text-align: center;'>The Portal opens and transports you to Blue, the planet where the Emperor resides.</span>";
			
			sText="You've reached the Portal! Hurry! It'll transport you to the Imperial Palace!";
			
			textStatusDiv.innerHTML = sText;
			

  			//alert(sText.length);
  			var iTextStatusDivWidth = (textStatusDiv.clientWidth);
  			var iTextStatusDivHeight = (textStatusDiv.clientHeight);

			
			//var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");


			textStatusDiv.style.left=0+iStageMaxWidth*0.15;

			textStatusDiv.style.top = 0+(iStageMaxHeight*0.15-iTextStatusOffsetY)+"px";

  			//textStatusDiv.style.visibility="visible";
			mainImageTileProjectile.style.visibility="hidden";
	
			executeTimeDisplay();
			
			if (iInputDelayAtStageTransitionCount>=iInputDelayAtStageTransitionCountMax) {
/*
				textLevelUpLifeDiv.style.visibility="visible";
				textLevelUpStaminaDiv.style.visibility="visible";
				textLevelUpSpeedDiv.style.visibility="visible";
*/				
				textStatusDiv.style.visibility="visible";
			}
			iInputDelayAtStageTransitionCount++;
			
/*
			if (iInputDelayAtStageTransitionCount>=iInputDelayAtStageTransitionCountMax*2) {
				return;
			}	
*/
			//iInputDelayAtStageTransitionCount++;
			
			return;
		
		}
/*		
		else if ((iCurrMapLocation==71) && (bIsShowingStage2End)) {
		}		
*/		
		else {
			textStatusBackgroundDiv.style.visibility="hidden";
			textStatusDiv.style.visibility="hidden";
		}
				
		if (bIsMissionDone) {
			var sTextEnd = "<br/>Congratulations!<br/><br/>But the portal opens only<br/>to those with less than<br/>15 monsters vanquished.";

			if (iCurrMonsterDeathCount<15) { //best is 9 at most
				sTextEnd = "\"Micah!\"<br/><br/>Meanwhile, written on<br/>a mysterious note:<br/> \"The best is 9 at most.\"<br/><br/>To be continued...";

				if (iCurrMonsterDeathCount<=9) {
					sTextEnd = "\"Micah, let's give this fella<br/> a life of its own too!<br/><br/>Double tap to dash!<br/>Keyboard press + attack!\"<br/><br/>To be continued...";
					
					if (iCurrHeroDeathCount==0) {
						sTextEnd = "\"Micah!<br/><br/>There's not a minute <br/>to lose! Let's finish this<br/>in under 3 mins!\"<br/><br/>To be continued...";
						
						if (isElapsedTimeUnderThreeMins()) {
							sTextEnd = "\"Micah, great work!<br/><br/>The portal's ready.<br/><br/>Time for us to be off to<br/> Space Galaxy 999!\"<br/>";
						}
					}
				}
			}

			if (iCurrMonsterDeathCount>=999) {
				sTextEnd = "<br/>Welcome Home, <br/>Commander! <br/><br/>And...<br/>Thank you for playing!";
			}
			
			iCurrTextCharacterCountMax=sTextEnd.length;
			
			//include last character
//			if (iCurrTextCharacterCount<iCurrTextCharacterCountMax) {
			if (iCurrTextCharacterCount<=iCurrTextCharacterCountMax) {
				sCurrText=sTextEnd.substring(0,iCurrTextCharacterCount);
			}
			iCurrTextCharacterCount++;

  			textStatusDiv.innerHTML = sCurrText;//sText;

  			//alert(sText.length);
  			var iTextStatusDivWidth = (textStatusDiv.clientWidth);
  			var iTextStatusDivHeight = (textStatusDiv.clientHeight);
			
			//added by Mike, 20231128
			var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");

			textStatusDiv.style.left=0+iStageMaxWidth/2-textStatusBackgroundDiv.clientWidth/2;
			textStatusDiv.style.top = 0+(iStageMaxHeight*0.10)+"px";
  			
  			textStatusDiv.style.visibility="visible";
			mainImageTileProjectile.style.visibility="hidden";
						
			//added by Mike, 20231128
			textStatusBackgroundDiv.style.top=textStatusDiv.style.top;
			//textStatusBackgroundDiv.style.left=0+iStageMaxWidth*0.15;//textStatusDiv.style.left;//0;
			//textStatusBackgroundDiv.style.left=0+iStageMaxWidth*0.22;//textStatusDiv.style.left;//0;
			textStatusBackgroundDiv.style.left=0+iStageMaxWidth/2-textStatusBackgroundDiv.clientWidth/2;//textStatusDiv.style.left;//0;

			textStatusBackgroundDiv.style.visibility="visible";

			//textStatusBackgroundDiv.style.width=iStageMaxWidth*0.65;
			textStatusBackgroundDiv.style.width=iStageMaxWidth*0.5;

			textStatusBackgroundDiv.style.height=iStageMaxHeight*0.6;	
			
			executeTimeDisplay();

			//removed by Mike, 20251102
			//drawMiniMap(myCanvasTwoContext,iStageMaxHeight-iInnerHorizontalOffset*0.85, 0+iStageMaxHeight/10);
	
			heroLifeBarStatusImageTile.style.visibility="visible";
	
			//iCurrHeroLife=iCurrHeroLifeMax;
			drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,false); 

			if (bIsBossBattle) {
				drawBossLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+50, 00+iStageMaxHeight*0.35,false); 
			}
			
			//iCurrHeroMana=iCurrHeroManaMax;		
			drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left), 0+parseInt(textLifeBarDiv.style.bottom)+5,false); 	
			
			//drawPearlStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 
			drawSniperShotStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 

			if (bHasObtainedKeyAtRoom1) {
				drawKeyStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
			}

			if (bHasObtainedAmuletAtRoom32) {
				drawAmuletStatus(myCanvasTwoContext,iInnerHorizontalOffset/6+iImageFrameWidthDefault, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
			}


	//drawMonsterDeathStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault*2); 
	
	//note: using "textTimeDiv.style.top", instead of "bottom"

			//edited by Mike, 20251124; from 20251120
			//drawMonsterDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top)); 			
			drawHeroDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top)); 			
	  }
      else {
	  
/*	  
		//INNER STAGE; MAX
		//iHorizontalOffset=(640-iStageMaxHeight)/2;
		iInnerHorizontalOffset=(640-iStageMaxHeight)/2;		
		iInnerVerticalOffset=iImageFrameHeight/4;//2;
*/	  
		if (iCurrHeroLife<=0) {
			
			bIsGameOver=true;
			
			executeTimeDisplay();
/*		
			myFavicon.style.left=parseInt(mainImageTile.style.left)+iImageFrameWidthLarge/2;
			myFavicon.style.top=parseInt(mainImageTile.style.top)+iImageFrameHeightLarge/2;
*/
			myFavicon.style.left=parseInt(mainImageTile.style.left)+iImageFrameWidthLarge/2-iImageFrameWidthDefault/2;
			myFavicon.style.top=parseInt(mainImageTile.style.top)+iImageFrameHeightLarge/2-iImageFrameHeightDefault/2;

			myFavicon.style.visibility="visible";
		
			mainImageTile.style.visibility="hidden";
			mainImageTileTankBody.style.visibility="hidden";
			mainImageTileHeroBody.style.visibility="hidden";

/*	//removed by Mike, 20251119			
			if (iInputDelayAtGameOverCount>=iInputDelayAtGameOverCountMax) {
				textNewGameDiv.style.visibility="visible";
				textContinueGameDiv.style.visibility="visible";
			}
			iInputDelayAtGameOverCount++;
*/
			
			sText = "GAME OVER";
			//var sText = "CONTINUE?";
			
			//"The <font color='#4a50d9'>PEST</font> was destroyed.<br/>But not without heavy<br/> damage to the city...<br/>There is still a lot to learn<br/>and do. Thank you, and<br/> great work! Peace.";
/* 			
			bossBattleBgImage.style.opacity = "0.6";
			bossBattleBgImage.style.filter  = 'alpha(opacity=60)'; // IE fallback
*/
			textStatusDiv.innerHTML = sText; //sCurrText

			textStatusDiv.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-textStatusDiv.clientWidth/2;
			
			//textStatusDiv.style.top = 0+(iStageMaxHeight*0.30)+"px";
			textStatusDiv.style.top = 0+iInnerVerticalOffset+textStatusDiv.clientHeight+"px";
			
  			//textStatusDiv.style.visibility="visible";
  			textStatusDiv.style.visibility="hidden";

			//red tint
			myCanvasTwoContext.fillStyle = "#550000";
			myCanvasTwoContext.fillRect(0, 0, iStageMaxWidth, iStageMaxHeight);

			if (iInputDelayAtGameOverCount>=iInputDelayAtGameOverCountMax) {
				textNewGameDiv.style.visibility="visible";
				textContinueGameDiv.style.visibility="visible";
			}
			iInputDelayAtGameOverCount++;

			if (iInputDelayAtGameOverCount>=iInputDelayAtGameOverCountMax*2) {
				return;
			}			
			
			//fire; cat and hat;
			/*return;
			*/
		}
		//added by Mike, 20251121
		else if (bIsLevelUp) {
			executeTimeDisplay();
		
			mainImageTile.style.visibility="hidden";
			mainImageTileTankBody.style.visibility="hidden";
			mainImageTileHeroBody.style.visibility="hidden";

			setAllActorsToHidden();				

			
			sText = "LEVEL UP!!!";
			textStatusDiv.innerHTML = sText; //sCurrText

			//textStatusDiv.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-textStatusDiv.clientWidth/2;
			
			textStatusDiv.style.left=iInnerHorizontalOffset+iImageFrameWidthLarge/8;

			//textStatusDiv.style.top = 0+(iStageMaxHeight*0.30)+"px";
			textStatusDiv.style.top = 0+iInnerVerticalOffset+textStatusDiv.clientHeight+"px";
			
  			////textStatusDiv.style.visibility="visible";
  			//textStatusDiv.style.visibility="hidden";
			mainImageTileHeroBody.style.left=parseInt(textStatusDiv.style.left)+(iImageFrameWidthLarge*0.8)+"px";
			mainImageTileHeroBody.style.top=parseInt(textStatusDiv.style.top)+iImageFrameHeightLarge+"px";
/*
			bIsHeroFacingLeftOrRight=true;
			bIsHeroFacingLeft=false;
			bIsHeroFacingUpOrDown=false;
*/
			//black tint
			myCanvasTwoContext.fillStyle = "#111111"; //"#000000"; //"#000077";//"#550000";//red tint
			myCanvasTwoContext.fillRect(0, 0, iStageMaxWidth, iStageMaxHeight);

			drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,false); 

/*
			if (bIsBossBattle) {
				drawBossLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+50, 00+iStageMaxHeight*0.35,false); 
			}
*/

			drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60+5,false);		
			
			//mainImageTileHeroBody.style.visibility="visible";
		
			if (iInputDelayAtLeveledUpCount>=iInputDelayAtLeveledUpCountMax) {
				textLevelUpLifeDiv.style.visibility="visible";
				textLevelUpStaminaDiv.style.visibility="visible";
				textLevelUpSpeedDiv.style.visibility="visible";
				
				textStatusDiv.style.visibility="visible";
			}
			iInputDelayAtLeveledUpCount++;

/*
			if (iInputDelayAtLeveledUpCount>=iInputDelayAtLeveledUpCountMax*2) {
				return;
			}			
*/			
			
			return;

			
			//fire; cat and hat;
			/*return;
			*/
		}
		
		
/*	  
	  	bossBattleBgImage.style.opacity = "1.0";
		bossBattleBgImage.style.filter  = 'alpha(opacity=100)'; // IE fallback
*/	
        bossMonsterImageTile.style.visibility = "hidden"; //"visible";

		executeExplosionEffect();
		executeFireballExplosionEffect();

		executeGrassCutEffect();

		//removed by Mike, 20251124
		//executePearlAnimation();

		//executePearlStatusAnimation();

		
		if (bHasHeroGottenSniperShot) {
			executeSniperShotStatusAnimation();
		}


		executeKeyAnimation();
		//executeKeyStatusAnimation();

		executeAmuletAnimation();
		
		executeHeroFireballProjectileAnimation();

		//executeHeroFireballProjectileHoldAnimation();
		updateHeroFireballProjectileHoldPositions();
		
	
	//executeExplosionEffectToMonsterBoss();
	
	//edited by Mike, 20251120; from 20251113
	executeWalkOnSnowEffect();//0);
/*
	executeWalkOnSnowEffect(walkOnSnowEffectImage);
	executeWalkOnSnowEffect(walkOnSnowEffectImage2);
*/

	executeDustEffect();
	executeHeroAttackEffect();
	executeInitFireballEffect();

	//added by Mike, 20251115
	//executeSnowEffect();

	executeSpiralStrokeEffect()
	
	//updateHasHeroShotSniper();
	
	//--------------------
/*
	if (!bIsGameOver) {
		executeTimeDisplay();
	}
*/	
	executeTimeDisplay();
	
	//edited by Mike, 20251119
	if (!bIsGameOver) {
		if (iHeroInvincibileCount<iHeroInvincibileCountMax) {
			if (iHeroInvincibileCount%2==0) {
				mainImageTileHeroBody.style.visibility="hidden";
			}
			else {
				mainImageTileHeroBody.style.visibility="visible";
			}

			iHeroInvincibileCount++;

			bIsHeroAttacked=false;
		}
		else {
			mainImageTileHeroBody.style.visibility="visible";
		}
		
		heroLifeBarStatusImageTile.style.visibility="visible";
		
		drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,false); 

		if (bIsBossBattle) {
			drawBossLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+50, 00+iStageMaxHeight*0.35,false); 
		}

		drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60+5,false);	
	}
	else {

		drawHeroLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60,true); 

		if (bIsBossBattle) {
			drawBossLifeBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+50, 00+iStageMaxHeight*0.35,false); 
		}

		drawHeroManaBar(myCanvasTwoContext,parseInt(heroLifeBarStatusImageTile.style.left)+10, 0+iStageMaxHeight/60+5,true);	

	}
	

	//removed by Mike, 20251102
	//drawMiniMap(myCanvasTwoContext,iStageMaxHeight-iInnerHorizontalOffset*0.85, 0+iStageMaxHeight/10);

	//drawPearlStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 
	drawSniperShotStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60); 

	if (bHasObtainedKeyAtRoom1) {
		drawKeyStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
	}

	//bHasObtainedAmuletAtRoom32=true;

	if (bHasObtainedAmuletAtRoom32) {
		drawAmuletStatus(myCanvasTwoContext,iInnerHorizontalOffset/6+iImageFrameWidthDefault, 0+iStageMaxHeight/60+iImageFrameHeightDefault); 
	}


	//drawMonsterDeathStatus(myCanvasTwoContext,iInnerHorizontalOffset/6, 0+iStageMaxHeight/60+iImageFrameHeightDefault*2); 
	
	//note: using "textTimeDiv.style.top", instead of "bottom"
	//edited by Mike, 20251124; from 20251120
	//drawMonsterDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top)); 
	drawHeroDeathStatus(myCanvasTwoContext,0+parseInt(textTimeDiv.style.left), 0+parseInt(textTimeDiv.style.top));
		
	//alert(iHorizontalOffset);

	//buggy
	//drawGrid(myCanvasTwoContext,iInnerHorizontalOffset/2,0); 
		
//--------------------	
		var dustEffectImage = document.getElementById("dustEffectImageId");

		//added by Mike, 20241106
		var doorImageRight = document.getElementById("doorImageRightId");
		doorImageRight.style.top = 0+(iStageMaxHeight/2-iImageFrameHeightDefault)+"px";
		doorImageRight.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight-iImageFrameWidthDefault) +"px";
		doorImageRight.style.visibility="hidden";		
		doorImageRight.style.objectPosition = "-" + iImageFrameWidthLarge*3 + "px -" + 0 + "px";		
				
		var iDoorImageRightPosStartY=0+iStageMaxHeight/2-iImageFrameHeightDefault*1;
		var iDoorImageRightPosEndY=0+iStageMaxHeight/2+iImageFrameHeightDefault*1+iImageFrameHeightDefault/2; //+iImageFrameHeightDefault/2 is for feet
		var iDoorImageRightPosStartX=0+(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight;		

		//## --

		var doorLockedImageRight = document.getElementById("doorLockedImageRightId");
		doorLockedImageRight.style.top = 0+(iStageMaxHeight/2-iImageFrameHeightDefault)+"px";
		doorLockedImageRight.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight-iImageFrameWidthDefault) +"px";
		doorLockedImageRight.style.visibility="hidden";		
		doorLockedImageRight.style.objectPosition = "-" + iImageFrameWidthLarge*3 + "px -" + iImageFrameHeightLarge*1 + "px";						
		var iDoorLockedImageRightPosStartY=iDoorImageRightPosStartY;
		var iDoorLockdImageRightPosEndY=iDoorImageRightPosEndY;
		var iDoorLockedImageRightPosStartX=iDoorImageRightPosStartX;		

		//## --
		
		var riverImageRight = document.getElementById("riverImageRightId");
		riverImageRight.style.top = 0+iImageFrameHeightDefault+"px";
		riverImageRight.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight-riverImageRight.clientWidth/2) +"px"; //divide by 2 due to includes clipped portion
		riverImageRight.style.visibility="hidden";
		
		iRiverImagePosY=parseInt(riverImageRight.style.top);
		iRiverImagePosX=parseInt(riverImageRight.style.left);
		iRiverImageFrameWidth=riverImageRight.clientWidth/2;
		iRiverImageFrameHeight=riverImageRight.clientHeight;
	
		//## --

		var doorImageLeft = document.getElementById("doorImageLeftId");		
		doorImageLeft.style.top = 0+(iStageMaxHeight/2-iImageFrameHeightDefault)+"px";
		doorImageLeft.style.left = 0+(iInnerHorizontalOffset-iImageFrameWidthDefault) +"px";
		doorImageLeft.style.visibility="hidden";
		doorImageLeft.style.objectPosition = "-" + iImageFrameWidthLarge*2 + "px -" + 0 + "px";		

		var iDoorImageLeftPosStartY=iDoorImageRightPosStartY;
		var iDoorImageLeftPosEndY=iDoorImageRightPosEndY; 
		var iDoorImageLeftPosStartX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
																						
		//## --

		var doorImageTop = document.getElementById("doorImageTopId");
		//doorImageTop.style.top = 0+iInnerVerticalOffset-iImageFrameHeightDefault+"px";
		doorImageTop.style.top = 0+iInnerVerticalOffset+iImageFrameHeightDefault/4+"px";		
		doorImageTop.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault) +"px";
		doorImageTop.style.visibility="hidden";				
		doorImageTop.style.objectPosition = "-" + iImageFrameWidthLarge*0 + "px -" + 0 + "px";
		
		var iDoorImageTopPosStartX=0+iStageMaxWidth/2-iImageFrameWidthDefault*1;
		var iDoorImageTopPosEndX=0+iStageMaxWidth/2+iImageFrameWidthDefault*1;
		var iDoorImageTopPosStartY=0+iInnerVerticalOffset+iImageFrameHeightDefault;//+iImageFrameHeightDefault/2;

		//## --

		var doorImageBottom = document.getElementById("doorImageBottomId");
		doorImageBottom.style.top = 0+iStageMaxHeight-iImageFrameHeightDefault+"px";
		doorImageBottom.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault) +"px";
		doorImageBottom.style.visibility="hidden";
		doorImageBottom.style.objectPosition = "-" + iImageFrameWidthLarge*1 + "px -" + 0 + "px";
		
		var iDoorImageBottomPosStartX=iDoorImageTopPosStartX;
		var iDoorImageBottomPosEndX=iDoorImageTopPosEndX;
		var iDoorImageBottomPosStartY=0+iStageMaxHeight-iInnerVerticalOffset*2-iImageFrameHeightDefault;
		
		var batMonsterImageTile = document.getElementById("batMonsterImageId");
		batMonsterImageTile.style.visibility="hidden";

		//added by Mike, 20251104
		var skelMonsterImageTile = document.getElementById("skelMonsterImageId");
		skelMonsterImageTile.style.visibility="hidden";
		
		//added by Mike, 20251123
		var demonMonsterImageTile = document.getElementById("demonMonsterImageId");
		demonMonsterImageTile.style.visibility="hidden";

		//added by Mike, 20251110
		for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
			arrayWraithMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("wraithMonsterImageId"+iCount);
			arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}

		//added by Mike, 20251123
		for (iCount=0; iCount<iRunningWraithMonsterCountMax; iCount++) {
			arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("runningWraithMonsterImageId"+iCount);
			arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}

		for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
			arrayBombMonsterCountId[iCount][MONSTER_OBJECT]= document.getElementById("bombMonsterImageId"+iCount);
			arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}
		
		var pearlImageTile = document.getElementById("pearlImageTileId");
		pearlImageTile.style.visibility="hidden";
/*
		var pearlStatusImageTile = document.getElementById("pearlStatusImageTileId");
		pearlStatusImageTile.style.visibility="hidden";
*/

		var keyImageTile = document.getElementById("keyImageTileId");
		keyImageTile.style.visibility="hidden";

		var amuletImageTile = document.getElementById("amuletImageTileId");
		amuletImageTile.style.visibility="hidden";


		//grassBgImage.style.visibility="hidden";
		
/*		
		snakeMonsterImageTile.style.visibility="hidden";
*/		

		for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
			arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}					

		for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
			arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}

		for (iCount=0; iCount<iRunningWraithMonsterCountMax; iCount++) {
			arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}

		for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
			arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}


		for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
			arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}	

		for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
			arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}			
		
		for (iCount=0; iCount<iMiniBossMonsterCountMax; iCount++) {
			arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
		}		
		
		
		wolfImageTile.style.visibility="hidden";
		

		//reminder: innerStageWidth uses iStageMaxHeight

		//hasInitMapLocation=false;
		//iCurrMapLocation=0;
/*
		if (bIsGameOver) {
			alert("iCurrMapLocation: "+iCurrMapLocation);
		}
*/

		//example: 53
		iRowCount=parseInt(iCurrMapLocation/10);
		iColumnCount=iCurrMapLocation-iRowCount*10;
/*		
		alert("iRowCount: "+iRowCount);
		alert("iColumnCount: "+iColumnCount);
*/
		arrayHasVisitedRoom[iColumnCount][iRowCount]=1;

		//debug
		//bHasObtainedKeyAtRoom11=true;
		//bHasObtainedAmuletAtRoom32=true;

		//iCurrMapLocation=11;
		//iCurrMapLocation=1;
		//iCurrMapLocation=32;
		//iCurrMapLocation=22;

		//edited by Mike, 20251125; from 20251124
		//put this here;
		bIsBossBattle=false;
		
		if (!bHasViewedMissionIntro) {
			return;
		}

		if (bIsLevelUp) {
			return;
		}
		
		if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
			return;
		}		
/*
		if ((iCurrMapLocation==61) && (bIsShowingStage2Start)) {
			return;
		}		
*/
		if ((iCurrMapLocation==71) && (bIsShowingStage2End)) {
			return;
		}		

		if ((iCurrMapLocation==71) && (bIsShowingStage3Start)) {
			return;
		}		


		switch(iCurrMapLocation) {
			case 51:
			myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	

				if (!hasInitMapLocation) {
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//------------------------------------------------

					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}

				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=53;
					hasInitMapLocation=false;					
					
					bIsLevelUp=false;
					
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
				}
				break;			
		
		
			//OK; TOP DOOR; REST of the sides WALLS
			case 52: //orig
			myAudio.play();
/*			
		//debug
		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();
		//-----------			
*/
				//DOOR
				//top-most					
				//doorImageTop.style.visibility="visible";
/*				
				bossBattleBgImage.style.visibility = "hidden"; //default
*/				
				bossBattleBgImageBeach.style.visibility = "visible";

				//removed by Mike, 20251102
				//bossBattleBgImageBeachPart2.style.visibility = "visible";
				
				//bossBattleBgImagePart2.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				//edited by Mike, 20251104
				//hasInitMapLocation=true;

				if (!hasInitMapLocation) {
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;

/*					
					iTransitionScale=2.0;
					//iTransitionScale=1.5;
					//iTransitionScale=1.75;
					
					skelMonsterImageTile.style.transform = "scale("+iTransitionScale+","+iTransitionScale+")";	
					
					//skelMonsterImageTile.style.transformOrigin = "12.5% 12.5%"; 					
					
					skelMonsterImageTile.style.transformOrigin = "6.25% 6.25%";
*/					
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

/*
					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2-iImageFrameWidthDefault*(window.parseInt(Math.random()*5)%10);
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault+iImageFrameWidthDefault*(window.parseInt(Math.random()*5)%10);
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2-iImageFrameWidthDefault*(window.parseInt(Math.random()*5)%10);
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4+iImageFrameWidthDefault*(window.parseInt(Math.random()*5)%10);
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
*/
										
					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;

					//for (iCurrSnowFlakeCount=0; iCurrSnowFlakeCount<10; iCurrSnowFlakeCount++) {
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
				
	
					hasInitMapLocation=true;					
				}
				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								//edited by Mike, 20251119
								//bHasWraithMonsterWalking=true;
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=ATTACKING_STATE;
								
								executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}
							//removed by Mike, 20251124
							//executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				executeMonsterDeathAnimation();


				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}


/*
				executeRiverAnimation();
				verifyHeroCollideWithRiver();
				
				if (bHasHeroReachedTopOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
					resetProjectile();		
						
					iCurrMapLocation=43;
					hasInitMapLocation=false;
					bHasHeroReachedTopOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;
				}
*/				
						
				//if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault/2) {					
				//edited by Mike, 20251102
/*
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault*2))) { 
												
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=43;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
					}			
					else {
						//OK;
						//mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault/2;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
											
						resetProjectile();						
					}					
				}
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}				
*/
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=54;
					hasInitMapLocation=false;					
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;	

			case 53:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				if (!hasInitMapLocation) {
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
				
/*				
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;
*/
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

/*
					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
*/
					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}
/*
					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
*/

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;
/*
					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;
*/
					
	
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
/*				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
*/				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasWraithMonsterWalking=true;
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=54;
					hasInitMapLocation=false;					
					
					//bIsLevelUp=true;
					
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;	
				
		case 54:
			myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				if (!hasInitMapLocation) {
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
/*				
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;
*/
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

/*
					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
*/
					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;

					//---------------------------------------------
	
					for (iCount=0; iCount<iRunningWraithMonsterCountMax/2; iCount++) {
						arrayRunningWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayRunningWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayRunningWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=RUNNING_WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}
					
					arrayRunningWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					arrayRunningWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayRunningWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					arrayRunningWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayRunningWraithMonsterCountId[0][MONSTER_STEPX]=5;
					arrayRunningWraithMonsterCountId[0][MONSTER_STEPY]=1;

					arrayRunningWraithMonsterCountId[1][MONSTER_STEPX]=3;
					arrayRunningWraithMonsterCountId[1][MONSTER_STEPY]=1;
					

					for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
						//arrayBombMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						//arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";

						arrayBombMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;
						arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="hidden";
						
						arrayBombMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayBombMonsterCountId[iCount][MONSTER_OBJECT];

						arrayBombMonsterCountId[iCount][MONSTER_CURRENT_HP]=BOMB_MONSTER_HP_MAX;

/*						//no need to include bomb; always behind; lowest z index
						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
						iArrayActorsCount++;
*/						
					}

					arrayBombMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					arrayBombMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayBombMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					arrayBombMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayBombMonsterCountId[0][MONSTER_STEPX]=0;
					arrayBombMonsterCountId[0][MONSTER_STEPY]=0;

					arrayBombMonsterCountId[1][MONSTER_STEPX]=0;
					arrayBombMonsterCountId[1][MONSTER_STEPY]=0;
					//---------------------------------------------


					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
/*				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
*/				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasWraithMonsterWalking=true;
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}

				var bHasRunningWraithMonsterDroppedBomb=false;
				
				for (iCount=0; iCount<iRunningWraithMonsterCountMax; iCount++) {
					if (arrayRunningWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayRunningWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayRunningWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayRunningWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
/*									
						if (arrayRunningWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
*/						
							if (!bHasRunningWraithMonsterDroppedBomb) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasRunningWraithMonsterDroppedBomb=true;
							}
							else {
								//TODO: -add: drop bomb
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							//executeRunningWraithMonsterAttackingAnimation(arrayRunningWraithMonsterCountId[iCount]);
							executeRunningWraithMonsterAttackingAnimation(arrayRunningWraithMonsterCountId[iCount],iCount);
							
							
/*
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
*/					

						verifyHeroCollideWithRunningWraithMonsters(arrayRunningWraithMonsterCountId[iCount]);

						verifyHeroFireballCollideWithRunningWraithMonsters(arrayRunningWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithRunningWraithMonsters(arrayRunningWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}

				for (iCount=0; iCount<iBombMonsterCountMax; iCount++) {
					if (arrayBombMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayBombMonsterCountId[iCount][MONSTER_POSY]+"px"; 
						arrayBombMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayBombMonsterCountId[iCount][MONSTER_POSX]+"px"; 

						executeBombMonsterAttackingAnimation(arrayBombMonsterCountId[iCount]);
						
						verifyHeroCollideWithBombMonsters(arrayBombMonsterCountId[iCount]);

/*
						verifyHeroFireballCollideWithRunningWraithMonsters(arrayRunningWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithRunningWraithMonsters(arrayRunningWraithMonsterCountId[iCount]);
*/						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}


				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=55;
					hasInitMapLocation=false;

					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;	

			//boss; giant skeleton
			case 55:
			myAudio.play();
			
			bIsBossBattle=true;
/*			
		//debug
		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();
		//-----------			
*/
				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	
				
				drawInjuredWolf();

				if (!hasInitMapLocation) {
					iCurrBossLife=iCurrBossLifeMax;
					
					bHasBeatenStage1Boss=false;
				
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
					
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
/*
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
*/					
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*3;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iImageFrameHeightLarge;
					
					iSkelMonsterHP=iSkelMonsterHP;

					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//for (iCurrSnowFlakeCount=0; iCurrSnowFlakeCount<10; iCurrSnowFlakeCount++) {
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
				
	
					hasInitMapLocation=true;					
				}
				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
				

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
				//right-most
				//wall
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
/*
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					//TODO: -update: this to next
					iCurrMapLocation=54;
					hasInitMapLocation=false;					
*/					
					//allow boss skip
/*					
					if (isSkelMonsterTileActive) {
						mainImageTilePosX=(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5-iImageFrameWidthDefault;
						resetProjectile();	
					}
					else {
						//TODO: -add: GO; winning; state;
*/						

/*
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;

						//added by Mike, 20251125
						mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeightLarge/2;


						resetProjectile();	

						iCurrMapLocation=61;
						hasInitMapLocation=false;

						verifyIfHeroLeveledUp();
						
						//bIsShowingStage1End=true;
						iInputDelayAtStageTransitionCount=0;
						
						setAllActorsToHidden();
						
						executeStageTransition(61); //iCurrMapLocation
						
/*						
					}
*/					
						//bHasBeatenStage1Boss=true;

						executeStageTransition(61); //iCurrMapLocation

				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
/*					
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
				}
				break;		

			case 61:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	

				if (!hasInitMapLocation) {
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//------------------------------------------------

					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}

				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=63;
					hasInitMapLocation=false;	
					
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
				}
				break;		

			case 62:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				if (!hasInitMapLocation) {
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
				
/*				
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;
*/
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

/*
					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
*/
					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}
/*
					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
*/

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;
/*
					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;
*/
					
	
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
/*				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
*/				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasWraithMonsterWalking=true;
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=63;
					hasInitMapLocation=false;					
					
					//bIsLevelUp=true;
					
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;	

			case 63:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				if (!hasInitMapLocation) {
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";

					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
				
/*				
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;
*/
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
					
					
					arrayActors[iArrayActorsCount]=batMonsterImageTile;
					
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

					iArrayActorsCount++;					
					

/*
					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
*/
					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}
/*
					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
*/

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;
/*
					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;
*/
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
/*				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
*/				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasWraithMonsterWalking=true;
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}
				
				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";
										
					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currBatMonsterTileState!=ATTACKING_STATE) {
						executeBatMonsterWalkingAnimation();
					}
					else {
						executeBatMonsterAttackingAnimation();
					}
			
					//executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();					
					verifyHeroFireballCollideWithBatMonsters();
					
					verifyHeroSniperShotCollideWithBatMonsters(arrayWraithMonsterCountId[iCount]);					
				}


				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=64;
					hasInitMapLocation=false;					
					
					//bIsLevelUp=true;
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;
				
			case 64:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "visible";	

				if (!hasInitMapLocation) {
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";

					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
				
/*				
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;

					iSkelMonsterHP=iSkelMonsterHP;
*/
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
					
					
					arrayActors[iArrayActorsCount]=batMonsterImageTile;
					
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

					iArrayActorsCount++;					
					

/*
					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;
*/
					//------------------------------------------------

					for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
						arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arrayWraithMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
						
						arrayActors[iArrayActorsCount]=arrayWraithMonsterCountId[iCount][MONSTER_OBJECT];

						//-----
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT]=10;
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_DELAY_COUNT_MAX]=5;//6;	

						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT]=-1;		
						arrayWraithMonsterCountId[iCount][MONSTER_ANIMATION_COUNT_MAX]=4;//5;		

						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_STEP_DELAY_MAX]=15*(iCount+1);
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;
*/
						arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_HP]=WRAITH_MONSTER_HP_MAX;
/*						
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY]=0;		
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_DELAY_MAX]=200;

						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT]=-1;
						arrayWraithMonsterCountId[iCount][MONSTER_ATTACK_ANIMATION_COUNT_MAX]=4;
*/
						//-----


						arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;

						iArrayActorsCount++;
					}
/*
					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
*/

					arrayWraithMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*2;
					
					arrayWraithMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;
					
					arrayWraithMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*4;
					
					arrayWraithMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4+iImageFrameHeightDefault/2;

					arrayWraithMonsterCountId[0][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[0][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[1][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[1][MONSTER_STEPY]=2;
/*
					arrayWraithMonsterCountId[2][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[2][MONSTER_STEPY]=2;

					arrayWraithMonsterCountId[3][MONSTER_STEPX]=2;
					arrayWraithMonsterCountId[3][MONSTER_STEPY]=2;
*/
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
/*				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
*/				

				var bHasWraithMonsterWalking=false;
				
				for (iCount=0; iCount<iWraithMonsterCountMax/2; iCount++) {
					if (arrayWraithMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayWraithMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayWraithMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
									
						if (arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]!=ATTACKING_STATE) {
							if (!bHasWraithMonsterWalking) {
								//already set to WALKING_STATE
							//arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=WALKING_STATE_STATE;								

								bHasWraithMonsterWalking=true;
							}
							else {
								arrayWraithMonsterCountId[iCount][MONSTER_CURRENT_STATE]=IDLE_STATE;								
							}

							executeWraithMonsterWalkingAnimation(arrayWraithMonsterCountId[iCount]);
						}
						else {
							executeWraithMonsterAttackingAnimation(arrayWraithMonsterCountId[iCount]);
						}
					

						verifyHeroCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						verifyHeroFireballCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);

						verifyHeroSniperShotCollideWithWraithMonsters(arrayWraithMonsterCountId[iCount]);
						
						//verifyWraithCollideWithRiver(arrayWraithMonsterCountId[iCount]);
					}
				}
				
				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";
										
					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currBatMonsterTileState!=ATTACKING_STATE) {
						executeBatMonsterWalkingAnimation();
					}
					else {
						executeBatMonsterAttackingAnimation();
					}
			
					//executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();					
					verifyHeroFireballCollideWithBatMonsters();
					
					verifyHeroSniperShotCollideWithBatMonsters(arrayWraithMonsterCountId[iCount]);					
				}


				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					iCurrMapLocation=65;
					hasInitMapLocation=false;					
					
					//bIsLevelUp=true;
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
/*				
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					//added by Mike, 20251112
					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
					//mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					mainImageTilePosX=(0+iInnerHorizontalOffset);

					resetProjectile();
				}
				break;	

			//boss; giant skeleton
			case 65:
			myAudio.play();
			
			bIsBossBattle=true;
/*			
		//debug
		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();
		//-----------			
*/
				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	

				if (!hasInitMapLocation) {
					iCurrBossLife=iCurrBossLifeMax;
				
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
					
					isSkelMonsterTileActive=true;
					skelMonsterImageTile.style.visibility="visible";

					//TilePosX; width; square based on iStageMaxHeight
/*
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
*/					
					skelMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*3;
					skelMonsterImageTilePosY=iInnerVerticalOffset+iImageFrameHeightLarge;
					
					iSkelMonsterHP=iSkelMonsterHP;

					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					arrayActors[iArrayActorsCount]=skelMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//for (iCurrSnowFlakeCount=0; iCurrSnowFlakeCount<10; iCurrSnowFlakeCount++) {
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
				
	
					hasInitMapLocation=true;					
				}
				
				if (isSkelMonsterTileActive) {
					skelMonsterImageTile.style.visibility="visible";

					skelMonsterImageTile.style.top = 0+skelMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					skelMonsterImageTile.style.left = 0+skelMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currSkelMonsterTileState!=ATTACKING_STATE) {
						executeSkelMonsterWalkingAnimation();
					}
					else {
						executeSkelMonsterAttackingAnimation();
					}

					verifyHeroCollideWithSkelMonsters();

					verifyHeroFireballCollideWithSkelMonsters();
					verifyHeroSniperShotCollideWithSkelMonsters();
				}
				

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
				//right-most
				//wall
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
/*
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					//TODO: -update: this to next
					iCurrMapLocation=54;
					hasInitMapLocation=false;					
*/					
					
					if (isSkelMonsterTileActive) {
						mainImageTilePosX=(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5-iImageFrameWidthDefault;
						resetProjectile();	
					}
					else {
						//TODO: -add: GO; winning; state;
						
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
						resetProjectile();	

						iCurrMapLocation=71;
						hasInitMapLocation=false;

						verifyIfHeroLeveledUp();
					}
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
/*					
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
				}
				break;

			case 71:
				myAudio.play();

				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	

				if (!hasInitMapLocation) {
					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//------------------------------------------------

					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							//let iOffsetY=iImageFrameHeightLarge*iCurrSnowEffectCount;
							//setSnowEffectPosition(0+iCurrSnowColumn*64,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}

				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
							
				//right-most
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					//TODO: -update: this
					iCurrMapLocation=75;
					hasInitMapLocation=false;	
					
					verifyIfHeroLeveledUp();
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
				}
				break;						
		
		//last boss; demonic tutor
		case 75:
			bIsBossBattle=true;

			myAudio.play();
/*
				break;

		case 76:
*/	
	
/*			
		//debug
		//------------
		//note: not played during onLoad(), unless in ITCH.IO...
		myAudio = document.getElementById("myAudioId");
		
        myAudio.setAttribute("src", sAudioBGM);

        var fMyAudioVolume=1.0;//0.4;
        myAudio.volume=fMyAudioVolume;
        myAudio.loop=true;		
        myAudio.play();
		//-----------			
*/
				bossBattleBgImageBeach.style.visibility = "visible";
				bossBattleBgImagePart2.style.visibility = "hidden";
				bossBattleBgImagePart3.style.visibility = "hidden";	



				if (!hasInitMapLocation) {
					iCurrBossLife=iCurrBossLifeMax;
				
					//added by Mike, 20251123
					dustEffectImage.style.visibility="hidden";				
					arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
					arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";
					
					isDemonMonsterTileActive=true;
					demonMonsterImageTile.style.visibility="visible";

					demonMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthLarge*3;
					demonMonsterImageTilePosY=iInnerVerticalOffset+iImageFrameHeightLarge;
					
					iDemonMonsterHP=iDemonMonsterHP;

					arrayActors=[];
					iArrayActorsCount=0;

					arrayActors[iArrayActorsCount]=mainImageTileHeroBody;//mainImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					arrayActors[iArrayActorsCount]=demonMonsterImageTile;
					arrayActors[iArrayActorsCount].style.zIndex=iZIndexDefault+iArrayActorsCount;
					iArrayActorsCount++;

					//for (iCurrSnowFlakeCount=0; iCurrSnowFlakeCount<10; iCurrSnowFlakeCount++) {
					iCurrSnowEffectCount=0;
					//4x4
					for (iCurrSnowRow=0; iCurrSnowRow<4; iCurrSnowRow++) {
						for (iCurrSnowColumn=0; iCurrSnowColumn<4; iCurrSnowColumn++) {
						
							let iOffsetX=iImageFrameWidthLarge*iCurrSnowEffectCount;
							
							setSnowEffectPosition(0+iCurrSnowColumn*64+iOffsetX,0+iCurrSnowRow*64,iCurrSnowEffectCount);
							
							iCurrSnowEffectCount++;
						}
					}
	
					hasInitMapLocation=true;					
				}
				
				if (isDemonMonsterTileActive) {
					demonMonsterImageTile.style.visibility="visible";

					demonMonsterImageTile.style.top = 0+demonMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					demonMonsterImageTile.style.left = 0+demonMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					if (currDemonMonsterTileState!=ATTACKING_STATE) {
						executeDemonMonsterWalkingAnimation();
					}
					else {
						executeDemonMonsterAttackingAnimation();
					}

					verifyHeroCollideWithDemonMonsters();
					verifyHeroFireballCollideWithDemonMonsters();
					verifyHeroSniperShotCollideWithDemonMonsters();
					
					//drawBossLifeBar(myCanvasTwoContext,(iStageMaxWidth-iStageMaxHeight)/4, 0+iStageMaxHeight*0.8,false); 

					//drawBossLifeBar(myCanvasTwoContext,0,0+iStageMaxHeight*0.8,false); 

				}
				

				//added by Mike, 20251109
				updateArrayActorsZIndex();
				updateHeroFacingDirection();
				
				//put this here
				updateHasHeroShotSniper();
				executeMonsterDeathAnimation();

				//added by Mike, 20251115
				for (iCurrSnowEffectCount=0; iCurrSnowEffectCount<iCurrSnowEffectCountMax; iCurrSnowEffectCount++) {
					executeSnowEffect(iCurrSnowEffectCount);
				}

				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightLarge/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightLarge/2;
					resetProjectile();
				}					
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightLarge>iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge) {
					//OK;
					mainImageTilePosY=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightLarge-iImageFrameHeightLarge;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
				//right-most
				//wall
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5) {
/*
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset+iImageFrameWidthDefault/2)+0;
					resetProjectile();	

					//TODO: -update: this to next
					iCurrMapLocation=54;
					hasInitMapLocation=false;					
*/					
					mainImageTilePosX=(iInnerHorizontalOffset)+iStageMaxWidth-iImageFrameWidthDefault*1.5-iImageFrameWidthDefault;
					resetProjectile();	
				}
				//left-most
				//wall
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset)) {
					mainImageTilePosX=(0+iInnerHorizontalOffset);
					resetProjectile();
/*					
					mainImageTilePosX=0+(iInnerHorizontalOffset+iStageMaxWidth-iImageFrameWidthDefault-iImageFrameWidthDefault*1.5);

					resetProjectile();

					iCurrMapLocation=53;
					hasInitMapLocation=false;					
*/					
				}
				break;	
				
				
			//OK; TOP, LEFT, BOTTOM DOORS; REST of the sides WALLS
			case 43:			
				//arrayHasVisitedRoom[4][3]=1;

				doorImageTop.style.visibility="visible";
				doorImageBottom.style.visibility="visible";
				doorImageLeft.style.visibility="visible";
																
				if (!hasInitMapLocation) {
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*4;					
					
					pearlImageTile.style.top=iImageFrameHeightDefault+iImageFrameHeightDefault/2*2;
									
									
					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
					
					hasInitMapLocation=true;					
				}
								
				executeRiverAnimation();
				verifyHeroCollideWithRiver();	

				if (bHasHeroReachedBottomOfRoomRiver) {
/*				
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;	
					
					resetProjectile();	
*/
					
/*					
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
					
					//mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
					resetProjectile();		
						
					iCurrMapLocation=53;
					hasInitMapLocation=false;
					bHasHeroReachedBottomOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
*/					
				}
				
				if (bHasHeroReachedTopOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
					resetProjectile();		
						
					iCurrMapLocation=33;
					hasInitMapLocation=false;
					bHasHeroReachedTopOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}
				
				
				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";

/*			
				batMonsterImageTile.style.top = 0+iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault+"px";
				batMonsterImageTile.style.left = 0+(iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault) +"px";
*/				
					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();					
					verifyHeroFireballCollideWithBatMonsters();
				}
				
				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom43) {
					if (!isBatMonsterTileActive) {

						if (!bHasPlayedSolvedTune) {
							playSolvedTune();		
						}

						pearlImageTile.style.visibility="visible";
												
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
					}
				}
				
				//top door
				//if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault/2) {					
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
												
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();		
						
						//DOOR
						iCurrMapLocation=33;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";	
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						//mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault/2;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
						resetProjectile();						
					}					
				}
				//bottom door
				//else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//alert("DITO");
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) {						
						//OK; wraps around
						//mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=53;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";	
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}	
					//bottom wall
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();					
					}				
				}					
				
				//left wall with door at center				
				if (mainImageTilePosX<iDoorImageLeftPosStartX) {					
					if (((mainImageTilePosY>=iDoorImageLeftPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageLeftPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageLeftPosStartX,iDoorImageLeftPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
											
						//OK; wraps around
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=42;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						resetProjectile();						
					}					
				}
				//right wall only
				else if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();			
				}		
				break;		
			//OK; TOP, BOTTOM DOORS; REST of the sides WALLS
			case 33:
				//doorImageTop.style.visibility="visible";
				doorImageBottom.style.visibility="visible";
								
				if (!hasInitMapLocation) {				
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*0;			
					pearlImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
								
					for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
						arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arraySnakeMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
					}
			
					arraySnakeMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arraySnakeMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault;
					arraySnakeMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_STEPX]=1;
					arraySnakeMonsterCountId[1][MONSTER_STEPY]=1;					
					
					//alert("DITO");

					hasInitMapLocation=true;
				}

				executeRiverAnimation();
				verifyHeroCollideWithRiver();
				
				if (bHasHeroReachedBottomOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
					
					//mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
					resetProjectile();		
						
					iCurrMapLocation=43;
					hasInitMapLocation=false;
					bHasHeroReachedBottomOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}
				
				if (bHasHeroReachedTopOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
					resetProjectile();		
						
					iCurrMapLocation=23;
					hasInitMapLocation=false;
					bHasHeroReachedTopOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}

				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom33) {
					//if both snakes are now inactive
					if ((!arraySnakeMonsterCountId[0][MONSTER_IS_ACTIVE]) && (!arraySnakeMonsterCountId[1][MONSTER_IS_ACTIVE])) {

						if (!bHasPlayedSolvedTune) {
							playSolvedTune();		
						}
						
						pearlImageTile.style.visibility="visible";
						
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
					}
				}

				for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
					if (arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSnakeMonsterWalkingAnimation(arraySnakeMonsterCountId[iCount]);					
						verifyHeroCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						
						verifySnakeCollideWithRiver(arraySnakeMonsterCountId[iCount]);
					}
				}
/*				
				//DEBUG; loads bat monster
				if (!hasInitMapLocation) {
					//alert("iCurrMapLocation: "+iCurrMapLocation);
				
					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
				}
				
				hasInitMapLocation=true;

				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";

					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();
				}		
*/				
				
/*				//previously, DOOR TOP
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=23;
						hasInitMapLocation=false;
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}
*/				
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}					
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=43;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}	

				//left wall with door at center
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}
				//WALL
				//right wall only
				//square rooms; hence, iStageMaxHeight
				else if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				break;
			//OK; TOP, BOTTOM DOORS; REST of the sides WALLS
			case 23: //SECRET PASSAGE
				doorImageTop.style.visibility="visible";
				//doorImageBottom.style.visibility="visible";
			
				executeRiverAnimation();
				verifyHeroCollideWithRiver();
				
				if (bHasHeroReachedBottomOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
					
					//mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
					resetProjectile();		
						
					iCurrMapLocation=33;
					hasInitMapLocation=false;
					bHasHeroReachedBottomOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}
				
				if (bHasHeroReachedTopOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
					resetProjectile();		
						
					iCurrMapLocation=13;
					hasInitMapLocation=false;
					bHasHeroReachedTopOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}
				
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=13;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
/*				
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=33;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}					
*/
				
				//left wall
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}
				//WALL
				//right wall only
				//square rooms; hence, iStageMaxHeight
				else if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				break;		
			//OK; LEFT, BOTTOM DOORS; REST of the sides WALLS
			case 13: //SECRET PASSAGE			
				doorImageLeft.style.visibility="visible";
				doorImageBottom.style.visibility="visible";

				executeRiverAnimation();
				verifyHeroCollideWithRiver();
				
				if (bHasHeroReachedBottomOfRoomRiver) {
					//RIVER as DOOR
					//OK; wraps around
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;						
					
					//mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
					resetProjectile();		
						
					iCurrMapLocation=23;
					hasInitMapLocation=false;
					bHasHeroReachedBottomOfRoomRiver=false;
					dustEffectImage.style.visibility="hidden";
					mainImageTileFireballProjectile.style.visibility="hidden";
					mainImageTileFireballProjectilePosY=0;
					mainImageTileFireballProjectilePosX=0;					
				}
				
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}							
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=23;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}							
				
				//left wall with door at center				
				if (mainImageTilePosX<iDoorImageLeftPosStartX) {					

					if (((mainImageTilePosY>=iDoorImageLeftPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageLeftPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageLeftPosStartX,iDoorImageLeftPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
											
						//OK; wraps around
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=12;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						resetProjectile();						
					}					
				}				
				//right wall only
				else if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();			
				}		
				break;				
			//OK; ALL of the sides WALLS
			case 12: //SECRET ROOM; BEST ENDING??
				doorImageRight.style.visibility="visible";
				
				if (!hasInitMapLocation) {
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidth/2+"px";
					pearlImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeight/2+"px";
								
					hasInitMapLocation=true;
				}
				
				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom12) {
//					if ((!arraySnakeMonsterCountId[0][MONSTER_IS_ACTIVE]) && (!arraySnakeMonsterCountId[1][MONSTER_IS_ACTIVE])) {

						if (!bHasPlayedSolvedTune) {
							playSolvedTune();		
						}

						pearlImageTile.style.visibility="visible";
						
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
//					}
				}
			
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}			
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					resetProjectile();
				}
										
				//WALL
				//right-most
				//square rooms; hence, iStageMaxHeight
/*				
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
*/
				if (mainImageTilePosX+iImageFrameWidthDefault>iDoorImageRightPosStartX) {		
					if (((mainImageTilePosY>=iDoorImageRightPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageRightPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageRightPosStartX,iDoorImageRightPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
						
						//OK; wraps around
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=13;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						resetProjectile();						
					}					
				}					
				//left-most
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}
				break;			
			//OK; LEFT, RIGHT DOORS; REST of the sides WALLS
			case 42:			
				doorImageRight.style.visibility="visible";
				doorImageLeft.style.visibility="visible";
				
				//alert("DITO");
				
				//pearlImageTile.style.visibility="visible";

				if (!hasInitMapLocation) {
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					//at BOTTOM-RIGHT
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*3;					
					
					pearlImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
				
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
					
					for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
						//arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;
						arraySlimeMonsterCountId[0][MONSTER_OBJECT].style.visibility="hidden";
						
						arraySlimeMonsterCountId[iCount][MONSTER_STEPX]=1;
						arraySlimeMonsterCountId[iCount][MONSTER_STEPY]=1;
						
						arraySlimeMonsterCountId[iCount][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*1; //3
					
						arraySlimeMonsterCountId[iCount][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;																			
					}	
					//the rest of the children slimes appear after slashing the head slime
					arraySlimeMonsterCountId[0][MONSTER_IS_ACTIVE]=true;
					arraySlimeMonsterCountId[0][MONSTER_OBJECT].style.visibility="visible";

			
					//TOP-LEFT
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;

					//TOP-RIGHT					
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/4-iImageFrameHeightDefault/2;
					
					//BOTTOM-LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;

					//BOTTOM-RIGHT						
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;					
					
					//## --
/*
					//BOTTOM-RIGHT
					arraySlimeMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*1; //3
					
					arraySlimeMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;							
*/					
					//alert("DITO");

					hasInitMapLocation=true;
				}
				
				//grass at BOTTOM-RIGHT
				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom42) {
					if (!arrayGrassMonsterCountId[3][MONSTER_IS_ACTIVE]) {
						
						if (!bHasPlayedSolvedTune) {
							playSolvedTune();		
						}
						
						pearlImageTile.style.visibility="visible";
						
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
					}
				}

				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}
								
				for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
					if (arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySlimeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySlimeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSlimeMonsterAnimation(arraySlimeMonsterCountId[iCount]);
						verifyHeroCollideWithSlimeMonsters(iCount, arraySlimeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSlimeMonsters(iCount, arraySlimeMonsterCountId[iCount]);
					}
				}
				
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}	
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					resetProjectile();
				}	
										
				//left wall with door at center
				if (mainImageTilePosX<iDoorImageLeftPosStartX) {					

					if (((mainImageTilePosY>=iDoorImageLeftPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageLeftPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageLeftPosStartX,iDoorImageLeftPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
											
						//OK; wraps around
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=41;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						resetProjectile();						
					}					
				}
				//square rooms; hence, iStageMaxHeight
				//right wall with door at center
				else if (mainImageTilePosX+iImageFrameWidthDefault>iDoorImageRightPosStartX) {		

					if (((mainImageTilePosY>=iDoorImageRightPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageRightPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageRightPosStartX,iDoorImageRightPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
						
						//OK; wraps around
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=43;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						resetProjectile();						
					}					
				}	
				break;				
			//OK; TOP, RIGHT DOORS; REST of the sides WALLS
			case 41:			
				doorImageTop.style.visibility="visible";
				doorImageRight.style.visibility="visible";
				
				if (!hasInitMapLocation) {
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;					

					//at BOTTOM-RIGHT
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;					
					
					pearlImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*4-iImageFrameHeightDefault/2;
									
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
			
					for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
						arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						arraySnakeMonsterCountId[iCount][MONSTER_IS_IN_RIVER]=false;
					}
			
					//BOTTOM					
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;

					//RIGHT
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*1;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*4-iImageFrameHeightDefault/2;
					
					//LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*4-iImageFrameHeightDefault/2;

					//TOP					
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*5-iImageFrameHeightDefault/2;				
					
					//SNAKE
					arraySnakeMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2-iImageFrameWidthDefault;
					arraySnakeMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2+iImageFrameWidthDefault;
					arraySnakeMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_STEPX]=1;
					arraySnakeMonsterCountId[1][MONSTER_STEPY]=1;					
										
					//alert("DITO");
					
					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2-iImageFrameHeightDefault*2;					

					hasInitMapLocation=true;
				}
				
				//at center of field of grass
				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom41) {
					//if (!arrayGrassMonsterCountId[3][MONSTER_IS_ACTIVE]) {
					//if both snakes are now inactive
					if ((!arraySnakeMonsterCountId[0][MONSTER_IS_ACTIVE]) && (!arraySnakeMonsterCountId[1][MONSTER_IS_ACTIVE])) {
						
						if (!bHasPlayedSolvedTune) {
							playSolvedTune();		
						}
						
						pearlImageTile.style.visibility="visible";
						
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
					}
				}

				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}
				
				for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
					if (arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSnakeMonsterWalkingAnimation(arraySnakeMonsterCountId[iCount]);					
						verifyHeroCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
					}
				}				
				
				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";
					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();					
					verifyHeroFireballCollideWithBatMonsters();
				}				

				//square rooms; hence, iStageMaxHeight				
				//top wall with door at center
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=31;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}				
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					
					//alert("mainImageTilePosX: "+mainImageTilePosX);				
					resetProjectile();
				}
										
				//left-most wall				
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}			
				//square rooms; hence, iStageMaxHeight
				//right wall with door at center
				else if (mainImageTilePosX+iImageFrameWidthDefault>iDoorImageRightPosStartX) {					
					
					if (((mainImageTilePosY>=iDoorImageRightPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageRightPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageRightPosStartX,iDoorImageRightPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
						
						//OK; wraps around
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=42;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						resetProjectile();						
					}					
				}				
				break;
			//OK; TOP, BOTTOM, RIGHT DOORS; REST of the sides WALLS
			case 31:
				doorImageTop.style.visibility="visible";
				doorImageBottom.style.visibility="visible";
				
/*				//keep the key
				if (bHasUsedKeyAtRoom11) {
					doorImageRight.style.visibility="visible";
				}
				else {
					doorLockedImageRight.style.visibility="visible";
				}
*/				
				//------------
				if (!bHasObtainedAmuletAtRoom32) {
					myAudio.pause();
					myAudioPart3.pause();
									
					//alert(myAudioPart2.currentTime);
					
					//if (myAudioPart2.currentTime==0) {
						myAudioPart2.play();
					//}
				}
				else {
					myAudio.pause();
					myAudioPart2.pause();

					//if (myAudioPart3.currentTime==0) {
						myAudioPart3.play();
					//}
				}
				//-----------		

				doorLockedImageRight.style.visibility="visible";
				
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					

					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault*2))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=21;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=41;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}	

				//left wall with door at center
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}				
				//square rooms; hence, iStageMaxHeight
				//right wall with door at center
				else if (mainImageTilePosX+iImageFrameWidthDefault>iDoorImageRightPosStartX) {										
					if (((mainImageTilePosY>=iDoorImageRightPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageRightPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageRightPosStartX,iDoorImageRightPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
						
						if (bHasObtainedKeyAtRoom1) {						
							//OK; wraps around
							mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
							
							mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
							
							resetProjectile();			
							
							//DOOR
							iCurrMapLocation=32;
							hasInitMapLocation=false;
							dustEffectImage.style.visibility="hidden";
							mainImageTileFireballProjectile.style.visibility="hidden";
							mainImageTileFireballProjectilePosY=0;
							mainImageTileFireballProjectilePosX=0;					
							
							bHasUsedKeyAtRoom11=true;
						}
						//locked door becomes right wall
						else {
							//OK;
							mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
							resetProjectile();		
						}
					}			
					else {
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						resetProjectile();						
					}					
				}	
				break;
			//OK; LEFT DOOR, REST of the sides WALLS
			case 32: //BOSS ROOM; BOSS KEY NECESSARY
				doorImageLeft.style.visibility="visible";
				//bossMonsterImageTile.style.visibility = "visible";
			
				if (!hasInitMapLocation) {
					iAmuletInvincibileCount=0;
					bHasPlayedSolvedTune=false;					
					
					//amuletImageTile.style.visibility="visible";
					amuletImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidth/2+"px";
					amuletImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeight/2+"px";
				
					//if Boss Monster already slain
					if (iCurrBossMonsterLife<=0) {
					}
					else {					
						isBossMonsterTileActive=true;
						bossMonsterImageTile.style.visibility="visible";
						
						//TilePosX; width; square based on iStageMaxHeight
						bossMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthLarge/2;
						bossMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightLarge/2;
					}
					
					//------------
					//myAudioBossScreechId = document.getElementById("myAudioBossScreechId");
					myAudioBossScreech.play();
					//-----------						
										
					//alert("DITO");

					hasInitMapLocation=true;
				}
				
				//if has not yet obtained KEY item in this room
				if (!bHasObtainedAmuletAtRoom32) {
				
					if (!isBossMonsterTileActive) {
					
						if (!bHasPlayedSolvedTune) {
							playSolvedTune();							
						}
/*						
						//------------
						//TODO: -verify: this
						myAudio.pause();
						myAudioPart2.pause();
										
						//alert(myAudioPart2.currentTime);
						
						if (myAudioPart3.currentTime==0) {
							myAudioPart3.play();
						}
						//-----------	
*/						
						amuletImageTile.style.visibility="visible";
						
						if (iAmuletInvincibileCount>=iAmuletInvincibileCountMax) {
							verifyHeroCollideWithSpecialItem(amuletImageTile);
						}
						
						iAmuletInvincibileCount++;
					}
				}
	
/*
				for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
					if (arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSnakeMonsterWalkingAnimation(arraySnakeMonsterCountId[iCount]);					
						verifyHeroCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
					}
				}	
*/

				if (isBossMonsterTileActive) {
					bossMonsterImageTile.style.visibility="visible";

					bossMonsterImageTile.style.top = 0+bossMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					bossMonsterImageTile.style.left = 0+bossMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					executeBossMonsterWalkingAnimation();
					verifyHeroCollideWithBossMonster();					
					verifyHeroFireballCollideWithBossMonster();
				}
				
			
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}			
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					resetProjectile();
				}
										
				//WALL
				//right-most
				//square rooms; hence, iStageMaxHeight
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				//left wall with door at center
				else if (mainImageTilePosX<iDoorImageLeftPosStartX) {					

					if (((mainImageTilePosY>=iDoorImageLeftPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageLeftPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageLeftPosStartX,iDoorImageLeftPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
											
						//OK; wraps around
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=31;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						resetProjectile();						
					}					
				}				
				break;		
			//OK; TOP, BOTTOM, RIGHT DOORS; REST of the sides WALLS
			case 21:
				//secret; top door
				doorImageTop.style.visibility="hidden";//"visible";
				doorImageBottom.style.visibility="visible";
				doorImageRight.style.visibility="visible";
				
				if (!hasInitMapLocation) {
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
			
					//BOTTOM					
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;

					//RIGHT
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;
					
					//LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;

					//TOP					
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameWidthDefault*2-iImageFrameHeightDefault*1;						

					hasInitMapLocation=true;
				}
			
				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}				
				
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					
					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault*2))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=11;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=31;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}	

				//left wall with door at center
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}				
				//square rooms; hence, iStageMaxHeight
				//right wall with door at center
				else if (mainImageTilePosX+iImageFrameWidthDefault>iDoorImageRightPosStartX) {					
					
					if (((mainImageTilePosY>=iDoorImageRightPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageRightPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageRightPosStartX,iDoorImageRightPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
						
						//OK; wraps around
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=22;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						resetProjectile();						
					}					
				}	
				break;		
			//OK; LEFT DOOR, REST of the sides WALLS
			case 22:
				doorImageLeft.style.visibility="visible";
			
				if (!hasInitMapLocation) {
					iPearlInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					//at center of field of grass
					pearlImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault*3;					
					
					pearlImageTile.style.top=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*2-iImageFrameHeightDefault/2;
					
					for (iCount=0; iCount<iMiniBossMonsterCountMax; iCount++) {
					//for (iCount=iMiniBossMonsterCountMax-1; iCount>=0; iCount--) {

						arrayMiniBossMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
	
						arrayMiniBossMonsterCountId[iCount][MONSTER_STEPX]=2;//1+iCount;
						arrayMiniBossMonsterCountId[iCount][MONSTER_STEPY]=2;//1+iCount;	

						arrayMiniBossMonsterCountId[iCount][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight-iImageFrameWidthDefault*2-iImageFrameWidthDefault/2*(iCount%2); //3

						arrayMiniBossMonsterCountId[iCount][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2+iImageFrameHeightDefault*2-iImageFrameHeightDefault/2*(iCount);

/*												
						if (iCount<iMiniBossMonsterCountMax/2) {
							arrayMiniBossMonsterCountId[iCount][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight-iImageFrameWidthDefault*2-iImageFrameWidthDefault/2*(1+1);
						}
						else {
							arrayMiniBossMonsterCountId[iCount][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight-iImageFrameWidthDefault*2-iImageFrameWidthDefault/2*(0+1);
						}
																	
						arrayMiniBossMonsterCountId[iCount][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2+iImageFrameHeightDefault*2-iImageFrameHeightDefault/2*(iCount%6);				
*/						
						var iMiniBossMonsterImageTileStepAngle=-90; //facing left door of MiniBoss Room
						//flip vertically;
						iMiniBossMonsterImageTileStepAngle=(iMiniBossMonsterImageTileStepAngle+180)%360;		
						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.transform = "rotate("+iMiniBossMonsterImageTileStepAngle+"deg)";	
						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.transformOrigin = "12.5% 12.5%"; 
						
					}			
/*									
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
			
					for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
						arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
					}
*/
/*			
					//BOTTOM					
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault*2;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*2-iImageFrameHeightDefault/2;

					//RIGHT
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault*1;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					
					//LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;

					//TOP					
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2+iImageFrameWidthDefault*2;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*4-iImageFrameHeightDefault/2;				
*/
/*					
					//SNAKE
					arraySnakeMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*2-iImageFrameWidthDefault;
					arraySnakeMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*2+iImageFrameWidthDefault;
					arraySnakeMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					
					arraySnakeMonsterCountId[1][MONSTER_STEPX]=1;
					arraySnakeMonsterCountId[1][MONSTER_STEPY]=1;					
*/										
					//alert("DITO");

					hasInitMapLocation=true;
				}
			
				//at center of field of grass
				//if has not yet obtained pearl item in this room
				if (!bHasObtainedPearlAtRoom22) {
					//if (!arrayGrassMonsterCountId[3][MONSTER_IS_ACTIVE]) {
					//if both snakes are now inactive
					//if ((!arraySnakeMonsterCountId[0][MONSTER_IS_ACTIVE]) && (!arraySnakeMonsterCountId[1][MONSTER_IS_ACTIVE])) {
					//if last miniboss is inactive
					if (!(arrayMiniBossMonsterCountId[iMiniBossMonsterCountMax-1][MONSTER_IS_ACTIVE])) {

						if (!bHasPlayedSolvedTune) {
							playSolvedTune();							
						}
						
						pearlImageTile.style.visibility="visible";
						
						if (iPearlInvincibileCount>=iPearlInvincibileCountMax) {
							verifyHeroCollideWithPearl(pearlImageTile);
						}
						
						iPearlInvincibileCount++;
					}
				}

				for (iCount=0; iCount<iMiniBossMonsterCountMax; iCount++) {
					if (arrayMiniBossMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayMiniBossMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayMiniBossMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayMiniBossMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
										
						executeMiniBossMonsterWalkingAnimation(iCount,arrayMiniBossMonsterCountId);//[iCount]);
						
						verifyHeroCollideWithMiniBossMonsters(arrayMiniBossMonsterCountId[iCount]);
						verifyHeroFireballCollideWithMiniBossMonsters(arrayMiniBossMonsterCountId[iCount]);
					}
				}
			
/*				
				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}
*/				

/*				
				for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
					if (arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSnakeMonsterWalkingAnimation(arraySnakeMonsterCountId[iCount]);					
						verifyHeroCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
					}
				}			
*/			
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}			
				//bottom wall
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
					//OK;
					mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
					resetProjectile();
				}
										
				//WALL
				//right-most
				//square rooms; hence, iStageMaxHeight
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				//left wall with door at center
				else if (mainImageTilePosX<iDoorImageLeftPosStartX) {					

					if (((mainImageTilePosY>=iDoorImageLeftPosStartY) && (mainImageTilePosY+iImageFrameWidthDefault<=iDoorImageLeftPosEndY)) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageLeftPosStartX,iDoorImageLeftPosStartY, iImageFrameWidthDefault, iImageFrameHeightDefault*2))) { 
											
						//OK; wraps around
						mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
						
						mainImageTilePosY=iDoorImageLeftPosStartY+iImageFrameHeightDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=21;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
						resetProjectile();						
					}					
				}				
				break;		
			//OK; TOP, BOTTOM DOOR; REST of the sides WALLS
			//secret passage
			case 11:				
				//bossBattleBgImage.style.visibility="hidden";
				doorImageTop.style.visibility="visible";
				doorImageBottom.style.visibility="visible";
				//doorImageRight.style.visibility="visible";
				
				if (!hasInitMapLocation) {
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
			
					//BOTTOM					
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*2-iImageFrameHeightDefault/2;

					//RIGHT
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;
					
					//LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*6+iImageFrameHeightDefault/2;

					//TOP					
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameWidthDefault*2-iImageFrameHeightDefault*1;						

					hasInitMapLocation=true;
				}
			
				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}				
				
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {					
					if (((mainImageTilePosX>=iDoorImageTopPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageTopPosEndX)) || 					
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageTopPosStartX,iDoorImageTopPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault*2))) { 
						//OK; wraps around
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						
						mainImageTilePosX=iDoorImageTopPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
						
						//DOOR
						iCurrMapLocation=1;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						resetProjectile();						
					}					
				}
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=21;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}	

				//left wall with door at center
				if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}	
				//WALL
				//right-most
				//square rooms; hence, iStageMaxHeight
				else if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				break;
			//OK; BOTTOM DOOR; REST of the sides WALLS
			case 1:
				doorImageBottom.style.visibility="visible";
				
				if (!hasInitMapLocation) {					
					iKeyInvincibileCount=0;
					bHasPlayedSolvedTune=false;
					
					//at center of field of grass
					keyImageTile.style.left=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;					
					keyImageTile.style.top=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;
									
					for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
						arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						arrayGrassMonsterCountId[iCount][MONSTER_STEPX]=0;
						arrayGrassMonsterCountId[iCount][MONSTER_STEPY]=0;
					}
			
					for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
						arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
					}
			
					//BOTTOM					
					arrayGrassMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*4-iImageFrameHeightDefault/2;

					//RIGHT
					arrayGrassMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;
					
					//LEFT
					arrayGrassMonsterCountId[2][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*3;
					arrayGrassMonsterCountId[2][MONSTER_POSY]=iInnerVerticalOffset+iImageFrameWidthDefault*4+iImageFrameHeightDefault/2;

					//TOP					
					arrayGrassMonsterCountId[3][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					arrayGrassMonsterCountId[3][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameWidthDefault*2-iImageFrameHeightDefault*1;				
					
					//SNAKE
					arraySnakeMonsterCountId[0][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2-iImageFrameWidthDefault*2;	
					arraySnakeMonsterCountId[0][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameWidthDefault*2-iImageFrameHeightDefault*1;
					
					arraySnakeMonsterCountId[1][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*2;	
					arraySnakeMonsterCountId[1][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameWidthDefault*2-iImageFrameHeightDefault*1;			
					
					arraySnakeMonsterCountId[1][MONSTER_STEPX]=1;
					arraySnakeMonsterCountId[1][MONSTER_STEPY]=1;					
										
					isBatMonsterTileActive=true;
					batMonsterImageTile.style.visibility="visible";
					
					//TilePosX; width; square based on iStageMaxHeight
					batMonsterImageTilePosX=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2;
					batMonsterImageTilePosY=iInnerVerticalOffset+iStageMaxHeight/2-iImageFrameHeightDefault/2;
					
					for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
						//arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=true;
						arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]=false;
						arraySlimeMonsterCountId[0][MONSTER_OBJECT].style.visibility="hidden";
						
						arraySlimeMonsterCountId[iCount][MONSTER_STEPX]=1;
						arraySlimeMonsterCountId[iCount][MONSTER_STEPY]=1;
						
						arraySlimeMonsterCountId[iCount][MONSTER_POSX]=iInnerHorizontalOffset+iStageMaxHeight/2-iImageFrameWidthDefault/2+iImageFrameWidthDefault*1; //3
					
						arraySlimeMonsterCountId[iCount][MONSTER_POSY]=iInnerVerticalOffset+iStageMaxHeight-iImageFrameHeightDefault*3-iImageFrameHeightDefault/2;
					}
					
					//the rest of the children slimes appear after slashing the head slime
					arraySlimeMonsterCountId[0][MONSTER_IS_ACTIVE]=true;
					arraySlimeMonsterCountId[0][MONSTER_OBJECT].style.visibility="visible";
					
					hasInitMapLocation=true;
				}
			
				//if has not yet obtained KEY item in this room
				if (!bHasObtainedKeyAtRoom1) {
					//if (!arrayGrassMonsterCountId[3][MONSTER_IS_ACTIVE]) {
					//if both snakes are now inactive
					if ((!arraySnakeMonsterCountId[0][MONSTER_IS_ACTIVE]) && (!arraySnakeMonsterCountId[1][MONSTER_IS_ACTIVE])) {
						
						if (!bHasPlayedSolvedTune) {
							playSolvedTune();							
						}
					
						keyImageTile.style.visibility="visible";
						
						if (iKeyInvincibileCount>=iKeyInvincibileCountMax) {
							verifyHeroCollideWithSpecialItem(keyImageTile);
						}
						
						iKeyInvincibileCount++;
					}
				}

				for (iCount=0; iCount<iGrassMonsterCountMax; iCount++) {
					if (arrayGrassMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arrayGrassMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arrayGrassMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeGrassMonsterAnimation(arrayGrassMonsterCountId[iCount]);					
						verifyHeroCollideWithGrassMonsters(arrayGrassMonsterCountId[iCount]);
					}
				}
				
				for (iCount=0; iCount<iSnakeMonsterCountMax; iCount++) {
					if (arraySnakeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySnakeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySnakeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSnakeMonsterWalkingAnimation(arraySnakeMonsterCountId[iCount]);					
						verifyHeroCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSnakeMonsters(arraySnakeMonsterCountId[iCount]);
					}
				}			
				
				if (isBatMonsterTileActive) {
					batMonsterImageTile.style.visibility="visible";
					batMonsterImageTile.style.top = 0+batMonsterImageTilePosY+"px"; //iInnerVerticalOffset
					batMonsterImageTile.style.left = 0+batMonsterImageTilePosX+"px"; //iInnerHorizontalOffset
			
					executeBatMonsterWalkingAnimation();
					verifyHeroCollideWithBatMonsters();					
					verifyHeroFireballCollideWithBatMonsters();
				}

				for (iCount=0; iCount<iSlimeMonsterCountMax; iCount++) {
					if (arraySlimeMonsterCountId[iCount][MONSTER_IS_ACTIVE]) {
						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.visibility="visible";
						
						//alert(iCount);

						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.top = 0+arraySlimeMonsterCountId[iCount][MONSTER_POSY]+"px"; //iInnerVerticalOffset
						arraySlimeMonsterCountId[iCount][MONSTER_OBJECT].style.left = 0+arraySlimeMonsterCountId[iCount][MONSTER_POSX]+"px"; //iInnerHorizontalOffset
				
						executeSlimeMonsterAnimation(arraySlimeMonsterCountId[iCount]);
						verifyHeroCollideWithSlimeMonsters(iCount, arraySlimeMonsterCountId[iCount]);
						verifyHeroFireballCollideWithSlimeMonsters(iCount, arraySlimeMonsterCountId[iCount]);
					}
				}				
				
				//WALL
				//square rooms; hence, iStageMaxHeight				
				//top wall
				if (mainImageTilePosY<0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2) {		
					//OK
					mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
					resetProjectile();
				}		
				//bottom door
				else if (mainImageTilePosY+iImageFrameHeightDefault>0+iStageMaxHeight-iInnerVerticalOffset-iImageFrameHeightDefault/2) {
						
					if ((((mainImageTilePosX>=iDoorImageBottomPosStartX) && (mainImageTilePosX+iImageFrameWidthDefault<=iDoorImageBottomPosEndX))) ||	
						(isPointsOfRectIntersectingPointsOfRectDoor(mainImageTilePosX+iImageFrameWidthDefault/2,mainImageTilePosY+iImageFrameHeightDefault/2, iDoorImageBottomPosStartX,iDoorImageBottomPosStartY, iImageFrameWidthDefault*2, iImageFrameHeightDefault))) { 
						//OK; wraps around
						mainImageTilePosY=0+iInnerVerticalOffset+iImageFrameHeightDefault+iImageFrameHeightDefault/2;
						
						mainImageTilePosX=iDoorImageBottomPosStartX+iImageFrameWidthDefault/2;
						
						resetProjectile();			
												
						//DOOR
						iCurrMapLocation=11;
						hasInitMapLocation=false;
						dustEffectImage.style.visibility="hidden";
						mainImageTileFireballProjectile.style.visibility="hidden";
						mainImageTileFireballProjectilePosY=0;
						mainImageTileFireballProjectilePosX=0;					
					}			
					else {
						//OK;
						mainImageTilePosY=0+iStageMaxHeight-iInnerVerticalOffset*3-iImageFrameHeightDefault;
						resetProjectile();						
					}						
				}	

				//WALL
				//right-most
				//square rooms; hence, iStageMaxHeight
				if (mainImageTilePosX+iImageFrameWidthDefault>(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight) {
					//OK;
					mainImageTilePosX=(iInnerHorizontalOffset-iImageFrameWidthDefault)+iStageMaxHeight-iImageFrameWidthDefault;
					resetProjectile();			
				}
				//left wall with door at center
				else if (mainImageTilePosX<0+(iInnerHorizontalOffset+iImageFrameWidthDefault)) {
					//OK;
					mainImageTilePosX=0+(iInnerHorizontalOffset+iImageFrameWidthDefault);
					resetProjectile();
				}
				break;				
		}

		//added by Mike, 20251102
		//TODO: -update: this

		//STAGE; MAX
		if (mainImageTilePosX+iImageFrameWidthDefault>iStageMaxWidth) {
			mainImageTilePosX=iStageMaxWidth-iImageFrameWidthDefault;
		}
		else if (mainImageTilePosX<0) {
			mainImageTilePosX=0;
		}

		if (mainImageTilePosY+iImageFrameHeightDefault>iStageMaxHeight) {
			//edited by Mike, 20231126
			//mainImageTilePosY=iStageMaxHeight-iImageFrameHeightDefault;
			mainImageTilePosY=iStageMaxHeight-iImageFrameHeightDefault-iImageFrameHeightDefault*0.25;
		}
		else if (mainImageTilePosY<0) {
			mainImageTilePosY=0;
		}
						
		//--------------------------------------		
		//var bossBattleBgImage = document.getElementById("bossBattleBgImageId");

/*			
		//edited by Mike, 20241103
		//alert("iAnimationCount: "+iAnimationCount);
		if (iAnimationDelayCount==iAnimationDelayCountMax) {
			iAnimationCount=(iAnimationCount+1)%3; //2; //iAnimationCountMax
			iAnimationDelayCount=0;
		}
		else {
			iAnimationDelayCount++;
		}
*/		

/*
    if (bIsBossMonsterHit) {
      //alert(iAnimationCount);
      bossMonsterImageTile.style.objectPosition = "-" + 128*(iBossMonsterAnimationCount) + "px -" + 128 + "px";

      if (iAnimationCount==1) {
        bIsBossMonsterHit=false;
        
		//edited by Mike, 20231128
		//iBossLife--;
		if (iScore==1) {
			iBossLife--;
		}
		

		//edited by Mike, 20231128
//		if (bossMonsterImageTile.style.visibility!="hidden") {
		if (!bIsMissionDone) {
			setMonsterExplosionEffectPosition(parseInt(bossMonsterImageTile.style.left)+iMonsterBossTileWidth/4,parseInt(bossMonsterImageTile.style.top)+iMonsterBossTileHeight/4);
		}

        if (iBossLife<=0) {
            //alert("MISSION COMPLETE!");
			bossMonsterImageTile.style.visibility="hidden";
			bIsMissionDone=true;
        }
      }
    }
    else {
      bossMonsterImageTile.style.objectPosition = "-" + 128*(iBossMonsterAnimationCount) + "px -" + 0 + "px";
    }
*/

		mainImageTile.style.left = (iHorizontalOffset+mainImageTilePosX)+"px";
		mainImageTile.style.top = (iVerticalOffsetInnerScreen+mainImageTilePosY)+"px";

		//added by Mike, 20231125
		mainImageTileTankBody.style.left = mainImageTile.style.left;
		mainImageTileTankBody.style.top = mainImageTile.style.top;

		mainImageTileHeroBody.style.left = mainImageTile.style.left;
		mainImageTileHeroBody.style.top = mainImageTile.style.top;

/*
    mainImageMonster.style.left = (iHorizontalOffset+mainImageMonsterPosX)+"px";
    mainImageMonster.style.top = (iVerticalOffsetInnerScreen+mainImageMonsterPosY)+"px";
*/

/*
    bossMonsterImageTile.style.left = (iHorizontalOffset+bossMonsterImageTilePosX)+"px";
    bossMonsterImageTile.style.top = (iVerticalOffsetInnerScreen+bossMonsterImageTilePosY)+"px";
*/

//-----------------------

		//added by Mike, 20230427			
		if (bHasHeroShotFireball) {		
			resetProjectile();
		
			mainImageTileFireballProjectile.style.visibility = "visible";
			
			mainImageTileFireballProjectilePosY=parseInt(mainImageTileFireballProjectilePosY)+newMainImageTileFireballProjectilePosY;
			
			mainImageTileFireballProjectilePosX=parseInt(mainImageTileFireballProjectilePosX)+newMainImageTileFireballProjectilePosX;

			mainImageTileFireballProjectile.style.left = mainImageTileFireballProjectilePosX+"px";
			mainImageTileFireballProjectile.style.top = mainImageTileFireballProjectilePosY+"px";
		
			//alert (mainImageTileFireballProjectilePosY);
		
			//return;
		}
		
		if (mainImageTileFireballProjectilePosX+iImageFrameWidth>iStageMaxWidth-iInnerHorizontalOffset) {//iHorizontalOffset		
			//alert("DITO");
			resetFireballProjectile();
		}
		else if (mainImageTileFireballProjectilePosX<0+iInnerHorizontalOffset){ //iHorizontalOffset
			resetFireballProjectile();
		}

		//iImageFrameHeight is offset
		if (mainImageTileFireballProjectilePosY+iImageFrameHeight/2>iStageMaxHeight-iImageFrameHeight) {
			resetFireballProjectile();
		}
		else if (mainImageTileFireballProjectilePosY<0+iImageFrameHeight) {
			//alert ("DITO");
			resetFireballProjectile();
		}
			
/*		
		//added by Mike, 20251105
		if (bHasHeroHitMonster) {
			executeHeroAttackingAnimation();
		}
		else {
			executeHeroIdleAnimation();
		}
*/		
			//movement
			if (bHasFired) {
/*			
				if (bIsActionKeyPressed) {
					//alert("DITO");
					
					mainImageTileProjectile.style.visibility = "visible";					
				}
				else {
					//mainImageTileProjectile.style.visibility = "visible";
					mainImageTileProjectile.style.visibility = "hidden";
				}
*/				
				mainImageTileProjectile.style.visibility = "hidden";


mainImageTileProjectilePosY=parseInt(mainImageTileProjectilePosY)+newMainImageTileProjectilePosY;

					mainImageTileProjectilePosX=parseInt(mainImageTileProjectilePosX)+newMainImageTileProjectilePosX;
		

		mainImageTileProjectile.style.left = mainImageTileProjectilePosX+"px";

		mainImageTileProjectile.style.top = mainImageTileProjectilePosY+"px";
		
		if (bHasHeroShotFireball) {
/*
			resetProjectile();
		
			mainImageTileFireballProjectile.style.visibility = "visible";
			mainImageTileFireballProjectilePosY=parseInt(mainImageTileFireballProjectilePosY)+newMainImageTileFireballProjectilePosY;
			mainImageTileFireballProjectilePosX=parseInt(mainImageTileFireballProjectilePosX)+newMainImageTileFireballProjectilePosX;

			mainImageTileFireballProjectile.style.left = mainImageTileFireballProjectilePosX+"px";
			mainImageTileFireballProjectile.style.top = mainImageTileFireballProjectilePosY+"px";
		
			//return;
*/			
		}
		else {				
			//edited by Mike, 20251110
			if ((mainImageTilePosX==mainImageTileProjectilePosX) && (mainImageTilePosY==mainImageTileProjectilePosY)) 
			//if (((mainImageTilePosX>=mainImageTileProjectilePosX-iImageFrameWidthLarge/2) && (mainImageTilePosX<=mainImageTileProjectilePosX+iImageFrameWidthLarge/2)) && ((mainImageTilePosY>=mainImageTileProjectilePosY-iImageFrameHeightLarge/2) && (mainImageTilePosY<=mainImageTileProjectilePosY+iImageFrameHeightLarge/2))) 
			{
				//alert("DITO!!!");
				
				//added by Mike, 20251106
				//iHeroAttackComboCount=0;
				//alert("DITO!");
				
				resetProjectile();
				return;
			}

			//added by Mike, 20251123
			if (mainImageTileProjectilePosY<mainImageTilePosY) {
				bIsHeroGoingUpOrDown=true;
			}
			else if (mainImageTileProjectilePosY>mainImageTilePosY) {
				bIsHeroGoingUpOrDown=true;
			}
			else {
				bIsHeroGoingUpOrDown=false;
			}
			
			
/*			
			alert("mainImageTileProjectilePosY"+mainImageTileProjectilePosY);
			alert("mainImageTilePosY"+mainImageTilePosY);
*/
			mainImageTilePosX=mainImageTileProjectilePosX;		
			mainImageTilePosY=mainImageTileProjectilePosY;
			
			
			if (bIsHeroInTank) {
				executeTankWalkingAnimation();
			}
			else {
				//added by Mike, 20251105
				//iHeroAttackComboCount=0;
				
				//edited by Mike, 20251123; from 20251119
				if (mainImageTileProjectileStepY<mainImageTileProjectileStepYMax) {
					//mainImageTileProjectileStepY+=mainImageTileProjectileVelocityY;//++;
					mainImageTileProjectileStepY=mainImageTileProjectileStepYMax;
				}

				if (mainImageTileProjectileStepX<mainImageTileProjectileStepXMax) {
					//mainImageTileProjectileStepX+=mainImageTileProjectileVelocityX;//++;
					mainImageTileProjectileStepX=mainImageTileProjectileStepXMax;
				}				

				executeHeroWalkingAnimation();
			}
		}

		
//-----------------
/*
    if (isPointsOfRectIntersectingPointsOfRect(mainImageTileProjectilePosX,mainImageTileProjectilePosY, parseInt(mainImageMonster.style.left),parseInt(mainImageMonster.style.top))) {
//        alert("HIT!");
      mainImageMonster.style.visibility="hidden";
    }
*/


/*
	//edited by Mike, 20231128
	if (!bIsMissionDone) {
		if (isPointsOfRectIntersectingPointsOfRect(mainImageTileProjectilePosX,mainImageTileProjectilePosY, parseInt(bossMonsterImageTile.style.left),parseInt(bossMonsterImageTile.style.top))) {
	//        alert("HIT!");
		  //bossMonsterImageTile.style.visibility="hidden";
		  //added by Mike, 20231126
		  bIsBossMonsterHit=true;

		  //added by Mike, 20231126
		  resetProjectile();
		}
	}
*/

/*
		if ((bHasFireballReachedDestinationX) && (bHasFireballReachedDestinationY)) {
				resetFireballProjectile();				
		}				
*/


//-----------------
/*
		if (bIsHeroInTank) {
			iImageFrameWidth=iImageFrameWidthLarge;
		}
		else {
			iImageFrameWidth=iImageFrameWidthDefault;
			//iImageFrameWidth=iImageFrameWidthLarge;
		}
*/

		//destination to the left of hero projectile
		//if (!bHasReachedDestinationX) {
			if (newMainImageTileProjectilePosX<0) {
				//if (mainImageTileProjectilePosX+iImageFrameWidth/2<=mainImageTileProjectileStepDestinationX) {
				if (mainImageTileProjectilePosX+iImageFrameWidthLarge/2<=mainImageTileProjectileStepDestinationX) {
				  //mainImageTileProjectilePosX=mainImageTileProjectileStepDestinationX-iImageFrameWidth/2;
				  mainImageTileProjectilePosX=mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2;

				  bHasReachedDestinationX=true;
				  //resetProjectile();
				}
				else {
				  bHasReachedDestinationX=false;
				}
			}
			//destination to the right of hero projectile
			else {
				//if (mainImageTileProjectilePosX+iImageFrameWidth/2>=mainImageTileProjectileStepDestinationX) {
				if (mainImageTileProjectilePosX+iImageFrameWidthLarge/2>=mainImageTileProjectileStepDestinationX) {
					//mainImageTileProjectilePosX=mainImageTileProjectileStepDestinationX-iImageFrameWidth/2;
					
					mainImageTileProjectilePosX=mainImageTileProjectileStepDestinationX-iImageFrameWidthLarge/2;					
					
					bHasReachedDestinationX=true;
					//resetProjectile();
				}		
				else {
				  bHasReachedDestinationX=false;
				}				
			}
		//}

		
		//if (!bHasReachedDestinationY) {		
			//destination to the top of hero projectile
			if (newMainImageTileProjectilePosY<0) {
				//if (mainImageTileProjectilePosY+iImageFrameHeight/2<=mainImageTileProjectileStepDestinationY) {
				if (mainImageTileProjectilePosY+iImageFrameHeightLarge/2<=mainImageTileProjectileStepDestinationY) {
				//mainImageTileProjectilePosY=mainImageTileProjectileStepDestinationY-iImageFrameHeight/2;
				mainImageTileProjectilePosY=mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2;

				bHasReachedDestinationY=true;
				//resetProjectile();
				}
				else {
				  bHasReachedDestinationY=false;
				}				
			}
			//destination to the bottom of hero projectile
			else {
				//if (mainImageTileProjectilePosY+iImageFrameHeight/2>=mainImageTileProjectileStepDestinationY) {
				if (mainImageTileProjectilePosY+iImageFrameHeightLarge/2>=mainImageTileProjectileStepDestinationY) {
					//mainImageTileProjectilePosY=mainImageTileProjectileStepDestinationY-iImageFrameHeight/2;
					mainImageTileProjectilePosY=mainImageTileProjectileStepDestinationY-iImageFrameHeightLarge/2;					
					
					bHasReachedDestinationY=true;
					//resetProjectile();
				}			
				else {
				  bHasReachedDestinationY=false;
				}								
			}			
		//}
		
							
			if ((bHasReachedDestinationX) && (bHasReachedDestinationY)) {
				resetProjectile();				
			}				

			//if (mainImageTileProjectilePosX+iImageFrameWidth>iStageMaxWidth+iHorizontalOffset) {
			if (mainImageTileProjectilePosX+iImageFrameWidthLarge/2>iStageMaxWidth+iHorizontalOffset) {

	//+iImageFrameWidth
				resetProjectile();
			}
			else if (mainImageTileProjectilePosX<0+iHorizontalOffset){
					resetProjectile();
			}

			//if (mainImageTileProjectilePosY+iImageFrameHeight/2>iStageMaxHeight) {
			if (mainImageTileProjectilePosY+iImageFrameHeightLarge/2>iStageMaxHeight) {
				resetProjectile();
			}
			else if (mainImageTileProjectilePosY<0) {
				resetProjectile();
			}		
		
			}
			//added by Mike, 20251105
			else { //bHasfired
				if (bHasHeroHitMonster) {
					executeHeroAttackingAnimation();
				}
				else {
					//added by Mike, 20251105
					//iHeroAttackComboCount=0;
					
					executeHeroIdleAnimation();
				}
			}
			

		  }	 
		  		  
// if (bIsMissionDone==false)
		}
	  } //if bIsMissionStarted;	
	}

  function processResultFromInput(iXPos, iYPos) {
      if (!bIsMissionDone) {
        processBossBattleResultFromInput(iXPos, iYPos);
      }
  }
  
  function processBossBattleResultFromInput(iXPos, iYPos) {		
		
/*
if (iMouseClickStartTime!=0) {
alert(Date.now()-iMouseClickStartTime);
}
*/

	//added by Mike, 20231124
	var mainImageTile = document.getElementById("mainImageTileImageId");
	//removed by Mike, 20231128
	//mainImageTile.style.visibility = "visible";

	//added by Mike, 20231124
	var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");

	var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");

	//removed by Mike, 20231128
	//mainImageTileTankBody.style.visibility = "visible";
	
	//added by Mike, 20231130
	var mainImageTileProjectile = document.getElementById("mainImageTileProjectileImageId");
	
	//added by Mike, 20241113
	var heroAttackEffectImage = document.getElementById("heroAttackEffectImageId");	
	
	//edited by Mike, 20241105; 20241103
	bHasFiredTemp = bHasFired;
	
	//note: resets also bHasFired;
	//edited by Mike, 20251102
	//resetProjectile();
	//iHeroAnimationCount=3; 
	
	if (bIsActionKeyPressed) {
		if (iCurrHeroMana!=iCurrHeroManaMax) {	//if no mana
			return;	
		}
	}
	
/*	
	if ((!bHasReachedDestinationX) || (!bHasReachedDestinationY)) {
		resetProjectile();				
	}	
*/
	
/*	//removed by Mike, 20251108	
		//added by Mike, 20241104
		if (isPointsOfRectIntersectingPointsOfRect(iXPos,iYPos, iPrevMouseXPos,iPrevMouseYPos)) {
			//TODO: -add: hit wall animation;
			//return;
			
			//do this only if at the borders of the inner stage
		
			//INNER STAGE; MAX
			//iHorizontalOffset=(640-iStageMaxHeight)/2;
			//var iInnerHorizontalOffset=(640-iStageMaxHeight)/2;
			var iInnerVerticalOffset=iImageFrameHeight/2;

			//reminder: innerStageWidth uses iStageMaxHeight
		
			if (mainImageTilePosX+iImageFrameWidth>=iInnerHorizontalOffset+iStageMaxHeight) {
				return;
			}
			else if (mainImageTilePosX<=0+iInnerHorizontalOffset) {
				return;
			}		
			
			if (mainImageTilePosY+iImageFrameHeight>=0+iStageMaxHeight-iInnerVerticalOffset) {
				return;
			}
			else if (mainImageTilePosY<=0) {
				return;
			}	
		}
*/

/*		
	iPrevMouseXPos=iXPos;
	iPrevMouseYPos=iYPos;
*/
	//--------------------------------
	bIsHeroDash=false;
	//bHasHeroShotFireball=false;

	if ((!bIsHeroInRiver) || (bHasObtainedAmuletAtRoom32)){
/*	
		//TODO: -reverify: this
		if (bHasFiredTemp) {
			if ((Date.now()-iMouseClickStartTime)<=iMouseClickMaxElapsedTime) {
				//alert(Date.now()-iMouseClickStartTime);
				
				//bIsHeroDash=true;

				if ((iPrevMouseXPos==iXPos) && (iPrevMouseYPos=iYPos)) {
					bIsHeroDash=true;
				}
				else {
					bIsHeroDash=false;
					mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;
					mainImageTileProjectileStepX=mainImageTileProjectileStepXMin;
				}
			}
		}
*/
		if ((Date.now()-iMouseClickStartTime)<=iMouseClickMaxElapsedTime) {
			//alert(Date.now()-iMouseClickStartTime);
			
			//edited by Mike, 20251102
			//TODO -add: dash animation;
			bIsHeroDash=true;
		}			
	}
	
	iMouseClickStartTime=Date.now(); //in milliseconds
	//--------------------------------

	iPrevMouseXPos=iXPos;
	iPrevMouseYPos=iYPos;
	
	//resetProjectile() sets bHasFired to false;
	//if (!bHasFired) {
	//becomes DASH attack;
	if (bHasFiredTemp) {
			//edited by Mike, 20251123; from 20251108
/*		
//bHasHeroChangedFacingLeftOrRight			
			mainImageTileProjectileStepY=mainImageTileProjectileStepYMax;//mainImageTileProjectileVelocityY;
			
			mainImageTileProjectileStepX=mainImageTileProjectileStepXMax;//mainImageTileProjectileVelocityX;
*/		
		
/*
			//quick double mouse click; within 1/4 second
			if (bIsHeroDash) {
				//edited by Mike, 20251108; from 20251104
				mainImageTileProjectileStepY=mainImageTileProjectileStepYMax;
				mainImageTileProjectileStepX=mainImageTileProjectileStepXMax;


	////			//part of command to create fireball
	////			mainImageTileProjectilePosY=mainImageTilePosY;
	////			mainImageTileProjectilePosX=mainImageTilePosX;
	////
	////			resetProjectile();
	////			
	////			iMouseClickStartTime=iMouseClickMaxElapsedTime+1;
	////			return;
				
			}
*/			
	}
	else {

/*	//edited by Mike, 20231125
    mainImageTileStepY=10;
    mainImageTileStepX=10;
*/
		mainImageTileProjectileStepY=mainImageTileProjectileVelocityY;
		mainImageTileProjectileStepX=mainImageTileProjectileVelocityX;
	}


	//added by Mike, 20251102
	//TODO: -update: dash 
/*	
	if (mainImageTileProjectileStepY>=mainImageTileProjectileStepYMax) {
		mainImageTileProjectileStepY=mainImageTileProjectileStepYMax;
	}
	if (mainImageTileProjectileStepX>=mainImageTileProjectileStepXMax) {
		mainImageTileProjectileStepX=mainImageTileProjectileStepXMax;
	}
*/


/*	//removed by Mike, 20251119
	//edited by Mike, 20251104
	//if (mainImageTileProjectileStepY>mainImageTileProjectileStepYMax) {
	if (mainImageTileProjectileStepY>mainImageTileProjectileStepYMin) {
	mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;
	}
	//if (mainImageTileProjectileStepX>mainImageTileProjectileStepXMax) {
	if (mainImageTileProjectileStepX>mainImageTileProjectileStepXMin) {
		mainImageTileProjectileStepX=mainImageTileProjectileStepXMin;
	}
*/	
	

/*	
	if (bIsActionKeyPressed) {
		if (!bHasHeroShotFireball) {
			//part of command to create fireball
			mainImageTileProjectilePosY=mainImageTilePosY;
			mainImageTileProjectilePosX=mainImageTilePosX;

			resetProjectile();
			
			iMouseClickStartTime=iMouseClickMaxElapsedTime+1;
			
			//bHasHeroShotFireball=true;
			//return;
		}
	}
*/	

/*
	//added by Mike, 20251110
	var iDeltaX=(iXPos-iHorizontalOffset)-(mainImageTilePosX+iImageFrameWidthLarge/2);
	var iDeltaY=(iYPos-iVerticalOffset)-(mainImageTilePosY+iImageFrameHeightLarge/2);
*/


    //reference: https://stackoverflow.com/questions/15994194/how-to-convert-x-y-coordinates-to-an-angle; last accessed: 20230428;
    //--> answer by: Mohsen, 20130413T2357; from 20150322T2246;

    //start position @center
    //note: subtract margine offset
    /*
    var iDeltaX=iXPos-mainImageTilePosX;
    var iDeltaY=iYPos-mainImageTilePosY;
    */
    /*
    var iDeltaX=(iXPos-iHorizontalOffset)-mainImageTilePosX;
    var iDeltaY=(iYPos-iVerticalOffset)-mainImageTilePosY;
    */
	var iDeltaX=(iXPos-iHorizontalOffset)-(mainImageTilePosX+iImageFrameWidthLarge/2);
	var iDeltaY=(iYPos-iVerticalOffset)-(mainImageTilePosY+iImageFrameHeightLarge/2);

/*
alert("iDeltaX: "+iDeltaX);
alert("iDeltaY: "+iDeltaY);
*/
	//added by Mike, 20251110
	//if ((Math.abs(iDeltaX)<20) && (Math.abs(iDeltaY)<20)) {
	//if ((Math.abs(iDeltaX)<iImageFrameWidthLarge/2) && (Math.abs(iDeltaY)<iImageFrameHeightLarge/2)) {
	//if ((Math.abs(iDeltaX)<iImageFrameWidthLarge/1.8) && (Math.abs(iDeltaY)<iImageFrameHeightLarge/1.8)) {
	

	//edited by Mike, 20251122; from 20251121
	//if ((Math.abs(iDeltaX)<iImageFrameWidthLarge/2.3) && (Math.abs(iDeltaY)<iImageFrameHeightLarge/2.3)) {
	if ((Math.abs(iDeltaX)<iImageFrameWidthLarge/3) && (Math.abs(iDeltaY)<iImageFrameHeightLarge/3)) {

		dustEffectImage.style.visibility="hidden";

		arrayWalkOnSnowEffect[MONSTER_OBJECT]=document.getElementById("walkOnSnowEffectImageId"+0);
		arrayWalkOnSnowEffect[MONSTER_OBJECT].style.visibility="hidden";

/*
		if (!bHasHeroHitMonster) {
			return;
		}
*/
		return;
	}



/*
	var iDeltaX=(iXPos-iHorizontalOffset)-(mainImageTilePosX+iImageFrameWidth/2);
	var iDeltaY=(iYPos-iVerticalOffset)-(mainImageTilePosY+iImageFrameHeight/2);
	
	if (bIsHeroInTank) {
		iDeltaX=(iXPos-iHorizontalOffset)-(mainImageTilePosX+iImageFrameWidthLarge/2);
		iDeltaY=(iYPos-iVerticalOffset)-(mainImageTilePosY+iImageFrameHeightLarge/2);
	}
*/

    //alert("iXPos: "+iXPos);

    /*
    alert("mainImageTilePosX: "+mainImageTilePosX);
    alert("iDeltaX: "+iDeltaX);
    */

	//edited by Mike, 20251124
	if (!bIsActionKeyFireballPressed) {
		//added by Mike, 20251119
		//alert("iDeltaX: "+iDeltaX);
		//adjust angle due to now using rect screen; not square;
		//if (Math.abs(iDeltaX)>180) {
		if (Math.abs(iDeltaX)>iStageMaxHeight/2) {
		
			//alert("iDeltaY: "+iDeltaY);
		
			//if still too far; just move forward;
			let iDeltaYOffset=1;//Math.abs(iDeltaX)/180;
		
			//alert("iDeltaYOffset: "+iDeltaYOffset);
		
			if (iDeltaY<0) { //if negative
				iDeltaY-=90*iDeltaYOffset;
			}
			if (iDeltaY>0) { //if positive
				iDeltaY+=90*iDeltaYOffset;
			}
		}
	}

    iDeltaY*=-1;

    var fMainImageTileStepAngleRad=Math.atan2(iDeltaX,iDeltaY);

    //var fMainImageTileStepAngleRad=Math.atan2(iDeltaY,iDeltaX);

    iMainImageTileStepAngle=fMainImageTileStepAngleRad*(180/Math.PI);

    //iMainImageTileStepAngle=fMainImageTileStepAngleRad*(360/Math.PI);

    //					newMainImageTileProjectilePosY*=-1;

    //clockwise
    iMainImageTileStepAngle=(iMainImageTileStepAngle)%360;
    
    //alert(iMainImageTileStepAngle);
    
	
	//removed by Mike, 20251119
    //mainImageTile.style.transform = "rotate("+ (iMainImageTileStepAngle % 360) +"deg)";


	
		newMainImageTileProjectilePosY=mainImageTileProjectileStepY*Math.cos(fMainImageTileStepAngleRad).toFixed(3);

		newMainImageTileProjectilePosY*=-1;
		
		newMainImageTileProjectilePosX=mainImageTileProjectileStepX*Math.sin(fMainImageTileStepAngleRad).toFixed(3);

		//added by Mike, 20231125
		mainImageTileProjectilePosX = parseInt(mainImageTile.style.left);
		mainImageTileProjectilePosY = parseInt(mainImageTile.style.top);


		//added by Mike, 20241103
		mainImageTileProjectileStepDestinationX=iXPos;//iDeltaX;//newMainImageTileProjectilePosX;//.iDeltaX;
		mainImageTileProjectileStepDestinationY=iYPos;//iDeltaY;//newMainImageTileProjectilePosY;//iDeltaY;

/*
alert("iYPos: "+iYPos);
alert("iXPos: "+iXPos);
*/

	if (bIsActionKeyPressed) {
		if (bIsActionKeyFireballPressed) {
			if (!bHasHeroShotFireball) {
				//edited by Mike, 20251116			
				//part of command to create fireball
				//-----------
				resetProjectile();			
				iMouseClickStartTime=iMouseClickMaxElapsedTime+1;	
				bHasHeroShotFireball=true;		
				
				//iCurrHeroMana=0;//set to empty
				//reduceHeroMana(6);
				if (iCurrHeroMana==iCurrHeroManaMax) {
					reduceHeroMana(iCurrHeroManaMax);
				}

				newMainImageTileFireballProjectilePosY=mainImageTileFireballProjectileStepY*Math.cos(fMainImageTileStepAngleRad).toFixed(3);

				newMainImageTileFireballProjectilePosY*=-1;
				newMainImageTileFireballProjectilePosX=mainImageTileFireballProjectileStepX*Math.sin(fMainImageTileStepAngleRad).toFixed(3);
				
				mainImageTileFireballProjectilePosX=mainImageTilePosX+iImageFrameWidthDefault/2;
				mainImageTileFireballProjectilePosY=mainImageTilePosY+iImageFrameHeightDefault/2;
				
				mainImageTileFireballProjectileStepDestinationX=iXPos;
				mainImageTileFireballProjectileStepDestinationY=iYPos;
				
				setInitFireballEffectPosition(mainImageTilePosX+iImageFrameWidthLarge/2,mainImageTilePosY+iImageFrameHeightLarge/2);				
			}
		}
		else {		
			if (bHasHeroGottenSniperShot) {
				if (!bHasHeroShotSniper) {
					//edited by Mike, 20251116			
					//resetProjectile();
					//----------------				
					//keep hero in-place
					mainImageTileProjectileStepDestinationY=mainImageTilePosY+iImageFrameHeightLarge/2;
					mainImageTileProjectileStepDestinationX=mainImageTilePosX+iImageFrameWidthLarge/2;
					//----------------

					iMouseClickStartTime=iMouseClickMaxElapsedTime+1;	
					bHasHeroShotSniper=true;		
					
					//iCurrHeroMana=0;//set to empty
					//reduceHeroMana(6);
					if (iCurrHeroMana==iCurrHeroManaMax) {
						reduceHeroMana(iCurrHeroManaMax);
					}
					
					mainImageTileSniperShotPosX=iXPos;
					mainImageTileSniperShotPosY=iYPos;

					setSpiralStrokeEffectPosition(iXPos,iYPos);
					
					playShortLightningBlast();
				}
			}
		}
	}
	
	
		bHasFired=true;
		//bIsHeroWalking=true;


		
		//added by Mike, 20251102
		bIsHeroFacingLeftOrRight=true;
		

		//edited by Mike, 20251113
		//causes the error; facing to right
		//if (iDeltaX<0-iImageFrameWidthLarge/2) {
		if (iDeltaX<0-iImageFrameWidthLarge/4) {
			bIsHeroFacingLeft=true;
		}
		//else if (iDeltaX>0+iImageFrameWidthLarge/2) {
		else if (iDeltaX>0+iImageFrameWidthLarge/4) {
			bIsHeroFacingLeft=false;
			
			//alert("LEFT iDeltaX: "+iDeltaX);
		}
		else {
			bIsHeroFacingLeftOrRight=false;
		}
			
		//edited by Mike, 20251120; from 20251102
/*
		bIsHeroFacingUpOrDown=false;

		//if (iDeltaY<0-iImageFrameHeightLarge/2) {
		if (iDeltaY<0-iImageFrameHeightLarge) {
		//if (iDeltaY<0) {
			bIsHeroFacingUp=false;
			bIsHeroFacingUpOrDown=true;
		}
		//else if (iDeltaY>0+iImageFrameHeightLarge/2) {
		else if (iDeltaY>0+iImageFrameHeightLarge) {
		//else if (iDeltaY>0) {
			bIsHeroFacingUp=true;
			bIsHeroFacingUpOrDown=true;
		}
		else {
			bIsHeroFacingUpOrDown=false;
		}
*/

		if (Math.abs(iDeltaX)>iStageMaxHeight*0.75) {
			bIsHeroFacingUpOrDown=false;
		}
		else {
			bIsHeroFacingUpOrDown=true;
			
			//edited by Mike, 20251119
			if (iDeltaY<0-iImageFrameHeightLarge/2) {
			//if (iDeltaY<0-iImageFrameHeightLarge/4) {
			//if (iDeltaY<mainImageTilePosY-iImageFrameHeightLarge/2) {
				bIsHeroFacingUp=false;
			}
			else if (iDeltaY>0+iImageFrameHeightLarge/2) {
			//else if (iDeltaY>0+iImageFrameHeightLarge/4) {
			//else if (iDeltaY>mainImageTilePosY+iImageFrameHeightLarge/2) {
				bIsHeroFacingUp=true;
			}
			else {
				bIsHeroFacingUpOrDown=false;
			}
		}
		
		//alert (iDeltaY);
		
		//edited by Mike, 20251121; from 20241105
		setDustEffectPosition(mainImageTilePosX,mainImageTilePosY);
		//setDustEffectPosition(parseInt(mainImageTile.style.left),parseInt(mainImageTile.style.top));
		
		//setDustEffectPosition(mainImageTileProjectilePosX,mainImageTileProjectilePosY);

		
		
		
		//added by Mike, 20251113
		//var walkOnSnowEffectImage = document.getElementById("walkOnSnowEffectImageId");
/*		
		setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,walkOnSnowEffectImage);
		setWalkOnSnowEffectPosition(mainImageTilePosX-iImageFrameWidthDefault/2,mainImageTilePosY,walkOnSnowEffectImage2);
*/

		//setWalkOnSnowEffectPosition(mainImageTilePosX,mainImageTilePosY,0);
		
//added by Mike, 20241113
setHeroAttackEffectPosition(mainImageTileProjectileStepDestinationX-iImageFrameWidthDefault/2,mainImageTileProjectileStepDestinationY-iImageFrameHeightDefault/2); //mainImageTilePosX,mainImageTilePosY);

////heroAttackEffectImage.style.left = mainImageTile.style.left;
////heroAttackEffectImage.style.top = mainImageTile.style.top;

/*		
    }
*/
  }
  
	function playSolvedTune() {
		var myAudioEffectSolved = document.getElementById("myAudioEffectSolvedId");

		myAudioEffectSolved.setAttribute("src", sAudioEffectSolved);

		//fMyAudioEffectVolume=0.2;
		myAudioEffectSolvedVolume=1.0;
		myAudioEffectSolved.volume=myAudioEffectSolvedVolume;
		myAudioEffectSolved.loop=false;
		myAudioEffectSolved.play();
		
		bHasPlayedSolvedTune=true;
	}

	function playShortLightningBlast() {
		var myAudioEffectShortLightningBlast = document.getElementById("myAudioEffectShortLightningBlastId");

		myAudioEffectShortLightningBlast.setAttribute("src", sAudioEffectShortLightningBlast);

		//fMyAudioEffectVolume=0.2;
		myAudioEffectShortLightningBlastVolume=1.0;
		myAudioEffectShortLightningBlast.volume=myAudioEffectShortLightningBlastVolume;
		myAudioEffectShortLightningBlast.loop=false;
		myAudioEffectShortLightningBlast.play();
		
		//bHasPlayedSolvedTune=true;
	}

	function playDogWolfHowl() {
		var myAudioEffectDogWolfHowl = document.getElementById("myAudioEffectDogWolfHowlId");

		myAudioEffectDogWolfHowl.setAttribute("src", sAudioEffectDogWolfHowl);

		//fMyAudioEffectVolume=0.2;
		myAudioEffectDogWolfHowlVolume=1.0;
		myAudioEffectDogWolfHowl.volume=myAudioEffectDogWolfHowlVolume;
		myAudioEffectDogWolfHowl.loop=false;
		myAudioEffectDogWolfHowl.play();
		
		//bHasPlayedSolvedTune=true;
	}

	function executeHeroContinue(bIsContinue) {
		//CONTINUE
		iCurrHeroLife=iCurrHeroLifeMax;
		iCurrHeroMana=iCurrHeroManaMax;

		//added by Mike, 20251123
		iCurrHeroLifeToBeDeducted=0;
		iCurrHeroLifeToBeDeductedAnimation=0;
		iCurrHeroLifeToBeDeductedAnimationMain=0;

		iCurrHeroManaToBeDeducted=0;
		iCurrHeroManaToBeDeductedAnimation=0;
		iCurrHeroManaToBeDeductedAnimationMain=0;
		
		bIsGameOver=false;
		iInputDelayAtGameOverCount=0;

		bIsLevelUp=false;
		iInputDelayAtLeveledUpCount=0;

		iInputDelayAtStageTransitionCount=0;

		iCurrHeroDeathCount++;

		iHeroInvincibileCount=iHeroInvincibileCountMax;//0;
		bIsHeroAttacked=false;
		bIsExecutingShake=false;
		iDestroyHumanShakeDelayCount=0;
		
		var myFavicon = document.getElementById("faviconImageId");						
		var textStatusDiv = document.getElementById("textStatusDivId");	
		var textNewGameDiv = document.getElementById("textNewGameDivId");
		var textContinueGameDiv = document.getElementById("textContinueGameDivId");
		
		var mainImageTile = document.getElementById("mainImageTileImageId");
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		explosionEffectImage = document.getElementById("explosionEffectImageId");
		
		var keyStatusImageTile = document.getElementById("keyStatusImageTileId");
		var amuletStatusImageTile = document.getElementById("amuletStatusImageTileId"); 
		
		myFavicon.style.visibility="hidden";	
		textStatusDiv.style.visibility="hidden";
		textNewGameDiv.style.visibility="hidden";		
		textContinueGameDiv.style.visibility="hidden";
		explosionEffectImage.style.visibility="hidden";
		
		if (!bIsContinue) {		
			//NEW GAME
			iCurrBossMonsterLife=iCurrBossMonsterLifeMax;
			
			mainImageTilePosX=iStageMaxWidth/2-iImageFrameWidth/2;
			mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeight;
			
			mainImageTile.style.left = (iHorizontalOffset+mainImageTilePosX)+"px";
			mainImageTile.style.top = (iVerticalOffsetInnerScreen+mainImageTilePosY)+"px";
			
			mainImageTileTankBody.style.left = mainImageTile.style.left;
			mainImageTileTankBody.style.top = mainImageTile.style.top;

			mainImageTileHeroBody.style.left = mainImageTile.style.left;
			mainImageTileHeroBody.style.top = mainImageTile.style.top;

			//start from the beginning;
			//reset; new game
			dElapsedTimeInSeconds=0;

			iCurrMapLocation=51//75;//51;//53;		
			iStartTimeInMilliseconds=Date.now();	

			bHasObtainedPearlAtRoom42=false;
			bHasObtainedPearlAtRoom41=false;
			bHasObtainedPearlAtRoom33=false;
			bHasObtainedPearlAtRoom43=false;			
			bHasObtainedPearlAtRoom22=false;			
			//bHasObtainedPearlAtRoom11=false; //KEY
			bHasObtainedKeyAtRoom1=false;
			bHasUsedKeyAtRoom11=false;
			bHasObtainedAmuletAtRoom32=false;
			bHasObtainedPearlAtRoom12=false;
						
			keyStatusImageTile.style.visibility="hidden";
			amuletStatusImageTile.style.visibility="hidden";
			
			bHasHeroGottenSniperShot=false;
			bHasBeatenStage1Boss=false;
			
			iInputDelayAtGameOverCount=0;
			bHasFired=false;
			bIsHeroAttacked=false;			
			iCurrHeroDeathCount=0;
			iCurrPearlCount=0;
			iCurrMonsterDeathCount=0;
			
			//added by Mike, 20251122
			iTextStatusOffsetY=0;
			
			//added by Mike, 20251119
			iHeroInvincibileCount=iHeroInvincibileCountMax;
			
			//added by Mike, 20251124
			iCurrHeroLevel=0;


			bIsHeroInRiver=false;
			bHasHeroReachedBottomOfRoomRiver=false;
			bHasHeroReachedTopOfRoomRiver=false;
			bIsActionKeyPressed=false;
			bIsActionKeyFireballPressed=false;

			bHasPlayedSolvedTune=false;			
			
			myAudio.play();
			myAudioPart2.pause();
			myAudioPart3.pause();

			for (iRowCount=0; iRowCount<iRowCountMax; iRowCount++) {				
				for (iColumnCount=0; iColumnCount<iColumnCountMax; iColumnCount++) {
					arrayHasVisitedRoom[iColumnCount][iRowCount]=0;
				}
			}			
			
			//----------------------
			iCurrHeroLifeMax=iCurrHeroLifeMaxDefault;
			iCurrHeroLife=iCurrHeroLifeMax;
			iCurrHeroLifeToBeDeducted=0;
			iCurrHeroLifeToBeDeductedAnimation=0;
			iCurrHeroLifeToBeDeductedAnimationMain=0;

			iCurrHeroManaMax=iCurrHeroManaMaxDefault;
			iCurrHeroMana=iCurrHeroManaMax;
			iCurrHeroManaToBeDeducted=0;
			iCurrHeroManaToBeDeductedAnimation=0;
			iCurrHeroManaToBeDeductedAnimationMain=0;

			mainImageTileProjectileStepYMax=mainImageTileProjectileStepYMaxDefault;
			mainImageTileProjectileStepXMax=mainImageTileProjectileStepXMaxDefault;

			mainImageTileProjectileVelocityY=mainImageTileProjectileVelocityYDefault;
			mainImageTileProjectileVelocityX=mainImageTileProjectileVelocityXDefault;

			mainImageTileProjectileStepYMin=mainImageTileProjectileVelocityY;
			mainImageTileProjectileStepXMin=mainImageTileProjectileVelocityX;

			mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;
			mainImageTileProjectileStepX=mainImageTileProjectileStepYMin;
			//----------------------
			
		}
	}
	
	//added by Mike, 20251121
	function executeHeroLeveledUp(iChosenStat) {
		//max 2 level-ups only;
		switch (iChosenStat) {
			case HP_STAT_ID:
				iCurrHeroLifeMax+=5;
				iCurrHeroLife=iCurrHeroLifeMax;
				iCurrHeroLifeToBeDeducted=0;
				iCurrHeroLifeToBeDeductedAnimationMain=iCurrHeroLifeMax;
				break;
			case STAMINA_STAT_ID:
				iCurrHeroManaMax+=5;
				iCurrHeroMana=iCurrHeroManaMax;
				iCurrHeroManaToBeDeducted=0;
				iCurrHeroManaToBeDeductedAnimationMain=iCurrHeroManaMax;
				break;
			case SPEED_STAT_ID:
				//note max is only until 5;
				mainImageTileProjectileStepYMax+=1;//1;//3;//5;//4;//3;
				mainImageTileProjectileStepXMax+=1;//1;//3;//5;//4;//3;

				mainImageTileProjectileVelocityY+=1;//2;//4;//3;//2;
				mainImageTileProjectileVelocityX+=1;//2;//4;//3;//2;

				mainImageTileProjectileStepYMin=mainImageTileProjectileVelocityY;
				mainImageTileProjectileStepXMin=mainImageTileProjectileVelocityX;

				mainImageTileProjectileStepY=mainImageTileProjectileStepYMin;
				mainImageTileProjectileStepX=mainImageTileProjectileStepYMin;
				break;
		}
		
		//TODO: -add: audio has solved
		
		var textLevelUpLifeDiv = document.getElementById("textLevelUpLifeDivId");
		var textLevelUpStaminaDiv = document.getElementById("textLevelUpStaminaDivId");
		var textLevelUpSpeedDiv = document.getElementById("textLevelUpSpeedDivId");
		
		textLevelUpLifeDiv.style.visibility="hidden";
		textLevelUpStaminaDiv.style.visibility="hidden";
		textLevelUpSpeedDiv.style.visibility="hidden";
		
		resetProjectile();
		
		bIsLevelUp=false;
		
		
		//added by Mike, 20251125
		if (iCurrMapLocation==61) {
			bIsShowingStage1End=true;
		}		


		
/*	
		//CONTINUE
		iCurrHeroLife=iCurrHeroLifeMax;
		iCurrHeroMana=iCurrHeroManaMax;
		bIsGameOver=false;
		iInputDelayAtGameOverCount=0;

		bIsLevelUp=false;
		iInputDelayAtLeveledUpCount=0;

		iCurrHeroDeathCount++;

		iHeroInvincibileCount=0;
		bIsHeroAttacked=false;
		bIsExecutingShake=false;
		iDestroyHumanShakeDelayCount=0;
		
		var myFavicon = document.getElementById("faviconImageId");						
		var textStatusDiv = document.getElementById("textStatusDivId");	
		var textNewGameDiv = document.getElementById("textNewGameDivId");
		var textContinueGameDiv = document.getElementById("textContinueGameDivId");
		
		var mainImageTile = document.getElementById("mainImageTileImageId");
		var mainImageTileTankBody = document.getElementById("mainImageTileImageTankBodyId");
		var mainImageTileHeroBody = document.getElementById("mainImageTileImageHeroBodyId");
		
		explosionEffectImage = document.getElementById("explosionEffectImageId");
		
		var keyStatusImageTile = document.getElementById("keyStatusImageTileId");
		var amuletStatusImageTile = document.getElementById("amuletStatusImageTileId"); 
		
		myFavicon.style.visibility="hidden";	
		textStatusDiv.style.visibility="hidden";
		textfDiv.style.visibility="hidden";		
		textContinueGameDiv.style.visibility="hidden";
		explosionEffectImage.style.visibility="hidden";
		
		if (!bIsContinue) {		
			//NEW GAME
			iCurrBossMonsterLife=iCurrBossMonsterLifeMax;
			
			mainImageTilePosX=iStageMaxWidth/2-iImageFrameWidth/2;
			mainImageTilePosY=iStageMaxHeight/2-iImageFrameHeight;
			
			mainImageTile.style.left = (iHorizontalOffset+mainImageTilePosX)+"px";
			mainImageTile.style.top = (iVerticalOffsetInnerScreen+mainImageTilePosY)+"px";
			
			mainImageTileTankBody.style.left = mainImageTile.style.left;
			mainImageTileTankBody.style.top = mainImageTile.style.top;

			mainImageTileHeroBody.style.left = mainImageTile.style.left;
			mainImageTileHeroBody.style.top = mainImageTile.style.top;

			//start from the beginning;
			//reset; new game
			dElapsedTimeInSeconds=0;

			iCurrMapLocation=53;		
			iStartTimeInMilliseconds=Date.now();	

			bHasObtainedPearlAtRoom42=false;
			bHasObtainedPearlAtRoom41=false;
			bHasObtainedPearlAtRoom33=false;
			bHasObtainedPearlAtRoom43=false;			
			bHasObtainedPearlAtRoom22=false;			
			//bHasObtainedPearlAtRoom11=false; //KEY
			bHasObtainedKeyAtRoom1=false;
			bHasUsedKeyAtRoom11=false;
			bHasObtainedAmuletAtRoom32=false;
			bHasObtainedPearlAtRoom12=false;
						
			keyStatusImageTile.style.visibility="hidden";
			amuletStatusImageTile.style.visibility="hidden";
			
			iInputDelayAtGameOverCount=0;
			bHasFired=false;
			bIsHeroAttacked=false;			
			iCurrHeroDeathCount=0;
			iCurrPearlCount=0;
			iCurrMonsterDeathCount=0;
			
			//added by Mike, 20251119
			iHeroInvincibileCount=iHeroInvincibileCountMax;

			bIsHeroInRiver=false;
			bHasHeroReachedBottomOfRoomRiver=false;
			bHasHeroReachedTopOfRoomRiver=false;
			bIsActionKeyPressed=false;
			bHasPlayedSolvedTune=false;			
			
			myAudio.play();
			myAudioPart2.pause();
			myAudioPart3.pause();

			for (iRowCount=0; iRowCount<iRowCountMax; iRowCount++) {				
				for (iColumnCount=0; iColumnCount<iColumnCountMax; iColumnCount++) {
					arrayHasVisitedRoom[iColumnCount][iRowCount]=0;
				}
			}			
			
		}
*/		
	}	

	//added by Mike, 20231125
	function initKeyboardInput() {
		var mainImageTileFireballProjectileHold = document.getElementById("mainImageTileFireballProjectileHoldImageId");
	
		document.body.onkeydown = function(e){
			//alert("e.keyCode: "+e.keyCode);
			
/*			
			if (!bHasFired) {
				executeHeroFireballProjectileHoldAnimation();
			}
*/
			bIsActionKeyPressed=true;
			
			//alert(e.keyCode);
			
			if (e.keyCode==70) { //key f
				bIsActionKeyFireballPressed=true;
				
				if ((!bIsGameOver) && (bHasPressedStart)) {
					executeHeroFireballProjectileHoldAnimation();
				}
			}

			
/*
				//added by Mike, 20221121
				bIsActionKeyPressed=false;

				//RIGHT ARROW; 39
				//LEFT ARROW; 37
				//UP ARROW; 38
				//DOWN ARROW; 40
				//alert(e.keyCode);


				//OK; //note: unicode keycode, where: key d : 100?
				//note: auto-accepts keyhold; however, with noticeable delay
				//solved: via bKeyDownRight = false; et cetera
				if (e.keyCode==68) { //key d
			//			alert("dito");
					arrayKeyPressed[iKEY_D]=true;
				}
				else if (e.keyCode==65) { //key a
					arrayKeyPressed[iKEY_A]=true;
				}

				if (e.keyCode==39) { //key RIGHT
					arrayKeyPressed[iKEY_D]=true;
				}
				else if (e.keyCode==37) { //key LEFT
					arrayKeyPressed[iKEY_A]=true;
				}
*/

/*
				if (e.keyCode==87) { //key w
					arrayKeyPressed[iKEY_W]=true;
				}
				else if (e.keyCode==83) { //key s
					arrayKeyPressed[iKEY_S]=true;
				}
*/

/*
				//added by Mike, 20221101
				//notes: RIGHT-SIDE BUTTONS to already accept
				//both capital and small letters

				//RIGHT-SIDE BUTTONS
				if (e.keyCode==73) { //key i
					arrayKeyPressed[iKEY_I]=true;

					//added by Mike, 20221121
					bIsActionKeyPressed=true;
				}
				else if (e.keyCode==75) { //key k
					arrayKeyPressed[iKEY_K]=true;

					//added by Mike, 20221121
					bIsActionKeyPressed=true;
				}

				if (e.keyCode==74) { //key j
					arrayKeyPressed[iKEY_J]=true;

					//added by Mike, 20221121
					bIsActionKeyPressed=true;
				}
				else if (e.keyCode==76) { //key l
					arrayKeyPressed[iKEY_L]=true;

					//added by Mike, 20221121
					bIsActionKeyPressed=true;
				}
*/
			}

			//added by Mike, 20220822
			document.body.onkeyup = function(e){
				//alert("KEYUP; e.keyCode: "+e.keyCode);
				
				bIsActionKeyPressed=false;

				bIsActionKeyFireballPressed=false;

				
				mainImageTileFireballProjectileHold.style.visibility="hidden";
				iHeroFireballProjectileHoldAnimationDelayCount=0;
				
				
/*				
				if (e.keyCode==68) { //key d
					//edited by Mike, 20220823
					//bKeyDownRight=false;
					arrayKeyPressed[iKEY_D]=false;
				}
				else if (e.keyCode==65) { //key a
					arrayKeyPressed[iKEY_A]=false;
				}

				//added by Mike, 20220823
				if (e.keyCode==87) { //key w
					arrayKeyPressed[iKEY_W]=false;
				}
				else if (e.keyCode==83) { //key s
					arrayKeyPressed[iKEY_S]=false;
				}
*/				
				
/*
				//added by Mike, 20221101
				//RIGHT-SIDE BUTTONS
				if (e.keyCode==73) { //key i
					arrayKeyPressed[iKEY_I]=false;

					//added by Mike, 20221121
					bIsActionKeyPressed=false;
				}
				else if (e.keyCode==75) { //key k
					arrayKeyPressed[iKEY_K]=false;

					//added by Mike, 20221121
					bIsActionKeyPressed=false;
				}

				if (e.keyCode==74) { //key j
					arrayKeyPressed[iKEY_J]=false;

					//added by Mike, 20221121
					bIsActionKeyPressed=false;
				}
				else if (e.keyCode==76) { //key l
					arrayKeyPressed[iKEY_L]=false;

					//added by Mike, 20221121
					bIsActionKeyPressed=false;
				}
*/
			}
	}

	//added by Mike, 20230423
	function initMouseInput() {

/*		//TODO: -update: this		
		//reference: https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onmousedown_addeventlistener;
		//last accessed: 20241122
		document.body.addEventListener('mouseup', (event) => {		
		  //alert("DITO!!!");
		  
			//reference Usbong SFZ
			for (int i=0; i<MAX_PLASMA_COUNT; i++) {
				if (!myPlasmaContainer[i].isActive()) {
					if (iPlasmaCharge==iPlasmaChargeMax) {
					  myPlasmaContainer[i].setChargedPlasma(true);
					  bIsPlasmaChargeReleased=true;
						  
					  System.out.println("Plasma Charge Released!: "+iPlasmaCharge);  
					}
					  
					myPlasmaContainer[i].processMouseInput(iMouseXPos, iMouseYPos, myRobotShip.getX(),myRobotShip.getY());
						
					bIsFiring=true;				    
					break;
				}
			}		  	  
				  
		    iPlasmaCharge=0;	
		    bHasPressedFiring=false;
		});
*/		
	
		//reference: https://stackoverflow.com/questions/70827887/detect-click-vs-touch-in-javascript;
		//last accessed: 20221110
		//answer by:  Jacob, 20220124T0110
		document.body.addEventListener('pointerdown', (event) => {
			if (bIsGameOver) {
				if (iInputDelayAtGameOverCount<iInputDelayAtGameOverCountMax) {
					return;
				}
			}
			else if (bIsLevelUp) {
				if (iInputDelayAtLeveledUpCount<iInputDelayAtLeveledUpCountMax) {
					return;
				}
			}
			else if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
				if (iInputDelayAtStageTransitionCount<iInputDelayAtStageTransitionCountMax) {
					return;
				}
			}
			else if ((iCurrMapLocation==61) && (bIsShowingStage2Start)) {
				if (iInputDelayAtStageTransitionCount<iInputDelayAtStageTransitionCountMax) {
					return;
				}
			}


			//reference: https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType;
			//last accessed: 20221122
			switch(event.pointerType) {
				case 'mouse':
					//note: ZOOM function causes position ERROR via screenX
					var iXPos = event.clientX;//screenX;

					//note: screenY includes BROWSER address bar, et cetera;
					var iYPos = event.pageY; //screenY;

					//alert(event.which);
					
					if (event.which===3) { //right-click
						break;						
					}
					else { //if 1; left-click
/*
        //edited by Mike, 20230423
        alert("iXPos: "+iXPos);
        alert("iYPos: "+iYPos);
*/
						
						if (bIsGameOver) {
							var textNewGameDiv = document.getElementById("textNewGameDivId");
							var textContinueGameDiv = document.getElementById("textContinueGameDivId");

							textNewGameDiv.style.visibility="visible";
							textContinueGameDiv.style.visibility="visible";
						
							//init(); //note: error; iCurrMapLocation could not be set;
							//restarts where hero died;						
							//current working solution
							//executeHeroContinue();
							//return;
							
							//alert("iXPos"+iXPos);
													
							if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textNewGameDiv.style.left),parseInt(textNewGameDiv.style.top),textNewGameDiv.clientWidth,textNewGameDiv.clientHeight)) {
							
								executeHeroContinue(false);
							
								return;
							}
							else if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textContinueGameDiv.style.left),parseInt(textContinueGameDiv.style.top),textContinueGameDiv.clientWidth,textContinueGameDiv.clientHeight)) {
							
								executeHeroContinue(true);
							
								return;
							}

							return;
						}
						//added by Mike, 20251121
						else if (bIsLevelUp) {
							var textLevelUpLifeDiv = document.getElementById("textLevelUpLifeDivId");
							var textLevelUpStaminaDiv = document.getElementById("textLevelUpStaminaDivId");
							var textLevelUpSpeedDiv = document.getElementById("textLevelUpSpeedDivId");

							textLevelUpLifeDiv.style.visibility="visible";
							textLevelUpStaminaDiv.style.visibility="visible";
							textLevelUpSpeedDiv.style.visibility="visible";
						
							//init(); //note: error; iCurrMapLocation could not be set;
							//restarts where hero died;						
							//current working solution
							//executeHeroContinue();
							//return;
							
							//alert("iXPos"+iXPos);
													
							if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textLevelUpLifeDiv.style.left),parseInt(textLevelUpLifeDiv.style.top),textLevelUpLifeDiv.clientWidth,textLevelUpLifeDiv.clientHeight)) {
							
								//executeHeroContinue(false);
								executeHeroLeveledUp(HP_STAT_ID);
							
								return;
							}
							else if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textLevelUpStaminaDiv.style.left),parseInt(textLevelUpStaminaDiv.style.top),textLevelUpStaminaDiv.clientWidth,textLevelUpStaminaDiv.clientHeight)) {
							
								//executeHeroContinue(true);
								executeHeroLeveledUp(STAMINA_STAT_ID);
							
								return;
							}
							else if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textLevelUpSpeedDiv.style.left),parseInt(textLevelUpSpeedDiv.style.top),textLevelUpSpeedDiv.clientWidth,textLevelUpSpeedDiv.clientHeight)) {
							
								//executeHeroContinue(true);
								executeHeroLeveledUp(SPEED_STAT_ID);
							
								return;
							}
							
							return;
						}
						

						//added by Mike, 20231122
						if (bHasPressedStart) {
						
						if (iInputDelayCount<iInputDelayCountMax) {
							//iInputDelayCount++;
							return;
						}
			
						  //alert(">");
						  if (!bHasViewedHowToPlayGuide) {
							bHasViewedHowToPlayGuide=true;
							playSolvedTune();
							
							iInputDelayCount=0;
							return;
						  }
						  else {
							  if (!bHasViewedMissionIntro) {

								if (iCurrMissionIntroPage<iCurrMissionIntroPageMax-1) {
									sCurrText="";
									iCurrTextCharacterCountEffectDelayCount=0;
									iCurrTextCharacterCount=0;
									iCurrMissionIntroPage++;
									return;
								}
								else {
									bHasViewedMissionIntro=true;
									return;
								}
							  }/*
							  else if ((iCurrMapLocation==61) && (bIsShowingStage1End)) {
							  //else if (iCurrMapLocation==61) {

									bIsShowingStage1End=false;
									bIsShowingStage2Start=true;
									
									//note will not show the "portal" text anymore;
									//error if removed;
									iCurrMapLocation=62;
									
									return;
							  }*/
							  /*
							  else if ((iCurrMapLocation==63) && (bIsShowingStage2Start)) {
									bIsShowingStage2Start=false;
									//iCurrMapLocation=64;
									return;
							  }*/
						  }
						}
						else {
						  bHasPressedStart=true;
						  playSolvedTune();
						  iInputDelayCount=0;
						  return;
						}

						//added by Mike, 20231107
						processResultFromInput(iXPos, iYPos);
					
						//alert(">>>>>: "+iCurrMapLocation);
					}
					break;
				case 'touch':
/*
					//alert("TOUCH");
					if (bIsUsingAppleWebKit) {
					  //added by Mike, 20221111; removed by Mike, 20221118
					  //note: NOT yet set
					  if (bIsUsingAppleMac) {
						toggleFullScreen();
					  }

					  bIsUsingAppleMac=false;
					  bIsMobile=true; //added by Mike, 20221110

					  //added by Mike, 20230111
					  bHasSetMaxWidthHeight=true;
					}
*/
//note: ZOOM function causes position ERROR via screenX
					var iXPos = event.clientX;//screenX;

					//note: screenY includes BROWSER address bar, et cetera;
					var iYPos = event.pageY; //screenY;

					//alert(event.which);
					
					if (event.which===3) { //right-click
						break;						
					}
					else { //if 1; left-click
/*
        //edited by Mike, 20230423
        alert("iXPos: "+iXPos);
        alert("iYPos: "+iYPos);
*/
						if (bIsGameOver) {
							var textNewGameDiv = document.getElementById("textNewGameDivId");
							var textContinueGameDiv = document.getElementById("textContinueGameDivId");

							textNewGameDiv.style.visibility="visible";
							textContinueGameDiv.style.visibility="visible";
						
							//init(); //note: error; iCurrMapLocation could not be set;
							//restarts where hero died;						
							//current working solution
							//executeHeroContinue();
							//return;
							
							//alert("iXPos"+iXPos);
													
							if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textNewGameDiv.style.left),parseInt(textNewGameDiv.style.top),textNewGameDiv.clientWidth,textNewGameDiv.clientHeight)) {
							
								executeHeroContinue(false);
							
								return;
							}
							else if (isPointsOfRectIntersectingPointsOfRectDoor(iXPos,iYPos, parseInt(textContinueGameDiv.style.left),parseInt(textContinueGameDiv.style.top),textContinueGameDiv.clientWidth,textContinueGameDiv.clientHeight)) {
							
								executeHeroContinue(true);
							
								return;
							}

							return;
						}

						//added by Mike, 20231122
						if (bHasPressedStart) {
						
						if (iInputDelayCount<iInputDelayCountMax) {
							//iInputDelayCount++;
							return;
						}
			
						  //alert(">");
						  if (!bHasViewedHowToPlayGuide) {
							bHasViewedHowToPlayGuide=true;
							playSolvedTune();
							
							iInputDelayCount=0;
							return;
						  }
						  else {
							  if (!bHasViewedMissionIntro) {
								bHasViewedMissionIntro=true;
								return;
							  }
						  }
						}
						else {
						  bHasPressedStart=true;
						  playSolvedTune();
						  iInputDelayCount=0;
						  return;
						}

						//added by Mike, 20231107
						processResultFromInput(iXPos, iYPos);
					
						//alert(">>>>>: "+iCurrMapLocation);
					}								
					break;
			}
		});
	}


	//TODO: -fix: touch-and-hold image displayed problem
function initTouchInput() {
	//added by Mike, 20231107
	//reference: https://stackoverflow.com/questions/62823062/adding-a-simple-left-right-swipe-gesture/62825217#62825217;
	//answer by: smmehrab, 20200709T2330; edited 20200711T0355
	document.body.addEventListener('touchstart', function (event) {

		//added by Mike, 20231114
		if (iInputDelayCount<iInputDelayCountMax) {
			iInputDelayCount++;
			return;
		}


		iEventChangedTouchCount = event.changedTouches.length;

		for (iCount=0; iCount<iEventChangedTouchCount; iCount++) {

				//edited by Mike, 20221121
				//note: ZOOM function causes position ERROR via screenX
				var iXPos = event.changedTouches[iCount].clientX;//screenX;

				//note: screenY includes BROWSER address bar, et cetera;
				var iYPos = event.changedTouches[iCount].pageY; //screenY;

				//alert(iYPos);
/*
				alert("iXPos: "+iXPos);
				alert("iYPos: "+iYPos);
*/
				processResultFromInput(iXPos, iYPos);


		}
	});
}


  //added by Mike, 20221123
  //@return bool
  function isPointsOfRectIntersectingPointsOfRect(iXPos1, iYPos1, iXPos2, iYPos2) {
  		//alert("iPuzzleTileWidth: "+iPuzzleTileWidth);

  	let mdo1XPos = iXPos1;
  	let mdo1YPos = iYPos1;

  	//edited by Mike, 20230524
  	//set as a point; not a tile
  	let mdo1Width = 1;//iPuzzleTileWidth;
  	let mdo1Height = 1;//iPuzzleTileHeight;

  	let mdo2XPos = iXPos2;
  	let mdo2YPos = iYPos2;

	//TODO: -verify: this with LARGE

  	let mdo2Width = iImageFrameWidth; //iPuzzleTileWidth;
  	let mdo2Height = iImageFrameHeight; //iPuzzleTileHeight;

  	let iOffsetXPosAsPixel = 0;
  	let iOffsetYPosAsPixel = 0;

  	//alert("mdo1XPos: "+mdo1XPos);

  /*
  	alert("mdo1XPos: "+mdo1XPos+"; "+"mdo1Width: "+mdo1Width);
  	alert("mdo2XPos: "+mdo2XPos+"; "+"mdo2Width: "+mdo2Width);
  */

  	if ((mdo2YPos+mdo2Height < mdo1YPos+iOffsetYPosAsPixel) || //is the bottom of mdo2 above the top of mdo1?
  		(mdo2YPos > mdo1YPos+mdo1Height-iOffsetYPosAsPixel) || //is the top of mdo2 below the bottom of mdo1?
  		(mdo2XPos+mdo2Width < mdo1XPos+iOffsetXPosAsPixel) || //is the right of mdo2 to the left of mdo1?
  		(mdo2XPos > mdo1XPos+mdo1Width-iOffsetXPosAsPixel)) //is the left of mdo2 to the right of mdo1?
  	{
  		//no collision
  		return false;
  	}

  	return true;
  }

  //added by Mike, 20241109
  //@return bool
  //TODO: -add: iImageFrameWidth; iImageFrameWidthLarge
  function isPointsOfRectIntersectingPointsOfRectDoor(iXPos1, iYPos1, iXPos2, iYPos2, iDoorImageFrameWidth, iDoorImageFrameHeight) {
  	let mdo1XPos = iXPos1;
  	let mdo1YPos = iYPos1;

	//TODO: -update: this

  	//edited by Mike, 20230524
  	//set as a point; not a tile
  	let mdo1Width = 1;//iPuzzleTileWidth;
  	let mdo1Height = 1;//iPuzzleTileHeight;

  	let mdo2XPos = iXPos2;
  	let mdo2YPos = iYPos2;

  	let mdo2Width = iDoorImageFrameWidth; //iImageFrameWidth; //iPuzzleTileWidth;
  	let mdo2Height = iDoorImageFrameHeight; //iImageFrameHeight; //iPuzzleTileHeight;

  	let iOffsetXPosAsPixel = 0;
  	let iOffsetYPosAsPixel = 0;

  	//alert("mdo1XPos: "+mdo1XPos);

  /*
  	alert("mdo1XPos: "+mdo1XPos+"; "+"mdo1Width: "+mdo1Width);
  	alert("mdo2XPos: "+mdo2XPos+"; "+"mdo2Width: "+mdo2Width);
  */

  	if ((mdo2YPos+mdo2Height < mdo1YPos+iOffsetYPosAsPixel) || //is the bottom of mdo2 above the top of mdo1?
  		(mdo2YPos > mdo1YPos+mdo1Height-iOffsetYPosAsPixel) || //is the top of mdo2 below the bottom of mdo1?
  		(mdo2XPos+mdo2Width < mdo1XPos+iOffsetXPosAsPixel) || //is the right of mdo2 to the left of mdo1?
  		(mdo2XPos > mdo1XPos+mdo1Width-iOffsetXPosAsPixel)) //is the left of mdo2 to the right of mdo1?
  	{
  		//no collision
  		return false;
  	}

  	return true;
  }

  //added by Mike, 20221123
  //@return bool
  function isPointsOfRectIntersectingPointsOfRectMonster(iXPos1, iYPos1, iXPos2, iYPos2, iImageFrameWidth1, iImageFrameHeight1, iImageFrameWidth2, iImageFrameHeight2) {
  	let mdo1XPos = iXPos1;
  	let mdo1YPos = iYPos1;

  	//edited by Mike, 20230524
  	//set as a point; not a tile
  	let mdo1Width = iImageFrameWidth1; //1;//iPuzzleTileWidth;
  	let mdo1Height = iImageFrameHeight1; //1;//iPuzzleTileHeight;

  	let mdo2XPos = iXPos2;
  	let mdo2YPos = iYPos2;

  	let mdo2Width = iImageFrameWidth2; //iPuzzleTileWidth;
  	let mdo2Height = iImageFrameHeight2; //iPuzzleTileHeight;

  	let iOffsetXPosAsPixel = iImageFrameWidth1*0.1;//0;
  	let iOffsetYPosAsPixel = iImageFrameHeight1*0.1;//0;

  	//alert("mdo1XPos: "+mdo1XPos);

  /*
  	alert("mdo1XPos: "+mdo1XPos+"; "+"mdo1Width: "+mdo1Width);
  	alert("mdo2XPos: "+mdo2XPos+"; "+"mdo2Width: "+mdo2Width);
  */

  	if ((mdo2YPos+mdo2Height < mdo1YPos+iOffsetYPosAsPixel) || //is the bottom of mdo2 above the top of mdo1?
  		(mdo2YPos > mdo1YPos+mdo1Height-iOffsetYPosAsPixel) || //is the top of mdo2 below the bottom of mdo1?
  		(mdo2XPos+mdo2Width < mdo1XPos+iOffsetXPosAsPixel) || //is the right of mdo2 to the left of mdo1?
  		(mdo2XPos > mdo1XPos+mdo1Width-iOffsetXPosAsPixel)) //is the left of mdo2 to the right of mdo1?
  	{
  		//no collision
  		return false;
  	}

    return true;
  }
  
  //@return bool
  //note input iImageFrameWidth2*2 and iImageFrameHeight2*2
  function isPointsOfRectIntersectingPointsOfRectMonsterLarge(iXPos1, iYPos1, iXPos2, iYPos2, iImageFrameWidth1, iImageFrameHeight1, iImageFrameWidth2, iImageFrameHeight2) {
  	let mdo1XPos = iXPos1;
  	let mdo1YPos = iYPos1;

  	//edited by Mike, 20230524
  	//set as a point; not a tile
  	let mdo1Width = iImageFrameWidth1; //1;//iPuzzleTileWidth;
  	let mdo1Height = iImageFrameHeight1; //1;//iPuzzleTileHeight;

  	let mdo2XPos = iXPos2;
  	let mdo2YPos = iYPos2;

  	let mdo2Width = iImageFrameWidth2; //iPuzzleTileWidth;
  	let mdo2Height = iImageFrameHeight2; //iPuzzleTileHeight;

  	let iOffsetXPosAsPixel = iImageFrameWidth1*0.4;//0.1;//0;
  	let iOffsetYPosAsPixel = iImageFrameHeight1*0.4;//0.1;//0;

  	//alert("mdo1XPos: "+mdo1XPos);

  /*
  	alert("mdo1XPos: "+mdo1XPos+"; "+"mdo1Width: "+mdo1Width);
  	alert("mdo2XPos: "+mdo2XPos+"; "+"mdo2Width: "+mdo2Width);
  */

  	if ((mdo2YPos+mdo2Height < mdo1YPos+iOffsetYPosAsPixel) || //is the bottom of mdo2 above the top of mdo1?
  		(mdo2YPos > mdo1YPos+mdo1Height-iOffsetYPosAsPixel) || //is the top of mdo2 below the bottom of mdo1?
  		(mdo2XPos+mdo2Width < mdo1XPos+iOffsetXPosAsPixel) || //is the right of mdo2 to the left of mdo1?
  		(mdo2XPos > mdo1XPos+mdo1Width-iOffsetXPosAsPixel)) //is the left of mdo2 to the right of mdo1?
  	{
  		//no collision
  		return false;
  	}

    return true;
  }  

	function onLoad() {
//alert(navigator.userAgent);


  if (/Macintosh|Mac|Mobile|Android|webOS|iPhone|iPad|iPod|AppleWebKit|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)) {

//		alert("detected: Mobile Browser!");

  //added by Mike, 20220925
  bIsMobile=true;

  //added by Mike, 20221108
  if (navigator.userAgent.includes("AppleWebKit")) {
    bIsUsingAppleWebKit=true;
    //added by Mike, 20221109
    bIsUsingAppleMac=false; //default
  }

  //added by Mike, 20221113
  //notes: "AppleWebKit" to exist even with "Android"
  if (navigator.userAgent.includes("Android")) {
    bIsUsingAppleWebKit=false;
  }

  //added by Mike, 20221113
  //example: Linux x86_64 (desktop)
  if (navigator.userAgent.includes("Linux x")) {
    bIsMobile=false;
  }

  //note: iPAD and MacBookPro OS : Mac OS X
  //adds: to be re-classified as iPAD via TOUCH command
  if ((navigator.userAgent.includes("Macintosh")) || navigator.userAgent.includes("Mac")) {
    bIsUsingAppleMac=true;
  }

  //added by Mike, 20230111
  //note: TO-DO: -add: touch/mouse click ACTION COMMANDS
  //if using EDGE browser;
  //observed: shaking on EDGE browser via desktop,
  //caused by bIsMobile=true;
  if (navigator.userAgent.includes("Edge")) { //not "Edg"
    bIsMobile=false;
  }
}

/*
//note:
alert("window.innerWidth: "+window.innerWidth); //1408
alert("window.innerHeight: "+window.innerHeight); //601

alert("screen.width: "+screen.width); //1408
alert("screen.height: "+screen.height); //792

	iStageMaxWidth=640*2;
	iStageMaxHeight=360*2;
*/


		init();

		//iFacingDirection=iFACING_DOWN;

		//added by Mike, 20230423
		initMouseInput();

		//added by Mike, 20231125
		initKeyboardInput();

		//added by Mike, 202301107
		initTouchInput();

		//fFramesPerSecond=16.66; //100.00; //16.66;
		clearInterval(iCurrentIntervalId);
		iCurrentIntervalId=setInterval(myUpdateFunction, fFramesPerSecond);
	}




  </script>

  <body id="myBodyId" onload="onLoad();">

	<canvas id="myCanvasId" class="myCanvas">
	</canvas>

				
  <canvas id="myCanvasTwoId" class="myCanvasTwo">
	</canvas>

	<canvas id="myEffectCanvasId" class="myEffectCanvas">
	</canvas>
			

<!-- noted by Mike, 20230424;

reference: https://stackoverflow.com/questions/5713295/specify-a-root-path-of-your-html-directory-for-script-links/41011179#41011179; last accessed: 20230424;
answer by: MistyDawn, 20161207T0655;
edited by: Huy Nguyen, 20170124T0455

/ means the root of the current drive;
./ means the current directory;
/ means the parent of the current directory.

//noted by Mike, 20231105
incorrect output on Safari; macOS;

opting to put assets folder in "html_application" folder instead
-->

	<img id="faviconImageId" class="ImageTileFrame1" src="assets/images/favicon.png">
	<img id="deathCountImageId" class="ImageTileFrame1" src="assets/images/favicon.png">

	<img id="wolfImageTileId" class="ImageAnimalFrame1" src="assets/images/animals.png">

	
	<img id="fontImageId0" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	
	<img id="fontImageId1" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	
	<img id="fontImageId2" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	
	<img id="fontImageId3" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	
	<img id="fontImageId4" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	
	<img id="fontImageId5" class="FontImage32x32Tile" src="assets/images/font512x512Rescaled.png?lastmod=20251103T1556">	

	<img id="doorImageRightId" class="Image64x64Tile" src="assets/images/tile.png">
	<img id="doorImageLeftId" class="Image64x64Tile" src="assets/images/tile.png">
	<img id="doorImageTopId" class="Image64x64Tile" src="assets/images/tile.png?lastmod=20241120T2053">
	<img id="doorImageBottomId" class="Image64x64Tile" src="assets/images/tile.png">

	<img id="doorLockedImageRightId" class="Image64x64Tile" src="assets/images/tile.png">
	<img id="riverImageRightId" class="ImageRiverTile" src="assets/images/river.png">
	
	
		<img id="mainImageTileImageTankBodyId" class="ImageTankFrame1" src="assets/images/inputImageLarge.png?lastmod=20241110">
		
		<img id="mainImageTileImageHeroBodyId" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025.png?lastmod=20251121T1639">		

		<img id="RunningWraithMonsterImageId" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025RunningWraith.png?lastmod=20251123T0943">		

		<img id="skelMonsterImageId" class="ImageHeroFrame1Boss" src="assets/images/inputImageLarge2025Boss.png?lastmod=20251120T0607">
		<img id="skelMonsterDeathAnimationImageId" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025.png?lastmod=20251117T1921">

		<img id="demonMonsterImageId" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025.png?lastmod=20251123T1925">
		<img id="demonMonsterDeathAnimationImageId" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025.png?lastmod=20251117T1921">

		<img id="mainImageTileImageId" class="ImageTileFrame1" src="assets/images/inputImage.png?lastmod=20241107">

		<img id="mainImageTileProjectileImageId" class="ImageTileFrame1" src="assets/images/inputImage.png?lastmod=20241107">

		<img id="mainImageTileFireballProjectileImageId" class="ImageTileFrame1" src="assets/images/fireballSmall.png?lastmod=20241122">

		<img id="mainImageTileFireballProjectileHoldImageId" class="ImageTileFrameFireballProjectileHold" src="assets/images/fireballSmall.png?lastmod=20241122">

		<img id="batMonsterImageId" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120">

		<img id="wraithMonsterImageId0" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025Wraith.png?lastmod=20251120T1420">
		<img id="wraithMonsterImageId1" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025Wraith.png?lastmod=20251120T1420">

		<img id="wraithMonsterImageId2" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025Wraith.png?lastmod=20251120T1420">
		<img id="wraithMonsterImageId3" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025Wraith.png?lastmod=20251120T1420">

		<img id="runningWraithMonsterImageId0" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025RunningWraith.png?lastmod=20251123T0946">
		<img id="runningWraithMonsterImageId1" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025RunningWraith.png?lastmod=20251123T0946">
		
		<img id="runningWraithMonsterImageId2" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025RunningWraith.png?lastmod=20251123T0946">
		<img id="runningWraithMonsterImageId3" class="ImageHeroFrame1" src="assets/images/inputImageLarge2025RunningWraith.png?lastmod=20251123T0946">


<!--
		<img id="snakeMonsterImageId" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241110">
-->
		<img id="snakeMonsterImageId0" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241110">
		<img id="snakeMonsterImageId1" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241110">

		<img id="grassMonsterImageId0" class="ImageTileBgFrame" src="assets/images/bgTile.png?lastmod=20241117">
		<img id="grassMonsterImageId1" class="ImageTileBgFrame" src="assets/images/bgTile.png?lastmod=20241117">
		<img id="grassMonsterImageId2" class="ImageTileBgFrame" src="assets/images/bgTile.png?lastmod=20241117">
		<img id="grassMonsterImageId3" class="ImageTileBgFrame" src="assets/images/bgTile.png?lastmod=20241117">

		<img id="slimeMonsterImageId0" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">
		<img id="slimeMonsterImageId1" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">
		<img id="slimeMonsterImageId2" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">
		<img id="slimeMonsterImageId3" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">
		<img id="slimeMonsterImageId4" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">
		<img id="slimeMonsterImageId5" class="ImageTileFrame1" src="assets/images/monsters.png?lastmod=20241120T1011">

		<img id="miniBossMonsterImageId0" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId1" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId2" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId3" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId4" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId5" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		
		<img id="miniBossMonsterImageId6" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId7" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId8" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId9" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId10" class="ImageTileFrameDd1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		<img id="miniBossMonsterImageId11" class="ImageTileFrame1" src="assets/images/bossMonsters.png?lastmod=20241127T2030">
		

		<!-- added by Mike, 20231121 -->
		<img id="mouseInputImageId" class="ImageMouseInput" src="assets/images/inputImageLarge.png">

		<img id="bossMonsterImageId" class="ImageMonsterBoss" src="assets/images/inputImageLarge.png">


		<!-- added by Mike, 20231104;
		  note: .html; not .php -->

	<img id="bombMonsterImageId0" class="ImageBombSmall" src="assets/images/items.png?lastmod=20251123T1422">
	<img id="bombMonsterImageId1" class="ImageBombSmall" src="assets/images/items.png?lastmod=20251123T1422">

	<img id="sniperShotStatusImageTileId" class="ImageBombSmall" src="assets/images/itemsTwo.png?lastmod=20251125T0547">


	<img id="pearlImageTileId" class="ImagePearlSmall" src="assets/images/items.png?lastmod=20241130T1432">
	<img id="pearlStatusImageTileId" class="ImagePearlSmall" src="assets/images/items.png?lastmod=20241130T1432">

	<img id="keyImageTileId" class="ImageKeySmall" src="assets/images/items.png?lastmod=20241130T1432">
	<img id="keyStatusImageTileId" class="ImageKeySmall" src="assets/images/items.png?lastmod=20241130T1432">

	<img id="amuletImageTileId" class="ImageKeySmall" src="assets/images/items.png?lastmod=20241130T1432">
	<img id="amuletStatusImageTileId" class="ImageKeySmall" src="assets/images/items.png?lastmod=20241130T1432">
	
	<img id="heroLifeBarStatusImageTileId" class="ImageProfileSmall" src="assets/images/profile.png">
	
	<img id="grassCutEffectImageId" class="ImageGrassCutEffectSmall" src="assets/images/bgTile.png">

	<img id="explosionEffectImageId" class="ImageExplosionEffectResizedToSmall" src="assets/images/effectsSmall.png">

	<img id="fireballExplosionEffectImageId" class="ImageExplosionEffectResizedToSmall" src="assets/images/effectsSmall.png">
  
	<img id="explosionEffectToMonsterImageId" class="ImageExplosion" src="assets/images/effects.png">

    <img id="explosionEffectToCityImageId" class="ImageExplosionToCity" src="assets/images/effects.png">

	<img id="dustEffectImageId" class="ImageDust" src="assets/images/effectsSmall.png">


	<img id="snowEffectImageId0" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId1" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId2" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId3" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId4" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId5" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId6" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId7" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId8" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId9" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">

	<img id="snowEffectImageId10" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId11" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId12" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId13" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId14" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId15" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="snowEffectImageId16" class="ImageSnow" src="assets/images/miscEffects.png?lastmod=20251115T1643">


	<img id="particleEffectImageId0" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId1" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId2" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId3" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId4" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId5" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId6" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId8" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId7" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">
	<img id="particleEffectImageId9" class="ImageParticle" src="assets/images/miscEffects.png?lastmod=20251115T1643">



	<img id="initFireballEffectImageId" class="ImageInitFireball" src="assets/images/effectsSmall.png">

	<img id="heroAttackEffectImageId" class="ImageHeroAttack" src="assets/images/heroEffectsSmall.png?lastmod=20241128T1010">

	<img id="walkOnSnowEffectImageId0" class="ImageWalkOnSnowEffect" src="assets/images/heroEffectsSmall.png?lastmod=20251115T0547">
	
<!--	
	<img id="walkOnSnowEffectImageId1" class="ImageWalkOnSnowEffect" src="assets/images/heroEffectsSmall.png?lastmod=20251115T0547">
	<img id="walkOnSnowEffectImageId2" class="ImageWalkOnSnowEffect" src="assets/images/heroEffectsSmall.png?lastmod=20251115T0547">
	<img id="walkOnSnowEffectImageId3" class="ImageWalkOnSnowEffect" src="assets/images/heroEffectsSmall.png?lastmod=20251115T0547">
-->
 
 <!--
	<div id="divSnowEffectId0" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId1" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId2" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId3" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId4" class="myDivSnowEffect"></div>

	<div id="divSnowEffectId5" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId6" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId7" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId8" class="myDivSnowEffect"></div>
	<div id="divSnowEffectId9" class="myDivSnowEffect"></div>
-->

	<div id="divTransitionEffectId" class="myDivTransitionEffect"></div>

		
	<img id="howToPlayGuideImageId" class="ImageHowToPlayGuide" src="assets/images/gameOff2024HowToPlay.png">
		
	<img id="howToPlayGuideImageFrame2Id" class="ImageHowToPlayGuide" src="assets/images/gameOff2024HowToPlayFrame2.png">
	
	<!-- ImageTitle-->
	<img id="titleImageId" class="ImageHowToPlayGuide" src="assets/images/gameOff2024TitleBG.png">

	<img id="titleImageFrame2Id" class="ImageHowToPlayGuide" src="assets/images/gameOff2024TitleBGFrame2.png">
<!--
	<img id="bossBattleBgImageId" class="ImageBossBattleBg" src="assets/images/bgImageCave.png?lastmod=20241127">
-->
	<img id="bossBattleBgImageBeachId" class="ImageBossBattleBg" src="assets/images/bgImageCaveStart.png?lastmod=20251102T1659">

	<img id="bossBattleBgImageBeachPart2Id" class="ImageBossBattleBgBeachPart2" src="assets/images/bgImageCaveStartPart2.png?lastmod=20241128">
	
	
	<img id="bossBattleBgImagePart2Id" class="ImageBossBattleBgPart2" src="assets/images/bossBattleBgPart2.png">	

	<img id="bossBattleBgImagePart3Id" class="ImageBossBattleBgPart3" src="assets/images/bossBattleBgPart3.png">	

	<img id="transparentLayerId" class="ImageTransparentLayer" src="assets/images/transparentLayer.png">	


	<div id="textStoryDivId" class="DivTextStory">STORY!</div>

	
	<div id="textStatusDivId" class="DivTextStatus">CONGRATULATIONS!</div>
	<div id="textStatusBackgroundDivId" class="DivTextStatusBackground"></div>

	
	<!-- PRESS ENTER; PRESS START -->
	<div id="textEnterDivId" class="DivTextClickStart">START</div>

	<div id="textNewGameDivId" class="DivTextClickContinue">NEW GAME</div>
	<div id="textContinueGameDivId" class="DivTextClickContinue">CONTINUE</div>

	<div id="textLevelUpLifeDivId" class="DivTextClickContinue">INCREASE MAX HP</div>
	<div id="textLevelUpStaminaDivId" class="DivTextClickContinue">INCREASE MAX STAMINA</div>
	<div id="textLevelUpSpeedDivId" class="DivTextClickContinue">INCREASE MAX SPEED</div>

	<div id="textScoreShadowDivId" class="DivStepCountStatusShadow">0</div>

	<div id="textScoreDivId" class="DivTextScore">0</div>

	<div id="textTimeDivId" class="DivTextTime">0</div>
	<div id="textPearlStatusDivId" class="DivTextTime">0</div>
	<div id="textLifeBarDivId" class="DivTextTime">LIFE</div>
	<div id="textManaBarDivId" class="DivTextTime">MANA</div>
	<div id="textMonsterDeathStatusDivId" class="DivTextTime">0</div>
	<div id="textHeroDeathStatusDivId" class="DivTextTime">0</div>



<!--
	<div id="stepCountStatusDivId" class="DivStepCountStatus">0</div>
	
	//usbongGameOff2023BGM
	//usbongGameOff2023AudioEffectsCannon
-->

  <audio id="myAudioId" class="myAudio" src="assets/audio/usbongGameOff2024CaveBGMV22.mp3" type="audio/x-m4a" controls loop>
	  Your browser does not support the audio tag.
	</audio><br/>

  <audio id="myAudioPart2Id" class="myAudio" src="assets/audio/usbongGameOff2024CaveBadBGMV10.mp3" type="audio/x-m4a" controls loop>
	  Your browser does not support the audio tag.
	</audio><br/>

  <audio id="myAudioPart3Id" class="myAudio" src="assets/audio/usbongGameOff2024TitleV5.mp3" type="audio/x-m4a" controls loop>
	  Your browser does not support the audio tag.
	</audio><br/>
	
  <audio id="myAudioBossScreechId" class="myAudio" src="assets/audio/usbongGameOff2024Screech.mp3" type="audio/x-m4a" controls loop>
	  Your browser does not support the audio tag.
	</audio><br/>
	
  <audio id="myAudioWaterId" class="myAudio" src="assets/audio/usbongGameOff2024WaterOKV2.mp3" type="audio/x-m4a" controls loop>
	  Your browser does not support the audio tag.
	</audio><br/>	

<!--
	<audio id="myAudioId" class="myAudio" src="assets/audio/usbongGameOff2023BGM.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>	
-->	
	

	<audio id="myAudioEffectGrassCutId" class="myAudio" src="assets/audio/usbongGameOff2023TapLoudEdited.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

	<audio id="myAudioEffectCannonFireId" class="myAudio" src="assets/audio/usbongGameOff2023AudioEffectsCannon.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

	<audio id="myAudioEffectSwordSliceId" class="myAudio" src="" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

	<audio id="myAudioEffectSwordOutId" class="myAudio" src="" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>
	
	<audio id="myAudioEffectSolvedId" class="myAudio" src="assets/audio/UsbongGameOff2024TuneSolved.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

	<audio id="myAudioEffectShortLightningBlastId" class="myAudio" src="assets/audio/usbongGameOff2025ShortLightningBlast.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

	<audio id="myAudioEffectDogWolfHowlId" class="myAudio" src="assets/audio/usbongGameOff2025DogWolfHowl.mp3" type="audio/x-m4a">
	  Your browser does not support the audio tag.
	</audio><br/>

<!--
<button onclick="openFullscreen();">Open Fullscreen</button>
-->

  </body>
</html>
